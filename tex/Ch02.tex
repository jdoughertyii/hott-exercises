\begin{coqdoccode}
\end{coqdoccode}
\section{Homotopy type theory}



 \exerdone{2.1}{103}  
Show that the three obvious proofs of Lemma 2.1.2 are pairwise equal.
 

 \soln
Lemma 2.1.2 states that for every type $A$ and every $x, y, z : A$, there is a
function
\[
  (x = y) \to (y = z) \to (x = z)
\]
written $p \mapsto q \mapsto p \ct q$ such that $\refl{x} \ct \refl{x} =
\refl{x}$ for all $x : A$.  Each proof is an object $\ct_{i}$ of type
\[
  \ct_{i} : \prd{x,y,z:A} (x=y)\to(y=z)\to(x=z)
\]
So we need to show that $\ctu = \ctd = \ctt$.


The first proof is induction over $p$.  Consider the family
\[
  C_{1}(x, y, p) \defeq 
  \prd{z:A} (y=x) (x=z)
\]
we have
\[
\lam{z}{q}q :
\left(\prd{z:A} (x=z) \to (x=z)\right)
  \equiv
  C_{1}(x, x, \refl{x})
\]
So by path induction, there is a function
\[
  p \ctu q : (x=z)
\]
such that $\refl{x} \ctu q \equiv q$. 


For the shorter version, we say that by induction it suffices to consider the
case where $y$ is $x$ and $p$ is $\refl{x}$.  Then given some $q : x = z$, we
want to construct an element of $x=z$; but this is just $q$, so induction gives
us a function $p \ctu q : x = z$ such that $\refl{x} \ctu q \defeq q$.
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.cat'}{cat'}{\coqdocdefinition{cat'}} \{\coqdocvar{A} : \coqdockw{Type}\} \{\coqdocvar{x} \coqdocvar{y} \coqdocvar{z} : \coqdocvariable{A}\} (\coqdocvar{p} : \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{y}) (\coqdocvar{q} : \coqdocvariable{y} \coqdocnotation{=} \coqdocvariable{z}) : \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{z}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{induction} \coqdocvar{p}. \coqdoctac{apply} \coqdocvar{q}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
For the second, consider the family
\[
  C_{2}(y, z, q) \defeq 
  \prd{z:A} (x=y) \to (x=z)
\]
and element
\[
  \lam{z}{p}p
  :
  \left(
    \prd{z:A} (x=z)\to (x=z)
  \right)
  \equiv
  C_{2}(z,z,\refl{z})
\]
Induction gives us a function
\[
  p \ctd q : (x = z)
\]
such that
\[
  p \ctd \refl{z} = \refl{z}
\] \begin{coqdoccode}
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.cat''}{cat'{}'}{\coqdocdefinition{cat'{}'}} \{\coqdocvar{A}:\coqdockw{Type}\} \{\coqdocvar{x} \coqdocvar{y} \coqdocvar{z} : \coqdocvariable{A}\} (\coqdocvar{p} : \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{y}) (\coqdocvar{q} : \coqdocvariable{y} \coqdocnotation{=} \coqdocvariable{z}) : \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{z}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{induction} \coqdocvar{q}. \coqdoctac{apply} \coqdocvar{p}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}


Finally, for $\ctt$, we have the construction from the text.  Take the type
families
\[
  D(x,y,p) \defeq 
  \prd{z:A}(y=z) \to  (x=z)
\]
and
\[
  E(x, z, q) \defeq (x = z)
\]
Since $E(x,x,\refl{x}) \equiv (x=x)$, we have $e(x) \defeq \refl{x} :
E(x,x,\refl{x})$, and induction gives us a function
\[
  d : \left(\prd{x,z:A}\prd{q:x=z}(x=z)\right) 
  \equiv
  \prd{x:A}D(x, x, \refl{x})
\]
So path induction again gives us a function
\[
  f : \prd{x,y,z:A}(x=y) \to(y=z) \to (x=z)
\]
Which we can write $p \ctt q : (x=z)$.  By the definitional equality of $f$, we
have that $\refl{x} \ct q \equiv d(x)$, and by the definitional equality of
$d$, we have $\refl{x} \ct \refl{x} \equiv \refl{x}$. \begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.cat'''}{cat'{}'{}'}{\coqdocdefinition{cat'{}'{}'}} \{\coqdocvar{A}:\coqdockw{Type}\} \{\coqdocvar{x} \coqdocvar{y} \coqdocvar{z} : \coqdocvariable{A}\} (\coqdocvar{p} : \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{y}) (\coqdocvar{q} : \coqdocvariable{y} \coqdocnotation{=} \coqdocvariable{z}) : \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{z}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{induction} \coqdocvar{p}, \coqdocvar{q}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
Now, to show that $p \ctu q = p \ctd q = p \ctt q$, which we will do by
induction on $p$ and $q$.  For the first pair, we want to construct for every
$x, y, z : A$, $p : x = y$, and $q : y = z$, an element of $p \ctu q = p \ctd
q$.  By induction on $p$, it suffices to assume that $y$ is $x$ and $p$ is
$\refl{x}$; similarly, by induction on $q$ it suffices to assume that $z$ is
also $x$ and $q$ is $\refl{x}$.  Then by the computation rule for $\ctu$,
$\refl{x} \ctu \refl{x} \equiv \refl{x}$, and by the computation rule for
$\ctd$, $\refl{x} \ctd \refl{x} \equiv \refl{x}$.  Thus we have
\[
  \refl{\refl{x}} : (\refl{x} \ctu \refl{x} = \refl{x} \ctd \refl{x})
\]
which provides the necessary data for induction.


Writing this out a bit more fully for practice, we have the family
\[
  C : \prd{x, y : A} (x = y) \to \UU
\]
defined by
\[
  C(x, y, p) \defeq 
  \prd{z:A}\prd{q:y=z}(p \ctu q = p \ctd q)
\] 
and in order to apply induction, we need an element of
\[
  \prd{x:A}C(x, x, \refl{x}) 
  \equiv
  \prd{x, z:A}\prd{q:x=z}(\refl{x} \ctu q = \refl{x} \ctd q)
  \equiv
  \prd{x, z:A}\prd{q:x=z}(q = \refl{x} \ctd q)
\]
Define $D(x, z, q) \defeq (q = \refl{x} \ctd q)$.  Then
\[
  \refl{\refl{x}} : 
  D(x, x, \refl{x}) 
  \equiv
  (\refl{x} = \refl{x} \ctd \refl{x})
  \equiv
  (\refl{x} = \refl{x})
\]
So by induction we have a function $f:\prd{x, z: A}\prd{p:x=z}(q = \refl{x}
\ctd q)$ with $f(x, x, \refl{x}) \defeq \refl{\refl{x}}$.  Thus we have the
element required for induction on $p$, and there is a function 
\[
  f' : \prd{x, y, z:A}\prd{p:x=y}\prd{q:y=z}(p \ctu q = p \ctd q)
\]
which we wanted to show.  \begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.cat' eq cat''}{cat'\_eq\_cat'{}'}{\coqdoclemma{cat'\_eq\_cat'{}'}} : \coqdockw{\ensuremath{\forall}} \{\coqdocvar{A}:\coqdockw{Type}\} \{\coqdocvar{x} \coqdocvar{y} \coqdocvar{z} : \coqdocvariable{A}\} (\coqdocvar{p} : \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{y}) (\coqdocvar{q} : \coqdocvariable{y} \coqdocnotation{=} \coqdocvariable{z}), \coqdoceol
\coqdocindent{1.00em}
\coqdocnotation{(}\coqref{Ch02.cat'}{\coqdocdefinition{cat'}} \coqdocvariable{p} \coqdocvariable{q}\coqdocnotation{)} \coqdocnotation{=} \coqdocnotation{(}\coqref{Ch02.cat''}{\coqdocdefinition{cat'{}'}} \coqdocvariable{p} \coqdocvariable{q}\coqdocnotation{)}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{induction} \coqdocvar{p}, \coqdocvar{q}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
For the next pair, we again use induction.  For all $x, y, z : A$,
$p : x = y$, and $q : y = z$, we need to construct an element of $p
\ctd q = p \ctt q$.  By induction on $p$ and $q$, it suffices to consider the
case where $y$ and $z$ are $x$ and $p$ and $q$ are $\refl{x}$.  Then
$(\refl{x} \ctd \refl{x} = \refl{x} \ctt \refl{x}) \equiv (\refl{x} =
\refl{x})$, and $\refl{\refl{x}}$ inhabits this type.
 \begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.cat'' eq cat'''}{cat'{}'\_eq\_cat'{}'{}'}{\coqdoclemma{cat'{}'\_eq\_cat'{}'{}'}} : \coqdockw{\ensuremath{\forall}} \{\coqdocvar{A}:\coqdockw{Type}\} \{\coqdocvar{x} \coqdocvar{y} \coqdocvar{z} : \coqdocvariable{A}\} (\coqdocvar{p} : \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{y}) (\coqdocvar{q} : \coqdocvariable{y} \coqdocnotation{=} \coqdocvariable{z}), \coqdoceol
\coqdocindent{1.00em}
\coqdocnotation{(}\coqref{Ch02.cat''}{\coqdocdefinition{cat'{}'}} \coqdocvariable{p} \coqdocvariable{q}\coqdocnotation{)} \coqdocnotation{=} \coqdocnotation{(}\coqref{Ch02.cat'''}{\coqdocdefinition{cat'{}'{}'}} \coqdocvariable{p} \coqdocvariable{q}\coqdocnotation{)}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{induction} \coqdocvar{p}, \coqdocvar{q}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
The third proof goes exactly the same. \begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.cat' eq cat'''}{cat'\_eq\_cat'{}'{}'}{\coqdoclemma{cat'\_eq\_cat'{}'{}'}} : \coqdockw{\ensuremath{\forall}} \{\coqdocvar{A}:\coqdockw{Type}\} \{\coqdocvar{x} \coqdocvar{y} \coqdocvar{z} : \coqdocvariable{A}\} (\coqdocvar{p} : \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{y}) (\coqdocvar{q} : \coqdocvariable{y} \coqdocnotation{=} \coqdocvariable{z}), \coqdoceol
\coqdocindent{1.00em}
\coqdocnotation{(}\coqref{Ch02.cat'}{\coqdocdefinition{cat'}} \coqdocvariable{p} \coqdocvariable{q}\coqdocnotation{)} \coqdocnotation{=} \coqdocnotation{(}\coqref{Ch02.cat'''}{\coqdocdefinition{cat'{}'{}'}} \coqdocvariable{p} \coqdocvariable{q}\coqdocnotation{)}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{induction} \coqdocvar{p}, \coqdocvar{q}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
\noindent
Note that all three of these proofs must end with \coqdockw{Defined} instead of \coqdockw{Qed} if
we want to make use of the computational identity (e.g., $p \ctu \refl{x}
\equiv p$)
that they produce, as we will in the next exercise.
 

 \exerdone{2.2}{103}  
Show that the three equalities of proofs constructed in the previous
exercise form a commutative triangle.  In other words, if the three
definitions of concatenation are denoted by $(p \ctu q)$, $(p \ctd
q)$, and $(p \ctt q)$, then the concatenated equality
\[
  (p \ctu q) = (p \ctd q) = (p \ctt q)
\]
is equal to the equality $(p \ctu q) = (p \ctt q)$.
 

 \soln
Let $x, y, z : A$, $p : x = y$, $q : y = z$, and let $r_{12} : (p \ctu q = p
\ctd q)$, $r_{23} : (p \ctd q = p \ctt q)$, and $r_{13} : (p \ctu q = p
\ctt q)$ be the proofs from the last exercise.  We want to show that $r_{12}
\ct r_{23} = r_{13}$, where $\ct = \ct_{3}$ is the concatenation operation from
the book.  By induction on $p$ and $q$, it suffices to consider the case where
$y$ and $z$ are $x$ and $p$ and $q$ are $\refl{x}$.  Then we have $r_{12}
\equiv \refl{\refl{x}}$, $r_{23} \equiv \refl{\refl{x}}$, and
$r_{13} \equiv \refl{\refl{x}}$ by the definitions.  But then the type we're
trying to witness is
\[
    (\refl{\refl{x}} \ct \refl{\refl{x}} = \refl{\refl{x}})
    \equiv
    (\refl{\refl{x}} = \refl{\refl{x}})
\]
from the definition of $\ct$, so $\refl{\refl{\refl{x}}}$ is our witness.
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.comm triangle}{comm\_triangle}{\coqdoclemma{comm\_triangle}} : \coqdockw{\ensuremath{\forall}} (\coqdocvar{A}:\coqdockw{Type}) (\coqdocvar{x} \coqdocvar{y} \coqdocvar{z} : \coqdocvariable{A}) (\coqdocvar{p} : \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{y}) (\coqdocvar{q} : \coqdocvariable{y} \coqdocnotation{=} \coqdocvariable{z}),\coqdoceol
\coqdocindent{1.00em}
\coqdocnotation{(}\coqref{Ch02.cat' eq cat''}{\coqdoclemma{cat'\_eq\_cat'{}'}} \coqdocvariable{p} \coqdocvariable{q}\coqdocnotation{)} \coqdocnotation{@} \coqdocnotation{(}\coqref{Ch02.cat'' eq cat'''}{\coqdoclemma{cat'{}'\_eq\_cat'{}'{}'}} \coqdocvariable{p} \coqdocvariable{q}\coqdocnotation{)} \coqdocnotation{=} \coqdocnotation{(}\coqref{Ch02.cat' eq cat'''}{\coqdoclemma{cat'\_eq\_cat'{}'{}'}} \coqdocvariable{p} \coqdocvariable{q}\coqdocnotation{)}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{induction} \coqdocvar{p}, \coqdocvar{q}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Qed}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
\exerdone{2.3}{103}  
Give a fourth, different proof of Lemma 2.1.2, and prove that it is equal to
the others.


 \soln
Let $x, y : A$ and $p : x = y$.  Rather than fixing some $q$ and
constructing an element of $x = z$ out of that, we can directly
construct an element of
\[
  \prd{z:A} (y = z) \to (x = z)
\]
by induction on $p$.  It suffices to consider the case where $y$ is
$x$ and $p$ is a $\refl{x}$, which then makes it easy to produce such
an element; namely,
\[
  \lam{z}\idfunc{x=z} : \prd{z:A} (x = z) \to (x = z)
\]
Induction then gives us a function $p \ctq q : (x = z)$ such that
$\lam{q}(\refl{x} \ctq q) \defeq \idfunc{x=z}$.
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.cat''''}{cat'{}'{}'{}'}{\coqdocdefinition{cat'{}'{}'{}'}} \{\coqdocvar{A}:\coqdockw{Type}\} \{\coqdocvar{x} \coqdocvar{y} \coqdocvar{z} : \coqdocvariable{A}\} (\coqdocvar{p} : \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{y}) (\coqdocvar{q} : \coqdocvariable{y} \coqdocnotation{=} \coqdocvariable{z}) : \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{z}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{generalize} \coqdocvar{q}. \coqdoctac{generalize} \coqdocvar{z}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{induction} \coqdocvar{p}. \coqdoctac{trivial}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
To prove that it's equal to the others, we can just show that it's
equal to $\ct$ and then use concatenation.  Again by induction on $p$
and $q$, it suffices to consider the case where $y$ and $z$ are $x$
and $p$ and $q$ are $\refl{x}$.  Then we have
\[
  \left((\refl{x} \ctt \refl{x}) = (\refl{x} \ctq \refl{x})\right)
  \equiv
  \left(\refl{x} = \idfunc{x=x}(\refl{x})\right)
  \equiv
  \left(\refl{x} = \refl{x}\right)
\] 
So $\refl{\refl{x}}$ is again our witness.\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.cat''' eq cat''''}{cat'{}'{}'\_eq\_cat'{}'{}'{}'}{\coqdoclemma{cat'{}'{}'\_eq\_cat'{}'{}'{}'}} : \coqdockw{\ensuremath{\forall}} \{\coqdocvar{A}:\coqdockw{Type}\} \{\coqdocvar{x} \coqdocvar{y} \coqdocvar{z} : \coqdocvariable{A}\} (\coqdocvar{p} : \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{y}) (\coqdocvar{q} : \coqdocvariable{y} \coqdocnotation{=} \coqdocvariable{z}),\coqdoceol
\coqdocindent{1.00em}
\coqdocnotation{(}\coqref{Ch02.cat'''}{\coqdocdefinition{cat'{}'{}'}} \coqdocvariable{p} \coqdocvariable{q}\coqdocnotation{)} \coqdocnotation{=} \coqdocnotation{(}\coqref{Ch02.cat''''}{\coqdocdefinition{cat'{}'{}'{}'}} \coqdocvariable{p} \coqdocvariable{q}\coqdocnotation{)}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{induction} \coqdocvar{p}, \coqdocvar{q}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Qed}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
\exerdone{2.4}{103} 
Define, by induction on $n$, a general notion of $n$-dimensional path
in a type $A$, simultaneously with the type of boundaries for such paths. 

 \soln
A $0$-path in $A$ is an element $x : A$, so the type of $0$-paths is just $A$.
If $p$ and $q$ are $n$-paths, then so is $p = q$.  In the other
direction, the boundary of a $0$-path is empty, and the boundary of an
$n+1$ path is an $n$-path.
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Fixpoint} \coqdef{Ch02.npath}{npath}{\coqdocdefinition{npath}} (\coqdocvar{A}:\coqdockw{Type}) (\coqdocvar{n}:\coqexternalref{nat}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocinductive{nat}}) : \coqdockw{Type} :=\coqdoceol
\coqdocindent{1.00em}
\coqdockw{match} \coqdocvariable{n} \coqdockw{with}\coqdoceol
\coqdocindent{2.00em}
\ensuremath{|} \coqexternalref{O}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocconstructor{O}} \ensuremath{\Rightarrow} \coqdocvariable{A}\coqdoceol
\coqdocindent{2.00em}
\ensuremath{|} \coqexternalref{S}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocconstructor{S}} \coqdocvar{n'} \ensuremath{\Rightarrow} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{p} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{(}}\coqref{Ch02.boundary}{\coqdocdefinition{boundary}} \coqdocvariable{A} \coqdocvar{n'}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{)}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{q} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{(}}\coqref{Ch02.boundary}{\coqdocdefinition{boundary}} \coqdocvariable{A} \coqdocvar{n'}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{)}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{p} \coqdocnotation{=} \coqdocvar{q}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}\}}}\coqdoceol
\coqdocindent{1.00em}
\coqdockw{end}\coqdoceol
\coqdocnoindent
\coqdoceol
\coqdocnoindent
\coqdockw{with} \coqdef{Ch02.boundary}{boundary}{\coqdocdefinition{boundary}} (\coqdocvar{A}:\coqdockw{Type}) (\coqdocvar{n}:\coqexternalref{nat}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocinductive{nat}}) : \coqdockw{Type} :=\coqdoceol
\coqdocindent{1.00em}
\coqdockw{match} \coqdocvariable{n} \coqdockw{with}\coqdoceol
\coqdocindent{2.00em}
\ensuremath{|} \coqexternalref{O}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocconstructor{O}} \ensuremath{\Rightarrow} \coqdocinductive{Empty}\coqdoceol
\coqdocindent{2.00em}
\ensuremath{|} \coqexternalref{S}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocconstructor{S}} \coqdocvar{n'} \ensuremath{\Rightarrow} (\coqref{Ch02.npath}{\coqdocdefinition{npath}} \coqdocvariable{A} \coqdocvar{n'})\coqdoceol
\coqdocindent{1.00em}
\coqdockw{end}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
\exerdone{2.5}{103} 
Prove that the functions
\begin{align*}
 (f(x) = f(y)) &\to (p_{*}(f(x)) = f(y)) \qquad\qquad\text{and} \\
 (p_{*}(f(x)) = f(y)) &\to (f(x) = f(y))
\end{align*}
are inverse equivalences. 

 \soln 
I take it that ``inverse equivalences'' means that each of the maps is the
quasi-inverse of the other.  Suppose that $x, y : A$, $p : x = y$, and $f : A
\to B$.  Then we have the objects 
\[
  \mapfunc{f}(p) : (f(x) = f(y)) \\
  \transconst{B}{p}{f(x)} : (p_{*}(f(x)) = f(x))
\]
thus
\begin{align*}
  \left(\transconst{B}{p}{f(x)} \ct -\right)
  &:
  (f(x)=f(y))
  \to
  (p_{*}(f(x)) = f(y))
  \\
  \left((\transconst{B}{p}{f(x)})^{-1} \ct -\right)
  &:
  (p_{*}(f(x))=f(y))
  \to
  (f(x) = f(y))
\end{align*}
Which are our maps.  Composing the first with the second, we obtain an element
\[
  \left(\transconst{B}{p}{f(x)} \ct
  \left((\transconst{B}{p}{f(x)})^{-1} \ct -\right)\right)
\]
of $f(x) = f(y)$.  Using Lemma 2.1.4, we can show that this is homotopic to the
identity:
\begin{align*}
  &\prd{q:f(x)=f(y)}
  \left(
  \transconst{B}{p}{f(x)} \ct
  \left((\transconst{B}{p}{f(x)})^{-1} \ct q\right)
  =
  q\right)
  \\&= 
  \prd{q:f(x)=f(y)}
  \left(
  \left(\transconst{B}{p}{f(x)} \ct
  (\transconst{B}{p}{f(x)})^{-1}\right) \ct q
  =
  q\right)
  \\&= 
  \prd{q:f(x)=f(y)}
  \left(
  q
  =
  q\right)
\end{align*}
which is inhabited by $\refl{q}$.  The same argument goes the other way, so
this concatenation is an equivalence.
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.eq2 3 6}{eq2\_3\_6}{\coqdocdefinition{eq2\_3\_6}} \{\coqdocvar{A} \coqdocvar{B} : \coqdockw{Type}\} \{\coqdocvar{x} \coqdocvar{y} : \coqdocvariable{A}\} (\coqdocvar{f} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B}) (\coqdocvar{p} : \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{y}) (\coqdocvar{q} : \coqdocvariable{f} \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{f} \coqdocvariable{y}) : \coqdoceol
\coqdocindent{2.00em}
(@\coqdocdefinition{transport} \coqdocvar{\_} (\coqdockw{fun} \coqdocvar{\_} \ensuremath{\Rightarrow} \coqdocvariable{B}) \coqdocvar{\_} \coqdocvar{\_} \coqdocvariable{p} (\coqdocvariable{f} \coqdocvariable{x}) \coqdocnotation{=} \coqdocvariable{f} \coqdocvariable{y}) := \coqdoceol
\coqdocindent{2.00em}
\coqdocnotation{(}\coqdocdefinition{transport\_const} \coqdocvariable{p} (\coqdocvariable{f} \coqdocvariable{x})\coqdocnotation{)} \coqdocnotation{@} \coqdocvariable{q}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.eq2 3 7}{eq2\_3\_7}{\coqdocdefinition{eq2\_3\_7}} \{\coqdocvar{A} \coqdocvar{B} : \coqdockw{Type}\} \{\coqdocvar{x} \coqdocvar{y} : \coqdocvariable{A}\} (\coqdocvar{f} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B}) (\coqdocvar{p} : \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{y})\coqdoceol
\coqdocindent{1.00em}
(\coqdocvar{q} : @\coqdocdefinition{transport} \coqdocvar{\_} (\coqdockw{fun} \coqdocvar{\_} \ensuremath{\Rightarrow} \coqdocvariable{B}) \coqdocvar{\_} \coqdocvar{\_} \coqdocvariable{p} (\coqdocvariable{f} \coqdocvariable{x}) \coqdocnotation{=} \coqdocvariable{f} \coqdocvariable{y}) : \coqdoceol
\coqdocindent{1.00em}
(\coqdocvariable{f} \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{f} \coqdocvariable{y}) :=\coqdoceol
\coqdocindent{1.00em}
\coqdocnotation{(}\coqdocdefinition{transport\_const} \coqdocvariable{p} (\coqdocvariable{f} \coqdocvariable{x})\coqdocnotation{)\^{}} \coqdocnotation{@} \coqdocvariable{q}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Lemma} \coqdef{Ch02.isequiv transportconst}{isequiv\_transportconst}{\coqdoclemma{isequiv\_transportconst}} (\coqdocvar{A} \coqdocvar{B}:\coqdockw{Type}) (\coqdocvar{x} \coqdocvar{y} \coqdocvar{z} : \coqdocvariable{A}) (\coqdocvar{f} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B}) (\coqdocvar{p} : \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{y}) : \coqdoceol
\coqdocindent{1.00em}
\coqdocclass{IsEquiv} (\coqref{Ch02.eq2 3 6}{\coqdocdefinition{eq2\_3\_6}} \coqdocvariable{f} \coqdocvariable{p}).\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{isequiv\_adjointify} \coqdocvar{\_} (\coqref{Ch02.eq2 3 7}{\coqdocdefinition{eq2\_3\_7}} \coqdocvar{f} \coqdocvar{p}) \coqdocvar{\_} \coqdocvar{\_}); \coqdoctac{intro} \coqdocvar{q};\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{unfold} \coqref{Ch02.eq2 3 6}{\coqdocdefinition{eq2\_3\_6}}, \coqref{Ch02.eq2 3 7}{\coqdocdefinition{eq2\_3\_7}}; \coqdocvar{path\_induction}; \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Qed}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
\exerdone{2.6}{103} 
Prove that if $p : x = y$, then the function $(p \ct -) : (y = z) \to (x = z)$
is an equivalence.


 \soln
Suppose that $p : x = y$.  To show that $(p \ct -)$ is an equivalence, we need
to exhibit a quasi-inverse to it.  This is a triple $(g, \alpha, \beta)$ of a
function $g:(x = z) \to (y = z)$ and homotopies $\alpha : (p \ct -) \circ g \sim
\idfunc{x=z}$ and $\beta : g \circ (p \ct -) \sim \idfunc{y=z}$.  For $g$, we
can take $(p^{-1} \ct -)$.  For the homotopies, we can use the results of Lemma
2.1.4.  So we have
\[
((p \ct -) \circ g) \sim \idfunc{x=z}
\equiv
\prd{q:x=z}(p \ct (p^{-1} \ct q) = q)
=
\prd{q:x=z}((p \ct p^{-1}) \ct q = q)
=
\prd{q:x=z}(\refl{x} \ct q = q)
=
\prd{q:x=z}(q = q)
\]
which is inhabited by $\refl{q}$ and
\[
(g \circ (p \ct -)) \sim \idfunc{y=z}
\equiv
\prd{q:y=z}(p^{-1} \ct (p \ct q) = q)
=
\prd{q:y=z}((p^{-1} \ct p) \ct q = q)
=
\prd{q:y=z}(\refl{y} \ct q = q)
=
\prd{q:y=z}(q = q)
\]
which is inhabited by $\refl{q}$.  So $(p \ct -)$ has a quasi-inverse, hence it
is an equivalence.
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Lemma} \coqdef{Ch02.isequiv eqcat}{isequiv\_eqcat}{\coqdoclemma{isequiv\_eqcat}} (\coqdocvar{A}:\coqdockw{Type}) (\coqdocvar{x} \coqdocvar{y} \coqdocvar{z} : \coqdocvariable{A}) (\coqdocvar{p} : \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{y}) : \coqdocclass{IsEquiv} (\coqdockw{fun} \coqdocvar{q}:(\coqdocvariable{y}\coqdocnotation{=}\coqdocvariable{z}) \ensuremath{\Rightarrow} \coqdocvariable{p} \coqdocnotation{@} \coqdocvariable{q}).\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{isequiv\_adjointify} \coqdocvar{\_} (\coqdockw{fun} \coqdocvar{q}:(\coqdocvar{x}\coqdocnotation{=}\coqdocvar{z}) \ensuremath{\Rightarrow} \coqdocvar{p}\coqdocnotation{\^{}} \coqdocnotation{@} \coqdocvariable{q}) \coqdocvar{\_} \coqdocvar{\_}); \coqdoctac{intro} \coqdocvar{q};\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{by} \coqdocvar{path\_induction}.\coqdoceol
\coqdocnoindent
\coqdockw{Qed}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
\exerdone{2.7}{104} 
State and prove a generalization of Theorem 2.6.5 from cartesian products to
$\Sigma$-types.


 \soln
Suppose that we have types $A$ and $A'$ and type families $B:A\to\UU$ and
$B':A'\to\UU$, along with a function $g:A \to A'$ and a dependent function
$h:\prd{x:A} B(x) \to B'(f(x))$.  We can then define a function $f :
(\sm{x:A}B(x)) \to (\sm{x:A'}B'(x))$ by $f(x) \defeq (g(\fst x), h(\fst x, \snd
x))$.  
Let $x, y : \sm{a:A}B(a)$, and 
suppose that $p : \fst x = \fst y$ and that $q : p_{*}(\snd x) =
\snd y$.  The left-side of Theorem 2.6.5 generalizes directly to
$f(\pair^{=}(p, q))$, where now $\pair^{=}$ is given by the backward direction
of Theorem 2.7.2.  


The right hand side is trickier.  It ought to represent the application of $g$
and $h$, followed by the application of $\pair^{=}$, as Theorem 2.6.5 does.
Applying $g$ produces the first argument to $\pair^{=}$, $\apfunc{g}(p) \equiv
g(p)$.  For $h$, we'll need to construct the right object.  We need one of type
\[
  (g(p))_{*}(h(\fst x, \snd x)) = h(\fst y, \snd y)
\]
Which we'll construct by induction.  It suffices to consider the case where $x
\equiv (a, b)$, $y \equiv (a', b')$, $p \equiv \refl{a}$, and $q \equiv
\refl{b}$.  Then we need an object of type
\[
  \left((g(\refl{a}))_{*}(h(a, b)) = h(a', b')\right)
  \equiv
  \left(h(a, b) = h(a', b')\right)
\]
which we can easily construct by applying $h$ to $p$ and $q$.  So by induction, we have an object
\[
  T(h, p, q) : 
  (g(p))_{*}(h(\fst x, \snd x)) = h(\fst y, \snd y)
\]
such that $T(h, \refl{a}, \refl{b}) \equiv \refl{h(a, b)}$.


Now we can state the generalization.  We show that
\[
  f(\pair^{=}(p, q)) = \pair^{=}(g(p), T(h, p, q))
\]
by induction.  So let $x \equiv (a, b)$, $y \equiv (a', b')$, $p
\equiv \refl{a}$, and $q \equiv \refl{b}$.  Then we need to show that
\[
  \refl{f((a, b))} = \refl{(g(a), h(a, b))}
\]
But from the definition of $f$, this is a judgemental equality.  So we're done.
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Module} \coqdef{Ch02.Exercise2 7}{Exercise2\_7}{\coqdocmodule{Exercise2\_7}}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.Exercise2 7.T}{T}{\coqdocdefinition{T}} \{\coqdocvar{A} \coqdocvar{A'} : \coqdockw{Type}\} \{\coqdocvar{B} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\} \{\coqdocvar{B'} : \coqdocvariable{A'} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\}\coqdoceol
\coqdocindent{5.50em}
\{\coqdocvar{g} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{A'}\} (\coqdocvar{h} : \coqdockw{\ensuremath{\forall}} \coqdocvar{a}, \coqdocvariable{B} \coqdocvariable{a} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B'} (\coqdocvariable{g} \coqdocvariable{a}))\coqdoceol
\coqdocindent{5.50em}
\{\coqdocvar{x} \coqdocvar{y} : \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{a}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}}\coqdocvariable{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{B} \coqdocvar{a}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}\}\coqdoceol
\coqdocindent{5.50em}
(\coqdocvar{p} : \coqdocvariable{x}\coqdocnotation{.1} \coqdocnotation{=} \coqdocvariable{y}\coqdocnotation{.1}) (\coqdocvar{q} : \coqdocvariable{p} \coqdocnotation{\#} \coqdocvariable{x}\coqdocnotation{.2} \coqdocnotation{=} \coqdocvariable{y}\coqdocnotation{.2})\coqdoceol
\coqdocindent{1.00em}
: \coqdocnotation{(}\coqdocdefinition{ap} \coqdocvariable{g} \coqdocvariable{p}\coqdocnotation{)} \coqdocnotation{\#} \coqdocnotation{(}\coqdocvariable{h} \coqdocvariable{x}\coqdocnotation{.1} \coqdocvariable{x}\coqdocnotation{.2}\coqdocnotation{)} \coqdocnotation{=} \coqdocvariable{h} \coqdocvariable{y}\coqdocnotation{.1} \coqdocvariable{y}\coqdocnotation{.2}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} \coqdocvar{x} \coqdockw{as} [\coqdocvar{a} \coqdocvar{b}], \coqdocvar{y} \coqdockw{as} [\coqdocvar{a'} \coqdocvar{b'}].\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{simpl} \coqdoctac{in} \coqdocvar{p}. \coqdoctac{induction} \coqdocvar{p}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{simpl} \coqdoctac{in} *. \coqdocvar{f\_ap}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.Exercise2 7.functor sigma}{functor\_sigma}{\coqdocdefinition{functor\_sigma}} \{\coqdocvar{A} \coqdocvar{A'} : \coqdockw{Type}\} \{\coqdocvar{B} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\} \{\coqdocvar{B'} : \coqdocvariable{A'} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\}\coqdoceol
\coqdocindent{5.50em}
(\coqdocvar{g} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{A'}) (\coqdocvar{h} : \coqdockw{\ensuremath{\forall}} \coqdocvar{a}, \coqdocvariable{B} \coqdocvariable{a} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B'} (\coqdocvariable{g} \coqdocvariable{a})) \coqdoceol
\coqdocindent{1.00em}
: \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{B} \coqdocvar{x}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{A'} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{B'} \coqdocvar{x}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}\coqdoceol
\coqdocindent{1.00em}
:= \coqdockw{fun} \coqdocvar{z} \ensuremath{\Rightarrow} \coqdocnotation{(}\coqdocvariable{g} \coqdocvariable{z}\coqdocnotation{.1}\coqdocnotation{;} \coqdocvariable{h} \coqdocvariable{z}\coqdocnotation{.1} \coqdocvariable{z}\coqdocnotation{.2}\coqdocnotation{)}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.Exercise2 7.ex2 7}{ex2\_7}{\coqdoclemma{ex2\_7}} : \coqdockw{\ensuremath{\forall}} \{\coqdocvar{A} \coqdocvar{A'} : \coqdockw{Type}\} \{\coqdocvar{B} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\} \{\coqdocvar{B'} : \coqdocvariable{A'} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\}\coqdoceol
\coqdocindent{11.50em}
(\coqdocvar{g} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{A'}) (\coqdocvar{h} : \coqdockw{\ensuremath{\forall}} \coqdocvar{a}, \coqdocvariable{B} \coqdocvariable{a} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B'} (\coqdocvariable{g} \coqdocvariable{a}))\coqdoceol
\coqdocindent{11.50em}
(\coqdocvar{x} \coqdocvar{y} : \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{a}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}}\coqdocvariable{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{B} \coqdocvar{a}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}})\coqdoceol
\coqdocindent{11.50em}
(\coqdocvar{p} : \coqdocvariable{x}\coqdocnotation{.1} \coqdocnotation{=} \coqdocvariable{y}\coqdocnotation{.1}) (\coqdocvar{q} : \coqdocvariable{p} \coqdocnotation{\#} \coqdocvariable{x}\coqdocnotation{.2} \coqdocnotation{=} \coqdocvariable{y}\coqdocnotation{.2}),\coqdoceol
\coqdocindent{1.00em}
\coqdocdefinition{ap} (\coqref{Ch02.Exercise2 7.functor sigma}{\coqdocdefinition{functor\_sigma}} \coqdocvariable{g} \coqdocvariable{h}) (\coqdocdefinition{path\_sigma} \coqdocvariable{B} \coqdocvariable{x} \coqdocvariable{y} \coqdocvariable{p} \coqdocvariable{q}) \coqdoceol
\coqdocindent{1.00em}
\coqdocnotation{=} \coqdocdefinition{path\_sigma} \coqdocvariable{B'} (\coqref{Ch02.Exercise2 7.functor sigma}{\coqdocdefinition{functor\_sigma}} \coqdocvariable{g} \coqdocvariable{h} \coqdocvariable{x}) (\coqref{Ch02.Exercise2 7.functor sigma}{\coqdocdefinition{functor\_sigma}} \coqdocvariable{g} \coqdocvariable{h} \coqdocvariable{y}) \coqdoceol
\coqdocindent{7.50em}
(\coqdocdefinition{ap} \coqdocvariable{g} \coqdocvariable{p}) (\coqref{Ch02.Exercise2 7.T}{\coqdocdefinition{T}} \coqdocvariable{h} \coqdocvariable{p} \coqdocvariable{q}).\coqdoceol
\coqdocnoindent
\coqdoctac{intros}.\coqdoceol
\coqdocnoindent
\coqdoctac{destruct} \coqdocvar{x} \coqdockw{as} [\coqdocvar{a} \coqdocvar{b}], \coqdocvar{y} \coqdockw{as} [\coqdocvar{a'} \coqdocvar{b'}].\coqdoceol
\coqdocnoindent
\coqdoctac{simpl} \coqdoctac{in} \coqdocvar{p}. \coqdoctac{induction} \coqdocvar{p}.\coqdoceol
\coqdocnoindent
\coqdoctac{simpl} \coqdoctac{in} \coqdocvar{q}. \coqdoctac{induction} \coqdocvar{q}.\coqdoceol
\coqdocnoindent
\coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{End} \coqref{Ch02}{\coqdocmodule{Exercise2\_7}}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
\exerdone{2.8}{104} 
State and prove an analogue of Theorem 2.6.5 for coproducts.


 \soln
Let $A, A', B, B' : \UU$, and let $g: A \to A'$ and $h: B \to B'$.  These allow
us to construct a function $f : A + B \to A' + B'$ given by
\[
  f(\inl(a)) \defeq \inl'(g(a))
  \qquad\qquad
  f(\inr(b)) \defeq \inr'(h(b))
\]


Now, we want to show that $\apfunc{f}$ is functorial, which requires something
corresponding to $\pair^{=}$.  The type of this function will vary depending on
which two $x, y : A+B$ we consider. Suppose that $p : x = y$; there are four
cases:



\begin{itemize}
\item  $x = \inl(a_{1})$ and $y = \inl(a_{2})$.  Then $\pair^{=}$ is given by
  $\apfunc{\inl}$, and we must show that
  \[
    f(\inl(p)) = \inl'(g(p))
  \]
  which is easy with path induction; it suffices to consider $p \equiv
  \refl{a}$, which reduces our equality to
  \[
    \refl{f(\inl(a))} = \refl{\inl'(g(a))}
  \]
  and this is a judgemental equality, given the definition of $f$.



\item  $x = \inl(a)$ and $y = \inr(b)$.  Then by 2.12.3 $(x = y) \eqvsym \emptyt$,
  and $p$ allows us to construct anything we like.



\item  $x = \inr(b)$ and $y = \inl(a)$ proceeds just as in the previous case.



\item  $x = \inr(b)$ and $y = \inr(b)$ proceeds just as in the first case.

\end{itemize}
Since these are all the cases, we've proven an analogue to Theorem 2.6.5 for
coproducts.  A closer analogue would not involve $p : x = y$, but rather
equalities $p : a =_{A} a'$ and $q : b =_{B} b'$, and then would show that for
all the different cases, $\mapfunc{f}$ is functorial.  However, this follows
from the version proven, which is more simply stated.
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.ap functor sum}{ap\_functor\_sum}{\coqdoclemma{ap\_functor\_sum}} : \coqdoceol
\coqdocindent{1.00em}
\coqdockw{\ensuremath{\forall}} (\coqdocvar{A} \coqdocvar{A'} \coqdocvar{B} \coqdocvar{B'} : \coqdockw{Type}) (\coqdocvar{g} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{A'}) (\coqdocvar{h} : \coqdocvariable{B} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B'}) (\coqdocvar{x} \coqdocvar{y} : \coqdocvariable{A}\coqexternalref{:type scope:x '+' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{+}}\coqdocvariable{B}) (\coqdocvar{p} : \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{y}),\coqdoceol
\coqdocindent{1.00em}
\coqdocdefinition{ap} (\coqdocdefinition{functor\_sum} \coqdocvariable{g} \coqdocvariable{h}) \coqdocvariable{p}\coqdoceol
\coqdocindent{1.00em}
\coqdocnotation{=} \coqdocdefinition{path\_sum} (\coqdocdefinition{functor\_sum} \coqdocvariable{g} \coqdocvariable{h} \coqdocvariable{x}) (\coqdocdefinition{functor\_sum} \coqdocvariable{g} \coqdocvariable{h} \coqdocvariable{y})\coqdoceol
\coqdocindent{6.50em}
(\coqdocdefinition{path\_sum\_inv} (\coqdocdefinition{ap} (\coqdocdefinition{functor\_sum} \coqdocvariable{g} \coqdocvariable{h}) \coqdocvariable{p})).\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} \coqdocvar{x} \coqdockw{as} [\coqdocvar{a} \ensuremath{|} \coqdocvar{b}], \coqdocvar{y} \coqdockw{as} [\coqdocvar{a'} \ensuremath{|} \coqdocvar{b'}].\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{induction} \coqdocvar{p}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocindent{1.00em}
\coqdocvar{contradiction} (\coqdocnotation{(}\coqdocdefinition{equiv\_path\_sum} \coqdocvar{\_} \coqdocvar{\_}\coqdocnotation{)\^{}-1} \coqdocvar{p}).\coqdoceol
\coqdocindent{1.00em}
\coqdocvar{contradiction} (\coqdocnotation{(}\coqdocdefinition{equiv\_path\_sum} \coqdocvar{\_} \coqdocvar{\_}\coqdocnotation{)\^{}-1} \coqdocvar{p}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{induction} \coqdocvar{p}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocemptyline
\end{coqdoccode}
\exerdone{2.9}{104} 
Prove that coproducts have the expected universal property,
\[
  (A + B \to X) \eqvsym (A \to X) \times (B \to X).
\]
Can you generalize this to an equivalence involving dependent functions?


 \soln
To define the ex2\_9\_f map, let $h : A+B \to X$ and define $f : (A+B\to X) \to
(A\to X) \times (B \to X)$ by
\[
  f(h) \defeq (\lam{a}h(\inl(a)), \lam{b}h(\inr(b)))
\]
To show that $f$ is an equivalence, we'll need a quasi-inverse, given by
\[
 g(h) \defeq \rec{A+B}(X, \fst h, \snd h)
\]
As well as the homotopies $\alpha : f\circ g \sim \idfunc{(A\to X)\times(B \to
X)}$ and $\beta : g \circ f \sim \idfunc{A+B\to X}$.  For $\alpha$ we need a
witness to
\begin{align*}
  &\prd{h:(A\to X) \times (B\to X)} (f(g(h)) 
  = \idfunc{(A\to X) \times (B\to X)}(h))
  \\&\equiv
  \prd{h:(A\to X) \times (B\to X)} (
  (\lam{a}\rec{A+B}(X, \fst h, \snd h, \inl(a)),
   \lam{b}\rec{A+B}(X, \fst h, \snd h, \inr(b)))
  = h)
  \\&\equiv
  \prd{h:(A\to X) \times (B\to X)} ((\fst h, \snd h) = h)
\end{align*}
and this is inhabited by $\uppt$.  For $\beta$, we need an inhabitant of
\begin{align*}
  &\prd{h:A+B\to X} (g(f(h)) = \idfunc{A+B\to X}(h))
  \\&\equiv
  \prd{h:A+B\to X} (
  \rec{A+B}(X, \lam{a}h(\inl(a)), \lam{b}h(\inr(b)))
  = h)
\end{align*}
which, assuming function extensionality, is inhabited.  So $(g,
\alpha, \beta)$ is a quasi-inverse to $f$, giving the universal property.
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.ex2 9 f}{ex2\_9\_f}{\coqdocdefinition{ex2\_9\_f}} \{\coqdocvar{A} \coqdocvar{B} \coqdocvar{X} : \coqdockw{Type}\} (\coqdocvar{h} : (\coqdocvariable{A} \coqexternalref{:type scope:x '+' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{+}} \coqdocvariable{B} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{X})) : \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocvariable{A}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}}\coqdocvariable{X}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocvariable{B}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}}\coqdocvariable{X}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}} :=\coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:core scope:'(' x ',' x ',' '..' ',' x ')'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocvariable{h} \coqdocnotation{o} \coqexternalref{inl}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocconstructor{inl}}\coqexternalref{:core scope:'(' x ',' x ',' '..' ',' x ')'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{,}} \coqdocvariable{h} \coqdocnotation{o} \coqexternalref{inr}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocconstructor{inr}}\coqexternalref{:core scope:'(' x ',' x ',' '..' ',' x ')'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.ex2 9 g}{ex2\_9\_g}{\coqdocdefinition{ex2\_9\_g}} \{\coqdocvar{A} \coqdocvar{B} \coqdocvar{X} : \coqdockw{Type}\} (\coqdocvar{h} : \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocvariable{A}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}}\coqdocvariable{X}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocvariable{B}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}}\coqdocvariable{X}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}}) : \coqdocvariable{A} \coqexternalref{:type scope:x '+' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{+}} \coqdocvariable{B} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{X} :=\coqdoceol
\coqdocindent{1.00em}
\coqdockw{fun} \coqdocvar{x} \ensuremath{\Rightarrow} \coqdockw{match} \coqdocvariable{x} \coqdockw{with}\coqdoceol
\coqdocindent{6.50em}
\ensuremath{|} \coqexternalref{inl}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocconstructor{inl}} \coqdocvar{a} \ensuremath{\Rightarrow} (\coqexternalref{fst}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocdefinition{fst}} \coqdocvariable{h}) \coqdocvar{a}\coqdoceol
\coqdocindent{6.50em}
\ensuremath{|} \coqexternalref{inr}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocconstructor{inr}} \coqdocvar{b} \ensuremath{\Rightarrow} (\coqexternalref{snd}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocdefinition{snd}} \coqdocvariable{h}) \coqdocvar{b}\coqdoceol
\coqdocindent{5.50em}
\coqdockw{end}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.ex2 9}{ex2\_9}{\coqdoclemma{ex2\_9}} : \coqdockw{\ensuremath{\forall}} \coqdocvar{A} \coqdocvar{B} \coqdocvar{X}, \coqdocnotation{(}\coqdocvariable{A} \coqexternalref{:type scope:x '+' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{+}} \coqdocvariable{B}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}}\coqdocvariable{X}\coqdocnotation{)} \coqdocnotation{\ensuremath{\eqvsym}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocvariable{A}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}}\coqdocvariable{X}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocvariable{B}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}}\coqdocvariable{X}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros}. \coqdoctac{refine} (\coqdocdefinition{equiv\_adjointify} \coqref{Ch02.ex2 9 f}{\coqdocdefinition{ex2\_9\_f}} \coqref{Ch02.ex2 9 g}{\coqdocdefinition{ex2\_9\_g}} \coqdocvar{\_} \coqdocvar{\_}); \coqdoctac{intro} \coqdocvar{h}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} \coqdocvar{h} \coqdockw{as} (\coqdocvar{x}, \coqdocvar{y}). \coqdoctac{reflexivity}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_forall}. \coqdoctac{intro} \coqdocvar{z}. \coqdoctac{destruct} \coqdocvar{z}; \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Qed}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
All of this generalizes directly to the case of dependent functions. \begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.ex2 9 f'}{ex2\_9\_f'}{\coqdocdefinition{ex2\_9\_f'}} \{\coqdocvar{A} \coqdocvar{B} : \coqdockw{Type}\} \{\coqdocvar{C}: \coqdocvariable{A} \coqexternalref{:type scope:x '+' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{+}} \coqdocvariable{B} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\} (\coqdocvar{h} : \coqdockw{\ensuremath{\forall}} (\coqdocvar{p}:\coqdocvariable{A} \coqexternalref{:type scope:x '+' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{+}} \coqdocvariable{B}), \coqdocvariable{C} \coqdocvariable{p}) \coqdoceol
\coqdocindent{1.00em}
: \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} \coqdocvar{a}:\coqdocvariable{A}, \coqdocvariable{C}(\coqexternalref{inl}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocconstructor{inl}} \coqdocvariable{a})\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} \coqdocvar{b}:\coqdocvariable{B}, \coqdocvariable{C}(\coqexternalref{inr}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocconstructor{inr}} \coqdocvariable{b})\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}} :=\coqdoceol
\coqdocnoindent
\coqexternalref{:core scope:'(' x ',' x ',' '..' ',' x ')'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdockw{fun} \coqdocvar{\_} \ensuremath{\Rightarrow} \coqdocvariable{h} (\coqexternalref{inl}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocconstructor{inl}} \coqdocvar{\_})\coqexternalref{:core scope:'(' x ',' x ',' '..' ',' x ')'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{,}} \coqdockw{fun} \coqdocvar{\_} \ensuremath{\Rightarrow} \coqdocvariable{h} (\coqexternalref{inr}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocconstructor{inr}} \coqdocvar{\_})\coqexternalref{:core scope:'(' x ',' x ',' '..' ',' x ')'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.ex2 9 g'}{ex2\_9\_g'}{\coqdocdefinition{ex2\_9\_g'}} \{\coqdocvar{A} \coqdocvar{B} : \coqdockw{Type}\} \{\coqdocvar{C}: \coqdocvariable{A} \coqexternalref{:type scope:x '+' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{+}} \coqdocvariable{B} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\} \coqdoceol
\coqdocindent{5.50em}
(\coqdocvar{h} : \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} \coqdocvar{a}:\coqdocvariable{A}, \coqdocvariable{C}(\coqexternalref{inl}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocconstructor{inl}} \coqdocvariable{a})\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} \coqdocvar{b}:\coqdocvariable{B}, \coqdocvariable{C}(\coqexternalref{inr}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocconstructor{inr}} \coqdocvariable{b})\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}}) : \coqdoceol
\coqdocindent{1.00em}
\coqdockw{\ensuremath{\forall}} (\coqdocvar{p}:\coqdocvariable{A} \coqexternalref{:type scope:x '+' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{+}} \coqdocvariable{B}), \coqdocvariable{C} \coqdocvariable{p} :=\coqdoceol
\coqdocindent{0.50em}
\coqdockw{fun} \coqdocvar{\_} \ensuremath{\Rightarrow} \coqdockw{match} \coqdocvar{\_} \coqdockw{as} \coqdocvar{s} \coqdockw{return} (\coqdocvariable{C} \coqdocvariable{s}) \coqdockw{with}\coqdoceol
\coqdocindent{6.00em}
\ensuremath{|} \coqexternalref{inl}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocconstructor{inl}} \coqdocvar{a} \ensuremath{\Rightarrow} \coqexternalref{fst}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocdefinition{fst}} \coqdocvariable{h} \coqdocvar{a}\coqdoceol
\coqdocindent{6.00em}
\ensuremath{|} \coqexternalref{inr}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocconstructor{inr}} \coqdocvar{b} \ensuremath{\Rightarrow} \coqexternalref{snd}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocdefinition{snd}} \coqdocvariable{h} \coqdocvar{b}\coqdoceol
\coqdocindent{5.00em}
\coqdockw{end}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.ex2 9'}{ex2\_9'}{\coqdoclemma{ex2\_9'}} : \coqdockw{\ensuremath{\forall}} \coqdocvar{A} \coqdocvar{B} \coqdocvar{C}, \coqdoceol
\coqdocindent{1.00em}
\coqdocnotation{(}\coqdockw{\ensuremath{\forall}} (\coqdocvar{p}:\coqdocvariable{A} \coqexternalref{:type scope:x '+' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{+}} \coqdocvariable{B}), \coqdocvariable{C}(\coqdocvariable{p})\coqdocnotation{)} \coqdocnotation{\ensuremath{\eqvsym}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} \coqdocvar{a}:\coqdocvariable{A}, \coqdocvariable{C}(\coqexternalref{inl}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocconstructor{inl}} \coqdocvariable{a})\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} \coqdocvar{b}:\coqdocvariable{B}, \coqdocvariable{C}(\coqexternalref{inr}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocconstructor{inr}} \coqdocvariable{b})\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_adjointify} \coqref{Ch02.ex2 9 f'}{\coqdocdefinition{ex2\_9\_f'}} \coqref{Ch02.ex2 9 g'}{\coqdocdefinition{ex2\_9\_g'}} \coqdocvar{\_} \coqdocvar{\_}); \coqdoctac{unfold} \coqref{Ch02.ex2 9 f'}{\coqdocdefinition{ex2\_9\_f'}}, \coqref{Ch02.ex2 9 g'}{\coqdocdefinition{ex2\_9\_g'}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro}. \coqdoctac{destruct} \coqdocvar{x}. \coqdoctac{apply} \coqdocdefinition{path\_prod}; \coqdoctac{simpl};\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{unfold} \coqdocdefinition{pointwise\_paths}; \coqdoctac{reflexivity}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro}. \coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{p}. \coqdoctac{destruct} \coqdocvar{p}; \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Qed}.\coqdoceol
\coqdocemptyline
\coqdocemptyline
\coqdocemptyline
\end{coqdoccode}
\exerdone{2.10}{104} 
Prove that $\Sigma$-types are ``associative'', in that for any $A:\UU$ and
families $B : A \to \UU$ and $C : (\sm{x:A} B(x)) \to \UU$, we have
\[
  \left(\sm{x:A}\sm{y:B(x)}C((x, y))\right)
  \eqvsym
  \left(\sm{p:\sm{x:A}B(x)}C(p)\right)
\]


 \soln
The map
\[
  f(a, b, c) \defeq ((a, b), c)
\]
where $a:A$, $b:B(a)$, and $c : C((a, b))$ is an equivalence.  For a
quasi-inverse, we have
\[
  g(p, c) \defeq (\fst p, \snd p, c)
\]
As proof, by induction we can consider the case where $p \equiv (a, b)$.  Then
we have
\[
  f(g((a, b), c))
  =
  f(a, b, c)
  =
  ((a, b), c)
\]
and
\[
  g(f(a, b, c))
  =
  g((a, b), c)
  =
  (a, b, c)
\]
So $f$ is an equivalence.
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.ex2 10 f}{ex2\_10\_f}{\coqdocdefinition{ex2\_10\_f}} \{\coqdocvar{A} : \coqdockw{Type}\} \{\coqdocvar{B} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\} \{\coqdocvar{C} : \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{x}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}}\coqdocvariable{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{B} \coqdocvar{x}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\} : \coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{x}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}}\coqdocvariable{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{y} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{B} \coqdocvar{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{C} \coqdocnotation{(}\coqdocvar{x}\coqdocnotation{;} \coqdocvar{y}\coqdocnotation{)}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}\}}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{p} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{x}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}}\coqdocvariable{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{B} \coqdocvar{x}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{C} \coqdocvar{p}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{abc}. \coqdoctac{destruct} \coqdocvar{abc} \coqdockw{as} [\coqdocvar{a} [\coqdocvar{b} \coqdocvar{c}]]. \coqdoctac{apply} \coqdocnotation{((}\coqdocvar{a}\coqdocnotation{;} \coqdocvar{b}\coqdocnotation{);} \coqdocvar{c}\coqdocnotation{)}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.ex2 10 g}{ex2\_10\_g}{\coqdocdefinition{ex2\_10\_g}} \{\coqdocvar{A} : \coqdockw{Type}\} \{\coqdocvar{B} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\} \{\coqdocvar{C} : \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{x}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}}\coqdocvariable{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{B} \coqdocvar{x}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\} : \coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{p} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{x}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}}\coqdocvariable{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{B} \coqdocvar{x}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{C} \coqdocvar{p}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{x}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}}\coqdocvariable{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{y} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{B} \coqdocvar{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{C} \coqdocnotation{(}\coqdocvar{x}\coqdocnotation{;} \coqdocvar{y}\coqdocnotation{)}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}\}}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{abc}. \coqdoctac{destruct} \coqdocvar{abc} \coqdockw{as} [[\coqdocvar{a} \coqdocvar{b}] \coqdocvar{c}].\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{\ensuremath{\exists}} \coqdocvar{a}; \coqdoctac{\ensuremath{\exists}} \coqdocvar{b}; \coqdoctac{apply} \coqdocvar{c}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.ex2 10}{ex2\_10}{\coqdoclemma{ex2\_10}} : \coqdockw{\ensuremath{\forall}} \coqdocvar{A} \coqdocvar{B} \coqdocvar{C}, \coqdocclass{IsEquiv}(@\coqref{Ch02.ex2 10 f}{\coqdocdefinition{ex2\_10\_f}} \coqdocvariable{A} \coqdocvariable{B} \coqdocvariable{C}).\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{isequiv\_adjointify} \coqref{Ch02.ex2 10 f}{\coqdocdefinition{ex2\_10\_f}} \coqref{Ch02.ex2 10 g}{\coqdocdefinition{ex2\_10\_g}} \coqdocvar{\_} \coqdocvar{\_});\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{unfold} \coqref{Ch02.ex2 10 f}{\coqdocdefinition{ex2\_10\_f}}, \coqref{Ch02.ex2 10 g}{\coqdocdefinition{ex2\_10\_g}}; \coqdoctac{intro} \coqdocvar{abc}; \coqdoceol
\coqdocindent{1.00em}
[ \coqdoctac{destruct} \coqdocvar{abc} \coqdockw{as} [[\coqdocvar{a} \coqdocvar{b}] \coqdocvar{c}] \ensuremath{|} \coqdoctac{destruct} \coqdocvar{abc} \coqdockw{as} [\coqdocvar{a} [\coqdocvar{b} \coqdocvar{c}]]];\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Qed}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
\exerdone{2.11}{104} 
A (homotopy) commutative square
\[
  \xymatrix{
  P \ar[r]^{h} \ar[d]_{k} & A \ar[d]^{f} \\
  B \ar[r]_{g} & C
  }
\]
consists of functions $f$, $g$, $h$, and $k$ as shown, together with a path $f
\circ h = g \circ k$.  Note that this is exactly an element of the pullback $(P
\to A) \times_{P \to C} (P \to B)$ as defined in 2.15.11.  A commutative square
is called a (homotopy) pullback square if for any $X$, the induced map
\[
  (X \to P) \to (X \to A) \times_{X \to C} (X \to B)
\]
is an equivalence.  Prove that the pullback $P \defeq A \times_{C} B$ defined
in 2.15.11 is the corner of a pullback square.


 \soln
I'll start using the usual notation $\proj{n}^{j}$ for the $j$th projection
from an $n$-tuple.  So, for example, $\proj{3}^{2} \defeq \fst \circ \snd$.
To show that $P$ is the corner of a pullback square, we need to produce the
three other corners and show that it is a pullback.  Given $f : A \to C$ and $G
: B \to C$, we define
\[
  P \defeq \sm{a:A}\sm{b:B} (f(a) = g(b))
\]
I claim this is the corner of the following pullback square:
\[
  \xymatrix @R=.5in @C=.5in {
  P \ar[r]^{\proj{3}^{2}} \ar[d]_{\proj{3}^{1}} & B \ar[d]^{g} \\
  A \ar[r]_{f} & C
  }
\]
To show that it's commutative, it suffices to consider an element $(a, b, p)$
of $P$.  We then have
\[
  g(\proj{3}^{2}(a, b, p)) = g(b) = f(a) = f(\proj{3}^{1}(a, b, p))
\]
making the square commutative.


To show that it has the required universal property, we need to construct the
equivalence.  Suppose that $h : X \to P$.  Then we can compose it in either
direction around the square to give
\[
  f \circ \proj{3}^{1} \circ h : X \to C
  \qquad\qquad
  g \circ \proj{3}^{2} \circ h : X \to C
\]
If we can show that these two maps are equal, then we can produce an element of
$(X \to A) \times_{X \to C} (X \to B)$.  And we can, using function
extensionality.  Suppose that $x:X$.  Then $h(x) : P$, which by induction we
can assume is of the form $h(x) \equiv (a, b, p)$, with $p : f(a) = g(b)$.
This means that
\[
 f(\proj{3}^{1}(h(x))) \equiv f(\proj{3}^{1}(a, b, p)) \equiv f(a)
\]
and
\[
  g(\proj{3}^{2}(a, b, c)) \equiv g(b)
\]
and $p$ proves that these are equal.  So by function extensionality,
\[
  f \circ \proj{3}^{1} \circ h = g \circ \proj{3}^{2} \circ h
\]
meaning that we can define
\[
  h \mapsto (\proj{3}^{1} \circ h, \proj{3}^{2} \circ h, \funext(\proj{3}^{3}
  \circ h))
\]
giving the forward map $(X \to P) \to (X \to A) \times_{X \to C} (X \to B)$.


We now need to exhibit a quasi-inverse.  Suppose that $h' : (X \to A)
\times_{X \to C} (X \to B)$.  By induction, we may assume that $h' = (h_{A},
h_{B}, q)$, where $q : f \circ h_{A} = g \circ h_{B}$.  We want to construct a
function $X \to P$, so suppose that $x:X$.  Then we can construct an element of
$P$ like so:
\[
  h(x) \defeq (h_{A}(x), h_{B}(x), \happly(q)(x))
\]
Note that this expression is well-typed, since $h_{A}(x) : A$, $h_{B}(x) : B$,
and $\happly(q)(x) : f(h_{A}(x)) = g(h_{B}(x))$.


In order to show that this is a quasi-inverse, we need to show that the two
possible compositions are homotopic to the identity.  Suppose that $h : X \to
P$; then applying the forward and backward constructions gives
\[
  (x \mapsto (\proj{3}^{1}(h(x)), \proj{3}^{2}(h(x)),
  \happly(\funext(\proj{3}^{3} \circ h))(x)))
  \equiv
  (x \mapsto (\proj{3}^{1}(h(x)), \proj{3}^{2}(h(x)), \proj{3}^{3}(h(x))))
\]
which by function extensionality is clearly equal to $h$.


For the other direction, suppose that $h' : (X \to A) \times_{X \to C} (X \to
B)$, which by induction we may suppose is of the form $(h_{A}, h_{B}, p)$.
Going back and forth gives
\begin{align*}
  &\left(
    \proj{3}^{1} \circ (x \mapsto (h_{A}(x), h_{B}(x), \happly(p)(x))),
    \right.\\&\phantom{---}\left.
    \proj{3}^{2} \circ (x \mapsto (h_{A}(x), h_{B}(x), \happly(p)(x))),
    \right.\\&\phantom{---}\left.
    \funext(\proj{3}^{3} \circ (x \mapsto (h_{A}(x), h_{B}(x), \happly(p)(x))))
  \right)
\end{align*}
applying function extensionality again results in
\[
  (h_{A}, h_{B}, \funext(\happly(p)))
  \equiv
  (h_{A}, h_{B}, p)
\]
So we have an equivalence.
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Section} \coqdef{Ch02.Exercise2 11}{Exercise2\_11}{\coqdocsection{Exercise2\_11}}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Variables} (\coqdef{Ch02.Exercise2 11.A}{A}{\coqdocvariable{A}} \coqdef{Ch02.Exercise2 11.B}{B}{\coqdocvariable{B}} \coqdef{Ch02.Exercise2 11.C}{C}{\coqdocvariable{C}} \coqdef{Ch02.Exercise2 11.X}{X}{\coqdocvariable{X}} : \coqdockw{Type}) (\coqdef{Ch02.Exercise2 11.f}{f}{\coqdocvariable{f}}: \coqdocvar{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvar{C}) (\coqdef{Ch02.Exercise2 11.g}{g}{\coqdocvariable{g}}: \coqdocvar{B} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvar{C}).\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.P}{P}{\coqdocdefinition{P}} := \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{a}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}}\coqdocvariable{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{b}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}}\coqdocvariable{B} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{f} \coqdocvar{a} \coqdocnotation{=} \coqdocvariable{g} \coqdocvar{b}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}\}}}.\coqdoceol
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.funpull}{funpull}{\coqdocdefinition{funpull}} := \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{h}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}}\coqdocvariable{X}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}}\coqdocvariable{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{k}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}}\coqdocvariable{X}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}}\coqdocvariable{B} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{f} \coqdocnotation{o} \coqdocvar{h} \coqdocnotation{=} \coqdocvariable{g} \coqdocnotation{o} \coqdocvar{k}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}\}}}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.pi1}{pi1}{\coqdocdefinition{pi1}} (\coqdocvar{p} : \coqref{Ch02.P}{\coqdocdefinition{P}}) : \coqdocvariable{A} := \coqdocvariable{p}\coqdocnotation{.1}.\coqdoceol
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.pi2}{pi2}{\coqdocdefinition{pi2}} (\coqdocvar{p} : \coqref{Ch02.P}{\coqdocdefinition{P}}) : \coqdocvariable{B} := \coqdocvariable{p}\coqdocnotation{.2}\coqdocnotation{.1}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.ex2 11 f}{ex2\_11\_f}{\coqdocdefinition{ex2\_11\_f}} `\{\coqdocclass{Funext}\} : \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqref{Ch02.P}{\coqdocdefinition{P}}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqref{Ch02.funpull}{\coqdocdefinition{funpull}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{h}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} \coqdocnotation{(}\coqref{Ch02.pi1}{\coqdocdefinition{pi1}} \coqdocnotation{o} \coqdocvar{h}\coqdocnotation{;} \coqdocnotation{(}\coqref{Ch02.pi2}{\coqdocdefinition{pi2}} \coqdocnotation{o} \coqdocvar{h}\coqdocnotation{;} \coqdocvar{\_}\coqdocnotation{))}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{exact} \coqdocnotation{(}\coqdocvar{h} \coqdocvar{x}\coqdocnotation{).2.2}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.ex2 11 g}{ex2\_11\_g}{\coqdocdefinition{ex2\_11\_g}} : \coqref{Ch02.funpull}{\coqdocdefinition{funpull}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqref{Ch02.P}{\coqdocdefinition{P}}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros} \coqdocvar{h} \coqdocvar{x}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} \coqdocnotation{(}\coqdocvar{h}\coqdocnotation{.1} \coqdocvar{x}\coqdocnotation{;} \coqdocnotation{(}\coqdocvar{h}\coqdocnotation{.2}\coqdocnotation{.1} \coqdocvar{x}\coqdocnotation{;} \coqdocvar{\_}\coqdocnotation{))}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{exact} (\coqdocdefinition{apD10} \coqdocvar{h}\coqdocnotation{.2.2} \coqdocvar{x}).\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.ex2 11}{ex2\_11}{\coqdoclemma{ex2\_11}} `\{\coqdocclass{Funext}\} : \coqdocnotation{(}\coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqref{Ch02.P}{\coqdocdefinition{P}}\coqdocnotation{)} \coqdocnotation{\ensuremath{\eqvsym}} \coqref{Ch02.funpull}{\coqdocdefinition{funpull}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_adjointify} \coqref{Ch02.ex2 11 f}{\coqdocdefinition{ex2\_11\_f}} \coqref{Ch02.ex2 11 g}{\coqdocdefinition{ex2\_11\_g}} \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\begin{coqdoccomment}
\coqdocindent{0.50em}
alpha\coqdocindent{0.50em}
\end{coqdoccomment}
\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{unfold} \coqdocdefinition{Sect}, \coqref{Ch02.ex2 11 g}{\coqdocdefinition{ex2\_11\_g}}, \coqref{Ch02.ex2 11 f}{\coqdocdefinition{ex2\_11\_f}}, \coqdocdefinition{path\_forall}; \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} 0 \coqdockw{as} [\coqdocvar{f'} [\coqdocvar{g'} \coqdocvar{p}]]; \coqdoctac{simpl}. \coqdocvar{f\_ap}. \coqdocvar{f\_ap}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocnotation{(}\coqdocdefinition{ap} \coqdocdefinition{apD10}\coqdocnotation{)\^{}-1}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocmethod{eisretr}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\begin{coqdoccomment}
\coqdocindent{0.50em}
beta\coqdocindent{0.50em}
\end{coqdoccomment}
\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{unfold} \coqdocdefinition{Sect}, \coqref{Ch02.ex2 11 g}{\coqdocdefinition{ex2\_11\_g}}, \coqref{Ch02.ex2 11 f}{\coqdocdefinition{ex2\_11\_f}}, \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{h}; \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{x}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{repeat} (\coqdoctac{apply} \coqdocdefinition{path\_sigma\_uncurried}; \coqdoctac{\ensuremath{\exists}} \coqdocconstructor{idpath}; \coqdoctac{simpl}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} \coqdocnotation{(}\coqdocvar{h} \coqdocvar{x}\coqdocnotation{).2.2} \coqdockw{with} ((\coqdockw{fun} \coqdocvar{x'} \ensuremath{\Rightarrow} \coqdocnotation{(}\coqdocvar{h} \coqdocvariable{x'}\coqdocnotation{).2.2}) \coqdocvar{x}); \coqdocvar{f\_ap}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocmethod{eisretr}.\coqdoceol
\coqdocnoindent
\coqdockw{Qed}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{End} \coqref{Ch02.Exercise2 11}{\coqdocsection{Exercise2\_11}}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
\exer{2.12}{104} 
Suppose given two commutative squares
\[\xymatrix{
  A \ar[r] \ar[d] & C \ar[r] \ar[d] & E \ar[d] \\
  B \ar[r] & D \ar[r] & F
}\]
and suppose that the right-hand square is a pullback square.  Prove that the
left-hand square is a pullback square if and only if the outer rectangle is a
pullback square.


 \soln
Label the arrows
\[\xymatrix{
  A \ar[r] \ar[d] & C \ar[r] \ar[d] & E \ar[d]^{f} \\
  B \ar[r]_{h} & D \ar[r]_{g} & F
}\]
and suppose that the right square is a pullback.  That is, for all $X$ there is
an equivalence
\[
  e : \eqv{(X \to C)}{(X \to D) \times_{X \to F} (X \to E)}
\]
There are two obvious maps
\begin{align*}
  (X \to A) &\to (X \to B) \times_{X \to D} (X \to C) \\
  (X \to A) &\to (X \to B) \times_{X \to F} (X \to E)
\end{align*}
and we want to show that the first is an equivalence iff the second is.  To do
this, we show that 
\[
  \eqv{
    (X \to B) \times_{X \to D} (X \to C)
  }{
    (X \to B) \times_{X \to F} (X \to E)
  }
\]
and then use the fact that $\eqvsym$ is an equivalence relation.


So suppose that $k : (X \to B) \times_{X \to D} (X \to C)$.  We can construct
two maps of the correct signature by composition:
\[
  \left(\proj{3}^{1}(k), \proj{3}^{2}(e(\proj{3}^{2}(k))), -\right)
  :
  (X \to B) \times_{X \to F} (X \to E)
\]
So we just need a proof that these commute correctly.  We have
\begin{align*}
  \proj{3}^{3}(e(\proj{3}^{2}(k))) &: 
    f \circ g^{*}f \circ \proj{3}^{2}(k)
    =
    g \circ f^{*}g \circ \proj{3}^{2}(k)
    \\
  \proj{3}^{3}(k) &:
  h \circ \proj{3}^{1}(k)
  =
  f^{*}g \circ \proj{3}^{2}(k)
\end{align*}
which we can straightforwardly combine to obtain the desired equality:
\[
  \proj{3}^{3}(e(\proj{3}^{2}(k))) \ct \mapfunc{g \circ
  -}(\proj{3}^{3}(k))^{-1}
  :
  f \circ g^{*}f \circ \proj{3}^{2}(k)
  =
  g \circ h \circ \proj{3}^{1}(k)
\]                              
giving us a forward map
\[
\phi : k \mapsto
  \left(\proj{3}^{1}(k), \proj{3}^{2}(e(\proj{3}^{2}(k))), 
  \proj{3}^{3}(e(\proj{3}^{2}(k))) \ct \mapfunc{g \circ
  -}(\proj{3}^{3}(k))^{-1}
  \right)
\]


To go the other way, suppose that $k : (X \to B) \times_{X \to F} (X \to E)$.
As before, the first entry of our output will just be $\proj{3}^{1}(k)$ again.
The second we'll have to build using $e^{-1}$:
\[
  e^{-1}\left(h \circ \proj{3}^{1}(k), \proj{3}^{2}(k), \proj{3}^{3}(k)\right)
  :
  X \to C
\]
And now we must prove that we have the needed commutation relation:
\[
  h \circ \proj{3}^{1}(k) = f^{*}g \circ e^{-1}\left(h \circ \proj{3}^{1}(k), \proj{3}^{2}(k), \proj{3}^{3}(k)\right)
\]
note that by definition of $e$, this is judgementally equivalent to
\[
  h \circ \proj{3}^{1}(k) = \proj{3}^{1}\left(e\left(e^{-1}\left(h \circ
  \proj{3}^{1}(k), \proj{3}^{2}(k), \proj{3}^{3}(k)\right) \right)\right)
\]
which, since $\alpha : e \circ e^{-1} \sim \idfunc{}$, is equal to
\[
  h \circ \proj{3}^{1}(k) = \proj{3}^{1}\left(h \circ
  \proj{3}^{1}(k), \proj{3}^{2}(k), \proj{3}^{3}(k)\right)
\]
a definitional equality.  So our backward map is
\[
  \phi^{-1} : k \mapsto
  \left(\proj{3}^{1}(k),
  e^{-1}\left(h \circ
  \proj{3}^{1}(k), \proj{3}^{2}(k), \proj{3}^{3}(k)\right),
  \mapfunc{\proj{3}^{1}}\alpha^{-1}
  \right)
\]


To show that these are quasi-inverses, suppose that $k : (X \to B) \times_{X
\to F} (X \to E)$, which we may assume is of the form $(k_{1}, k_{2}, p)$.
Then
\[
  \phi(\phi^{-1}(k))
  \equiv
  \left(
    k_{1},
    \proj{3}^{2}\left(e\left(e^{-1}\left(h \circ k_{1}, k_{2},
    p\right)\right)\right),
  \proj{3}^{3}\left(e\left(e^{-1}\left(h \circ k_{1}, k_{2}, p\right)\right)\right) \ct \mapfunc{g \circ
  -}\left(\mapfunc{\proj{3}^{1}}\alpha^{-1}\right)^{-1}
  \right)
\]
Which, since $e$ is an equivalence and by the way $\mapfunc{}$ interacts with
inverses, is equal (up to homotopy) to
\[
  \phi(\phi^{-1}(k))
  =
  \left(
    k_{1},
    k_{2},
    p \ct \mapfunc{g \circ
  -}\mapfunc{\proj{3}^{1}}\alpha
  \right)
\]
But $\mapfunc{g \circ -}\mapfunc{\proj{3}^{1}}\alpha$ is equal to reflexivity,
up to the inverse of the former homotopy.  So we have
\[
  \phi(\phi^{-1}(k)) = k
\]
by the universal property of $\Sigma$ types.


For the other direction, suppose that $k : (X \to B) \times_{X \to D} (X \to
C)$, which we may assume is of the form $(k_{1}, k_{2}, p)$.  Then
\[
  \phi^{-1}(\phi(k))
  \equiv
  \left(
    k_{1}, 
    e^{-1}\left(h \circ k_{1}, \proj{3}^{2}(e(k_{2})), 
    \proj{3}^{3}(e(k_{2})) \ct \mapfunc{g\circ-}p^{-1}
    \right),
    \mapfunc{\proj{3}^{1}}\alpha^{-1}
  \right)
\]
which, by definition of $e$, reduces to
\[
  \phi^{-1}(\phi(k))
  \equiv
  \left(
    k_{1}, 
    e^{-1}\left(h \circ k_{1}, f^{*}g \circ k_{2}, 
    \proj{3}^{3}(e(k_{2})) \ct \mapfunc{g\circ-}p^{-1}
    \right),
    \mapfunc{\proj{3}^{1}}\alpha^{-1}
  \right)
\]
Now, by $p$, we have $h \circ k_{1} = g^{*}f \circ k_{2}$, so the second term
may be written
\[
  \phi^{-1}(\phi(k))
  =
  \left(
    k_{1}, 
    e^{-1}(e(k_{2})),
    \mapfunc{\proj{3}^{1}}\alpha^{-1}
  \right)
\]
and since $e$ is an equivalence we have up to homotopy
\[
  \phi^{-1}(\phi(k))
  \equiv
  \left(
    k_{1}, 
    k_{2},
    \mapfunc{\proj{3}^{1}}\alpha^{-1}
  \right)
\]
which by a similar argument as the previous case gives $\phi^{-1}(\phi(k)) =
k$.  In neither case is the argument particularly convincing.  That's what Coq
is for, I guess.
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Section} \coqdef{Ch02.Exercise2 12}{Exercise2\_12}{\coqdocsection{Exercise2\_12}}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Context} \{\coqdocvar{A} \coqdocvar{B} \coqdocvar{C} \coqdocvar{D} \coqdocvar{E} \coqdocvar{F} \coqdocvar{X} : \coqdockw{Type}\} (\coqdocvar{f} : \coqdocvariable{E} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{F}) (\coqdocvar{g} : \coqdocvariable{D} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{F}) (\coqdocvar{h} : \coqdocvariable{B} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{D})\coqdoceol
\coqdocindent{4.00em}
(\coqdocvar{gsf} : \coqdocvariable{C} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{D}) (\coqdocvar{fsg} : \coqdocvariable{C} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{E}) (\coqdocvar{r} : \coqdocvariable{g} \coqdocnotation{o} \coqdocvariable{gsf} \coqdocnotation{=} \coqdocvariable{f} \coqdocnotation{o} \coqdocvariable{fsg}).\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.e}{e}{\coqdocdefinition{e}} : \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{C}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{a} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{D} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{b} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{E} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{g} \coqdocnotation{o} \coqdocvar{a} \coqdocnotation{=} \coqdocvariable{f} \coqdocnotation{o} \coqdocvar{b}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}\}}}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{k}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{\ensuremath{\exists}} (\coqdocvariable{gsf} \coqdocnotation{o} \coqdocvar{k}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{\ensuremath{\exists}} (\coqdocvariable{fsg} \coqdocnotation{o} \coqdocvar{k}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} ((\coqdocdefinition{ap} (\coqdockw{fun} \coqdocvar{z} \ensuremath{\Rightarrow} \coqdocvariable{z} \coqdocnotation{o} \coqdocvar{k}) \coqdocvariable{r})).\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Hypothesis} \coqdef{Ch02.Exercise2 12.isequiv e}{isequiv\_e}{\coqdocvariable{isequiv\_e}} : \coqdocclass{IsEquiv} \coqref{Ch02.e}{\coqdocdefinition{e}}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.left to outer}{left\_to\_outer}{\coqdocdefinition{left\_to\_outer}} : \coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{a} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{b} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{C} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{h} \coqdocnotation{o} \coqdocvar{a} \coqdocnotation{=} \coqdocvariable{gsf} \coqdocnotation{o} \coqdocvar{b}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}\}}}\coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{a} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{b} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{E} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{g} \coqdocnotation{o} \coqdocvariable{h} \coqdocnotation{o} \coqdocvar{a} \coqdocnotation{=} \coqdocvariable{f} \coqdocnotation{o} \coqdocvar{b}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}\}}}\coqdoceol
\coqdocindent{1.00em}
:= \coqdockw{fun} \coqdocvar{k} \ensuremath{\Rightarrow}\coqdoceol
\coqdocindent{3.50em}
\coqdocnotation{(}\coqdocvariable{k}\coqdocnotation{.1}\coqdocnotation{;} \coqdocnotation{(}\coqdocnotation{(}\coqref{Ch02.e}{\coqdocdefinition{e}} \coqdocvariable{k}\coqdocnotation{.2}\coqdocnotation{.1}\coqdocnotation{).2}\coqdocnotation{.1}\coqdocnotation{;} \coqdocnotation{(}\coqdocdefinition{ap} (\coqdocdefinition{compose} \coqdocvariable{g}) \coqdocvariable{k}\coqdocnotation{.2.2}\coqdocnotation{)} \coqdocnotation{@} \coqdocnotation{(}\coqref{Ch02.e}{\coqdocdefinition{e}} \coqdocvariable{k}\coqdocnotation{.2}\coqdocnotation{.1}\coqdocnotation{).2.2}\coqdocnotation{))}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.outer to left}{outer\_to\_left}{\coqdocdefinition{outer\_to\_left}} :\coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{a} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{b} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{E} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{g} \coqdocnotation{o} \coqdocvariable{h} \coqdocnotation{o} \coqdocvar{a} \coqdocnotation{=} \coqdocvariable{f} \coqdocnotation{o} \coqdocvar{b}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}\}}}\coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{a} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{b} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{C} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{h} \coqdocnotation{o} \coqdocvar{a} \coqdocnotation{=} \coqdocvariable{gsf} \coqdocnotation{o} \coqdocvar{b}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}\}}}\coqdoceol
\coqdocindent{1.00em}
:= \coqdockw{fun} \coqdocvar{k} \ensuremath{\Rightarrow}\coqdoceol
\coqdocindent{3.50em}
\coqdocnotation{(}\coqdocvariable{k}\coqdocnotation{.1}\coqdocnotation{;} \coqdocnotation{(}\coqref{Ch02.e}{\coqdocdefinition{e}}\coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{(}\coqdocvariable{h} \coqdocnotation{o} \coqdocvariable{k}\coqdocnotation{.1}\coqdocnotation{;} \coqdocvariable{k}\coqdocnotation{.2}\coqdocnotation{);} \coqdocdefinition{ap} \coqdocabbreviation{pr1} \coqdocnotation{(}\coqdocmethod{eisretr} \coqref{Ch02.e}{\coqdocdefinition{e}} \coqdocnotation{(}\coqdocvariable{h} \coqdocnotation{o} \coqdocvariable{k}\coqdocnotation{.1}\coqdocnotation{;} \coqdocvariable{k}\coqdocnotation{.2}\coqdocnotation{)}\coqdocnotation{)\^{}}\coqdocnotation{))}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.left equiv outer}{left\_equiv\_outer}{\coqdoclemma{left\_equiv\_outer}} :\coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{a} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{b} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{C} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{h} \coqdocnotation{o} \coqdocvar{a} \coqdocnotation{=} \coqdocvariable{gsf} \coqdocnotation{o} \coqdocvar{b}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}\}}}\coqdoceol
\coqdocindent{1.00em}
\coqdocnotation{\ensuremath{\eqvsym}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{a} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{b} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{E} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{g} \coqdocnotation{o} \coqdocvariable{h} \coqdocnotation{o} \coqdocvar{a} \coqdocnotation{=} \coqdocvariable{f} \coqdocnotation{o} \coqdocvar{b}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}\}}}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_adjointify} \coqref{Ch02.left to outer}{\coqdocdefinition{left\_to\_outer}} \coqref{Ch02.outer to left}{\coqdocdefinition{outer\_to\_left}} \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{k}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_sigma\_uncurried}. \coqdoctac{\ensuremath{\exists}} 1.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_sigma\_uncurried}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdocvar{transparent} \coqdoctac{assert} (\coqdocvar{H} : (\coqdoceol
\coqdocindent{2.00em}
\coqdocvariable{fsg} \coqdocnotation{o} \coqref{Ch02.e}{\coqdocdefinition{e}}\coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{(}\coqdocvariable{h} \coqdocnotation{o} \coqdocvar{k}\coqdocnotation{.1}\coqdocnotation{;} \coqdocvar{k}\coqdocnotation{.2}\coqdocnotation{)} \coqdocnotation{=} \coqdocnotation{(}\coqdocvar{k}\coqdocnotation{.2}\coqdocnotation{).1}\coqdoceol
\coqdocindent{1.00em}
)).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} (\coqdocvariable{fsg} \coqdocnotation{o} \coqref{Ch02.e}{\coqdocdefinition{e}}\coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{(}\coqdocvariable{h} \coqdocnotation{o} \coqdocvar{k}\coqdocnotation{.1}\coqdocnotation{;} \coqdocvar{k}\coqdocnotation{.2}\coqdocnotation{)})\coqdoceol
\coqdocindent{4.50em}
\coqdockw{with} \coqdocnotation{(}\coqref{Ch02.e}{\coqdocdefinition{e}} (\coqref{Ch02.e}{\coqdocdefinition{e}}\coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{(}\coqdocvariable{h} \coqdocnotation{o} \coqdocvar{k}\coqdocnotation{.1}\coqdocnotation{;} \coqdocvar{k}\coqdocnotation{.2}\coqdocnotation{)})\coqdocnotation{).2}\coqdocnotation{.1}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} \coqdocvar{k}\coqdocnotation{.2}\coqdocnotation{.1} \coqdockw{with} (\coqdocabbreviation{pr1} (@\coqdocabbreviation{pr2} (\coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{D}) \coqdoceol
\coqdocindent{14.00em}
(\coqdockw{fun} \coqdocvar{a} \ensuremath{\Rightarrow} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{b} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{E} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{g} \coqdocnotation{o} \coqdocvariable{a} \coqdocnotation{=} \coqdocvariable{f} \coqdocnotation{o} \coqdocvar{b}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}})\coqdoceol
\coqdocindent{14.00em}
\coqdocnotation{(}\coqdocvariable{h} \coqdocnotation{o} \coqdocvar{k}\coqdocnotation{.1}\coqdocnotation{;} \coqdocvar{k}\coqdocnotation{.2}\coqdocnotation{)})).\coqdoceol
\coqdocindent{1.00em}
\coqdocvar{transparent} \coqdoctac{assert} (\coqdocvar{H'} : (\coqref{Ch02.e}{\coqdocdefinition{e}} (\coqref{Ch02.e}{\coqdocdefinition{e}}\coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{(}\coqdocvariable{h} \coqdocnotation{o} \coqdocvar{k}\coqdocnotation{.1}\coqdocnotation{;} \coqdocvar{k}\coqdocnotation{.2}\coqdocnotation{)}) \coqdocnotation{=} \coqdocnotation{(}\coqdocvariable{h} \coqdocnotation{o} \coqdocvar{k}\coqdocnotation{.1}\coqdocnotation{;} \coqdocvar{k}\coqdocnotation{.2}\coqdocnotation{)})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocmethod{eisretr}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} \coqdocvar{H'}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{\ensuremath{\exists}} \coqdocvar{H}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{simpl} \coqdoctac{in} \coqdocvar{H}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocnotation{(}\coqdocdefinition{transport\_paths\_Fr} \coqdocvar{\_} \coqdocvar{\_}\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{moveR\_pM}. \coqdoctac{apply} \coqdocdefinition{moveR\_pM}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{transitivity} (\coqdocdefinition{ap} (\coqdocdefinition{compose} \coqdocvariable{g}) \coqdocnotation{(}\coqdocdefinition{ap} \coqdocabbreviation{pr1} (\coqdocmethod{eisretr} \coqref{Ch02.e}{\coqdocdefinition{e}} \coqdocnotation{(}\coqdocvariable{h} \coqdocnotation{o} \coqdocvar{k}\coqdocnotation{.1}\coqdocnotation{;} \coqdocvar{k}\coqdocnotation{.2}\coqdocnotation{)})\coqdocnotation{)\^{}}).\coqdoceol
\coqdocindent{1.00em}
\coqdocvar{f\_ap}. \coqdoctac{apply} (\coqdocdefinition{ap\_V} \coqdocabbreviation{pr1} (\coqdocmethod{eisretr} \coqref{Ch02.e}{\coqdocdefinition{e}} \coqdocnotation{(}\coqdocvariable{h} \coqdocnotation{o} \coqdocvar{k}\coqdocnotation{.1}\coqdocnotation{;} \coqdocvar{k}\coqdocnotation{.2}\coqdocnotation{)})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocnotation{(}\coqdocdefinition{ap\_V} (\coqdocdefinition{compose} \coqdocvariable{g}) \coqdocvar{\_}\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdocvar{admit}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\begin{coqdoccomment}
\coqdocindent{0.50em}
outer\_to\_left\coqdocindent{0.50em}
o\coqdocindent{0.50em}
left\_to\_outer\coqdocindent{0.50em}
==\coqdocindent{0.50em}
id\coqdocindent{0.50em}
\end{coqdoccomment}
\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{k}. \coqdoctac{destruct} \coqdocvar{k} \coqdockw{as} [\coqdocvar{k1} [\coqdocvar{k2} \coqdocvar{p}]].\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_sigma\_uncurried}. \coqdoctac{\ensuremath{\exists}} 1. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_sigma\_uncurried}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdocvar{transparent} \coqdoctac{assert} (\coqdocvar{H} : (\coqdoceol
\coqdocindent{2.00em}
\coqref{Ch02.e}{\coqdocdefinition{e}}\coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{(}\coqdocvariable{h} \coqdocnotation{o} \coqdocvar{k1}\coqdocnotation{;} \coqdocnotation{(}\coqdocvariable{fsg} \coqdocnotation{o} \coqdocvar{k2}\coqdocnotation{;} \coqdoceol
\coqdocindent{9.50em}
\coqdocdefinition{ap} (\coqdocdefinition{compose} \coqdocvariable{g}) \coqdocvar{p} \coqdocnotation{@} \coqdocdefinition{ap} (\coqdockw{fun} \coqdocvar{z} : \coqdocvariable{C} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{F} \ensuremath{\Rightarrow} \coqdocvariable{z} \coqdocnotation{o} \coqdocvar{k2}) \coqdocvariable{r}\coqdocnotation{))} \coqdoceol
\coqdocindent{2.00em}
\coqdocnotation{=} \coqdocvar{k2}\coqdoceol
\coqdocindent{1.00em}
)).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocnotation{(}\coqdocdefinition{ap} \coqref{Ch02.e}{\coqdocdefinition{e}}\coqdocnotation{)\^{}-1}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocnotation{(}\coqdocmethod{eisretr} \coqref{Ch02.e}{\coqdocdefinition{e}} \coqdocvar{\_}\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}). \coqdoctac{unfold} \coqref{Ch02.e}{\coqdocdefinition{e}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_sigma\_uncurried}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{\ensuremath{\exists}} \coqdocvar{p}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_sigma\_uncurried}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdocvar{admit}. \coqdocvar{admit}.\coqdoceol
\coqdocnoindent
\coqdocvar{Admitted}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{End} \coqref{Ch02.Exercise2 12}{\coqdocsection{Exercise2\_12}}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
\exerdone{2.13}{104} 
Show that $(\bool \eqvsym \bool) \eqvsym \bool$.


 \soln
The result essentially says that $\bool$ is equivalent to itself in two ways:
the identity provides one equivalence, and negation gives the other.  So we
first define these.  $\idfunc{\bool}$ is its own quasi-inverse; we have
$\idfunc{\bool} \circ \idfunc{\bool} \equiv \idfunc{\bool}$, so $\idfunc{\bool}
\circ \idfunc{\bool}
\sim \idfunc{\bool}$ easily.  $\lnot$ is also its own quasi-inverse, since for
any $x$, $\lnot\lnot x = x$.


To show the result, we need to map $\idfunc{\bool}$ and $\lnot$ onto $\bool$ is
a quasi-invertible way.  But we need to define this map on all of $\bool
\eqvsym \bool$.  So for any $h : \bool\eqvsym\bool$, let $f(h) = h(0_{\bool})$,
and define $g : \bool \to (\bool \eqvsym \bool)$ by
\[
  g(0_{\bool}) = \idfunc{\bool} 
  \qquad\qquad
  g(1_{\bool}) = \lnot
\]


To show that these are quasi-inverses,
note first that whatever else is the case, an equivalence
$\bool \eqvsym \bool$ can't be a constant function, which we can prove by a case
analysis.  Each of $f(0_{\bool})$ and $f(1_{\bool})$ is in $\bool$, so it is
either $0_{\bool}$ or $1_{\bool}$.  So we have the cases:



\begin{itemize}
\item  $f(0_{\bool}) = f(1_{\bool})$, in which case we can apply $f^{-1}$ to either side to get a contradiction, or

\item  $f(0_{\bool}) = \lnot f(1_{\bool})$. In which case we have the result

\end{itemize}
Showing that $f \circ g \sim \idfunc{\bool}$ is easy, since we can do it by
cases.  We have
\begin{align*}
  f(g(0_{\bool})) &= f(\idfunc{\bool}) = \idfunc{\bool}(0_{\bool}) = 0_{\bool}
  \\
  f(g(1_{\bool})) &= f(\lnot) = \lnot 0_{\bool} = 1_{\bool}
\end{align*}
For the other direction, suppose that $h : \bool \eqvsym \bool$ and that
function extensionality holds.
$h(0_{\bool})$ is either $0_{\bool}$ or $1_{\bool}$.  If the first, then
because $h$ isn't constant we have $h(1_{\bool}) = \lnot h(0_{\bool}) =
1_{\bool}$, hence $h = \idfunc{\bool}$.  Furthermore,
\[
  g(f(h)) = g(h(0_{\bool})) = g(0_{\bool}) = \idfunc{\bool} = h
\]
The same argument works for the other case.  So $f$ is an equivalence, and
$(\bool \eqvsym \bool) \eqvsym \bool$.


\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Lemma} \coqdef{Ch02.id isequiv}{id\_isequiv}{\coqdoclemma{id\_isequiv}} : \coqdocinductive{Bool} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocinductive{Bool}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_adjointify} \coqdocabbreviation{idmap} \coqdocabbreviation{idmap} (\coqdockw{fun} \coqdocvar{\_} \ensuremath{\Rightarrow} 1) (\coqdockw{fun} \coqdocvar{\_} \ensuremath{\Rightarrow} 1)).\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Lemma} \coqdef{Ch02.negb isequiv}{negb\_isequiv}{\coqdoclemma{negb\_isequiv}} : \coqdocinductive{Bool} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocinductive{Bool}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_adjointify} \coqdocdefinition{negb} \coqdocdefinition{negb} \coqdocvar{\_} \coqdocvar{\_});\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro}; \coqdoctac{destruct} \coqdocvar{x}; \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.ex2 13 f}{ex2\_13\_f}{\coqdocdefinition{ex2\_13\_f}} (\coqdocvar{x} : \coqdocinductive{Bool} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocinductive{Bool}) : \coqdocinductive{Bool} := \coqdocvariable{x} \coqdocconstructor{false}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.ex2 13 g}{ex2\_13\_g}{\coqdocdefinition{ex2\_13\_g}} (\coqdocvar{b} : \coqdocinductive{Bool}) : (\coqdocinductive{Bool} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocinductive{Bool}) :=\coqdoceol
\coqdocindent{1.00em}
\coqdockw{if} \coqdocvariable{b}\coqdoceol
\coqdocindent{1.00em}
\coqdockw{then} \{| \coqdocconstructor{equiv\_fun} \coqdocconstructor{:=} \coqdocconstructor{negb} |\}\coqdoceol
\coqdocindent{1.00em}
\coqdockw{else} \{| \coqdocconstructor{equiv\_fun} \coqdocconstructor{:=} \coqdocconstructor{idmap} |\}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Lemma} \coqdef{Ch02.equiv not const}{equiv\_not\_const}{\coqdoclemma{equiv\_not\_const}} (\coqdocvar{f} : \coqdocinductive{Bool} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocinductive{Bool}) `\{\coqdocclass{IsEquiv} \coqdocinductive{Bool} \coqdocinductive{Bool} \coqdocvariable{f}\} : \coqdoceol
\coqdocindent{1.00em}
\coqdocvariable{f} \coqdocconstructor{false} \coqdocnotation{=} \coqdocdefinition{negb} (\coqdocvariable{f} \coqdocconstructor{true}).\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{pose} \coqdocvar{proof} (\coqdocmethod{eissect} \coqdocvar{f} \coqdocconstructor{true}) \coqdockw{as} \coqdocvar{H1}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{pose} \coqdocvar{proof} (\coqdocmethod{eissect} \coqdocvar{f} \coqdocconstructor{false}) \coqdockw{as} \coqdocvar{H2}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} (\coqdocvar{f} \coqdocconstructor{true}), (\coqdocvar{f} \coqdocconstructor{false});\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{try} (\coqdocvar{etransitivity}; \coqdoctac{try} (\coqdocvar{eassumption} || (\coqdoctac{symmetry}; \coqdocvar{eassumption})));\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{try} (\coqdoctac{simpl}; \coqdoctac{reflexivity}).\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.negb involutive}{negb\_involutive}{\coqdoclemma{negb\_involutive}} : \coqdockw{\ensuremath{\forall}} \coqdocvar{b}, \coqdocdefinition{negb} (\coqdocdefinition{negb} \coqdocvariable{b}) \coqdocnotation{=} \coqdocvariable{b}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}. \coqdoctac{destruct} \coqdocvar{b}; \coqdoctac{reflexivity}. \coqdockw{Qed}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.ex2 13}{ex2\_13}{\coqdoclemma{ex2\_13}} `\{\coqdocclass{Funext}\} : \coqdocnotation{(}\coqdocinductive{Bool} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocinductive{Bool}\coqdocnotation{)} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocinductive{Bool}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_adjointify} \coqref{Ch02.ex2 13 f}{\coqdocdefinition{ex2\_13\_f}} \coqref{Ch02.ex2 13 g}{\coqdocdefinition{ex2\_13\_g}} \coqdocvar{\_} \coqdocvar{\_});\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{unfold} \coqdocdefinition{Sect}, \coqref{Ch02.ex2 13 f}{\coqdocdefinition{ex2\_13\_f}}, \coqref{Ch02.ex2 13 g}{\coqdocdefinition{ex2\_13\_g}}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\begin{coqdoccomment}
\coqdocindent{0.50em}
alpha\coqdocindent{0.50em}
\end{coqdoccomment}
\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} \coqdocvar{x}; \coqdoctac{reflexivity}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\begin{coqdoccomment}
\coqdocindent{0.50em}
beta\coqdocindent{0.50em}
\end{coqdoccomment}
\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} \coqdocvar{x}. \coqdoctac{pose} \coqdocvar{proof} (\coqref{Ch02.equiv not const}{\coqdoclemma{equiv\_not\_const}} \coqdocvar{equiv\_fun}) \coqdockw{as} \coqdocvar{H1}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_equiv}; \coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{x}; \coqdoctac{destruct} \coqdocvar{x}; \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} (\coqdocvar{equiv\_fun} \coqdocconstructor{false}); \coqdoctac{simpl};\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{repeat} (\coqdoctac{transitivity} (\coqdocdefinition{negb} (\coqdocdefinition{negb} (\coqdocvar{equiv\_fun} \coqdocconstructor{true})));\coqdoceol
\coqdocindent{3.00em}
[\coqdoctac{rewrite} \ensuremath{\leftarrow} \coqdocvar{H1}; \coqdoctac{reflexivity} \ensuremath{|} \coqdoctac{apply} \coqref{Ch02.negb involutive}{\coqdoclemma{negb\_involutive}}]).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} (\coqdocvar{equiv\_fun} \coqdocconstructor{false}); \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Qed}.\coqdoceol
\coqdocemptyline
\coqdocemptyline
\end{coqdoccode}
\exerdone{2.14}{104} 
Suppose we add to type theory the equality reflection rule which says that if
there is an element $p : x = y$, then in fact $x \equiv y$.  Prove that for any
$p : x = x$ we have $p \equiv \refl{x}$.


 \soln
Suppose that $p : x = x$; we show that $p = \refl{x}$, by path induction.  It
suffices to consider the case where $p \equiv \refl{x}$, in which case we have
$\refl{\refl{x}} : \refl{x} = \refl{x}$.  Thus $p = \refl{x}$ is inhabited, so
by the equality reflection rule, $p \equiv \refl{x}$.


 \exerdone{2.15}{105}
Show that Lemma 2.10.5 can be strengthened to
\[
  \transfib{B}{p}{-} =_{B(x)\to B(y)} \idtoeqv(\mapfunc{B}(p))
\]
without using function extensionality.


 \soln 
By induction on $p$, we have
\begin{align*}
  \transfib{B}{\refl{B(x)}}{-}
  &\equiv
  \idfunc{B(x)}
  \\&\equiv
  \transfib{X \mapsto X}{\refl{B(x)}}{-}
  \\&\equiv
  \transfib{X \mapsto X}{\mapfunc{B}(\refl{x})}{-}
  \\&\equiv
  \idtoeqv(\mapfunc{B}(\refl{x}))
\end{align*}
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.idtoeqv}{idtoeqv}{\coqdocdefinition{idtoeqv}} \{\coqdocvar{A} \coqdocvar{B} : \coqdockw{Type}\} : \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdocvariable{A} \coqdocnotation{=} \coqdocvariable{B}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdocvariable{A} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{B}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{X}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_adjointify} (\coqdocdefinition{transport} \coqdocabbreviation{idmap} \coqdocvar{X}) (\coqdocdefinition{transport} \coqdocabbreviation{idmap} \coqdocvar{X}\coqdocnotation{\^{}}) \coqdocvar{\_} \coqdocvar{\_});\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{b}; [ \coqdoctac{apply} (\coqdocdefinition{transport\_pV} \coqdocabbreviation{idmap} \coqdocvar{X}) \ensuremath{|} \coqdoctac{apply} (\coqdocdefinition{transport\_Vp} \coqdocabbreviation{idmap} \coqdocvar{X})].\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Lemma} \coqdef{Ch02.ex2 15}{ex2\_15}{\coqdoclemma{ex2\_15}} : \coqdockw{\ensuremath{\forall}} (\coqdocvar{A} : \coqdockw{Type}) (\coqdocvar{B} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}) (\coqdocvar{x} \coqdocvar{y} : \coqdocvariable{A}) (\coqdocvar{p} : \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{y}),\coqdoceol
\coqdocindent{8.50em}
\coqdocdefinition{transport} \coqdocvariable{B} \coqdocvariable{p} \coqdocnotation{=} \coqref{Ch02.idtoeqv}{\coqdocdefinition{idtoeqv}} (\coqdocdefinition{ap} \coqdocvariable{B} \coqdocvariable{p}).\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros}. \coqdoctac{unfold} \coqref{Ch02.idtoeqv}{\coqdocdefinition{idtoeqv}}. \coqdoctac{induction} \coqdocvar{p}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
\exerdone{2.16}{105}
Suppose that rather than function extensionality, we suppose only the existence
of an element
\[
  \funext : \prd{A:\UU}\prd{B:A\to\UU}\prd{f, g : \prd{x:A}B(x)}
    (f \sim g) \to (f = g)
\]
(with no relationship to $\happly$ assumed).  Prove that in fact, this is
sufficient to imply the whole function extensionality axiom (that $\happly$ is
an equivalence).


 \soln
Suppose that we have such an element, and let $A:\UU$, $B:A \to \UU$, and $f, g
: \prd{x:A}B(x)$.  I will suppress the $A$ and $B$ throughout.  If this implies the whole function extensionality
axiom, then it must be the case that we can construct the $\funext$
from the book, which has a particular computation rule.  This is not
too difficult; define
\[
  \funext'(f, g, h) 
  \defeq 
  \funext(f, g, h) \ct (\funext(g, g, h))^{-1}
\]
Then we have
\begin{align*}
  \funext'(f, f, \lam{x}\refl{f(x)})
  &\equiv
  \funext(f, f, \lam{x}\refl{f(x)}) \ct (\funext(f, f,
  \lam{x}\refl{f(x)}))^{-1}
  \\&\equiv
  \refl{f}
\end{align*}
by Lemma 2.1.4.  So now we need to show that $\funext'$ is a quasi-inverse to
$\happly$.  One direction is easy; since $\happly$ computes on $\refl{}$, by
induction we have
\[
  \funext'(f, f, \happly(\refl{f}))
  \equiv
  \funext'(f, f, \lam{x}\refl{f(x)})
  \equiv
  \refl{f}
\]
and thus $\funext'(f, g) \circ h \sim \idfunc{f=g}$.  The other direction
is more difficult.  We need to show that for all $h : f \sim g$,
$\happly(\funext(f, g, h)) = h$.  However, since $h$ isn't an inductive type,
we can't really do induction on it.  In the special case that $g \equiv f$ and
$h \equiv \lam{x}\refl{f(x)}$, we have
\[
  \happly(\funext(f, f, \lam{x}\refl{f(x)}))
  \equiv
  \happly(\refl{f})
  \equiv
  \lam{x}\refl{f(x)}
\]
So if we could find a way to reduce to this case, then we'd have the result.
One way to do this is to show that $(g, h) = (f, \lam{x}\refl{f(x)})$; since
we'd need to show this for all $g$ and $h$, this would be the same as showing
that the type
\[
  \sm{g:\prd{x:A}B(x)}(f \sim g)
  \equiv
  \sm{g:\prd{x:A}B(x)}\prd{x:A}(f(x) = g(x))
\]
is contractible, in the sense discussed in Exercise 1.7.  From Theorem 2.15.7,
this is equivalent to
\[
  \prd{x:A}\sm{y:B(x)} (f(x) = y)
\]
So if we can show that this type is contractible, then we can get the reduction
to the special case.


Now, we know from the previously-discussed Lemma 3.11.8 that for any $x$,
$\sm{y:B(x)} (f(x) = y)$ is contractible.  Now we want to apply Lemma 3.11.6,
but the proof requires function extensionality, so we'll have to try to recap
it.  Suppose that $j, k : \prd{x:A}\sm{y:B(x)}(f(x)=y)$.  For any $x : A$, we
have $j(x) = k(x)$ because $\sm{y:B(x)}(f(x) = y)$ is contractible.  Hence
there's some $p: j \sim k$, so $\funext'(j, k, p) : (j=k)$.  This means that
\[
  \prd{x:A}\sm{y:B(x)} (f(x) = y)
\]
is contractible.  So, transporting across the equivalence,
\[
  \sm{g:\prd{x:A}B(x)}\prd{x:A}(f(x) = g(x))
  \equiv
  \sm{g:\prd{x:A}B(x)}(f \sim g)
\]
is contractible.  Since any two contractible types are equivalent, this means
\[
  \left(\tsm{g:\prd{x:A}B(x)} (f=g)\right)   
  \eqvsym
  \left(\tsm{g:\prd{x:A}B(x)} (f \sim g)\right)   
\]
Since the first is contractible by Lemma 3.11.8.  Thus, we've shown
that $\total{\happly(f)}$, as defined in Definition 4.7.5, is an
equivalence.  By Theorem 4.7.7, this makes $\happly(f, g)$ an
equivalence for all $g$, proving the result.  Fingers crossed that none of the
HoTT library lemmas I use depend on \coqdocclass{Funext} or \coqdocclass{Univalence}.
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Section} \coqdef{Ch02.Exercise2 16}{Exercise2\_16}{\coqdocsection{Exercise2\_16}}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Variable} \coqdef{Ch02.Exercise2 16.funext}{funext}{\coqdocvariable{funext}} : \coqdockw{\ensuremath{\forall}} (\coqdocvar{A} : \coqdockw{Type}) (\coqdocvar{B} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}) (\coqdocvar{f} \coqdocvar{g} : \coqdockw{\ensuremath{\forall}} (\coqdocvar{x}:\coqdocvariable{A}), \coqdocvariable{B} \coqdocvariable{x}),\coqdoceol
\coqdocindent{11.00em}
\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdocvariable{f} \coqdocnotation{\ensuremath{\sim}} \coqdocvariable{g}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdocvariable{f} \coqdocnotation{=} \coqdocvariable{g}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.funext'}{funext'}{\coqdocdefinition{funext'}} \{\coqdocvar{A} : \coqdockw{Type}\} \{\coqdocvar{B} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\} (\coqdocvar{f} \coqdocvar{g} : \coqdockw{\ensuremath{\forall}} (\coqdocvar{x}:\coqdocvariable{A}), \coqdocvariable{B} \coqdocvariable{x}) : \coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdocvariable{f}\coqdocnotation{\ensuremath{\sim}}\coqdocvariable{g}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdocvariable{f}\coqdocnotation{=}\coqdocvariable{g}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}} :=\coqdoceol
\coqdocindent{1.00em}
(\coqdockw{fun} \coqdocvar{h} : (\coqdocvariable{f}\coqdocnotation{\ensuremath{\sim}}\coqdocvariable{g}) \ensuremath{\Rightarrow} \coqdocnotation{(}\coqdocvariable{funext} \coqdocvariable{A} \coqdocvariable{B} \coqdocvariable{f} \coqdocvariable{g} \coqdocvariable{h}\coqdocnotation{)} \coqdocnotation{@} \coqdocnotation{(}\coqdocvariable{funext} \coqdocvariable{A} \coqdocvariable{B} \coqdocvariable{g} \coqdocvariable{g} (\coqdockw{fun} \coqdocvar{\_} \ensuremath{\Rightarrow} 1)\coqdocnotation{)\^{}}).\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Lemma} \coqdef{Ch02.funext' computes}{funext'\_computes}{\coqdoclemma{funext'\_computes}} \{\coqdocvar{A} : \coqdockw{Type}\} \{\coqdocvar{B} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\} (\coqdocvar{f} : \coqdockw{\ensuremath{\forall}} (\coqdocvar{x}:\coqdocvariable{A}), \coqdocvariable{B} \coqdocvariable{x}) : \coqdoceol
\coqdocindent{1.00em}
\coqref{Ch02.funext'}{\coqdocdefinition{funext'}} \coqdocvariable{f} \coqdocvariable{f} (\coqdockw{fun} \coqdocvar{\_} \ensuremath{\Rightarrow} 1) \coqdocnotation{=} 1.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{unfold} \coqref{Ch02.funext'}{\coqdocdefinition{funext'}}. \coqdoctac{rewrite} \coqdocdefinition{concat\_pV}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Lemma} \coqdef{Ch02.Lemma3118}{Lemma3118}{\coqdoclemma{Lemma3118}} \{\coqdocvar{C}\} : \coqdockw{\ensuremath{\forall}} (\coqdocvar{c}:\coqdocvariable{C}), \coqdocabbreviation{Contr} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{x}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}}\coqdocvariable{C} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{c} \coqdocnotation{=} \coqdocvar{x}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{c}. \coqdoctac{\ensuremath{\exists}} \coqdocnotation{(}\coqdocvar{c}\coqdocnotation{;} 1\coqdocnotation{)}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{x}. \coqdoctac{destruct} \coqdocvar{x} \coqdockw{as} [\coqdocvar{x} \coqdocvar{p}]. \coqdocvar{path\_induction}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Lemma} \coqdef{Ch02.Lemma3116}{Lemma3116}{\coqdoclemma{Lemma3116}} \coqdocvar{A} \coqdocvar{B} \coqdocvar{f} : \coqdocabbreviation{Contr} (\coqdockw{\ensuremath{\forall}} \coqdocvar{x}:\coqdocvariable{A}, \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{y} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{B} \coqdocvariable{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{f} \coqdocvariable{x} \coqdocnotation{=} \coqdocvar{y}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}).\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{\ensuremath{\exists}} (\coqdockw{fun} \coqdocvar{x}:\coqdocvar{A} \ensuremath{\Rightarrow} \coqdocnotation{(}\coqdocvar{f} \coqdocvariable{x}\coqdocnotation{;} 1\coqdocnotation{)}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{k}. \coqdoctac{apply} (\coqref{Ch02.funext'}{\coqdocdefinition{funext'}} (\coqdockw{fun} \coqdocvar{x} \ensuremath{\Rightarrow} \coqdocnotation{(}\coqdocvar{f} \coqdocvariable{x}\coqdocnotation{;} 1\coqdocnotation{)}) \coqdocvar{k}); \coqdoctac{intro} \coqdocvar{x}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{assert} (\coqdocabbreviation{Contr} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{y} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{B} \coqdocvar{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{f} \coqdocvar{x} \coqdocnotation{=} \coqdocvar{y}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}). \coqdoctac{apply} \coqref{Ch02.Lemma3118}{\coqdoclemma{Lemma3118}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} \coqdocvar{X}. \coqdoctac{destruct} \coqdocvar{center}. \coqdoctac{rewrite} \ensuremath{\leftarrow} (\coqdocvar{contr} (\coqdocvar{k} \coqdocvar{x})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_sigma\_uncurried}. \coqdoctac{\ensuremath{\exists}} \coqdocvar{p}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{induction} \coqdocvar{p}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.choice}{choice}{\coqdocdefinition{choice}} \{\coqdocvar{A} \coqdocvar{B} \coqdocvar{f}\} : \coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} (\coqdocvar{x}:\coqdocvariable{A}), \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{y} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{B} \coqdocvariable{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{f} \coqdocvariable{x} \coqdocnotation{=} \coqdocvar{y}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdockw{\ensuremath{\forall}} (\coqdocvar{x}:\coqdocvariable{A}), \coqdocvariable{B} \coqdocvariable{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{f} \coqdocnotation{\ensuremath{\sim}} \coqdocvar{g}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{k}. \coqdoctac{\ensuremath{\exists}} (\coqdockw{fun} \coqdocvar{x}:\coqdocvar{A} \ensuremath{\Rightarrow} \coqdocnotation{(}\coqdocvar{k} \coqdocvariable{x}\coqdocnotation{).1}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{x}. \coqdoctac{apply} \coqdocnotation{(}\coqdocvar{k} \coqdocvar{x}\coqdocnotation{).2}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.choice inv}{choice\_inv}{\coqdocdefinition{choice\_inv}} \{\coqdocvar{A} \coqdocvar{B} \coqdocvar{f}\} :  \coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdockw{\ensuremath{\forall}} (\coqdocvar{x}:\coqdocvariable{A}), \coqdocvariable{B} \coqdocvariable{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{f} \coqdocnotation{\ensuremath{\sim}} \coqdocvar{g}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} (\coqdocvar{x}:\coqdocvariable{A}), \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{y} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{B} \coqdocvariable{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{f} \coqdocvariable{x} \coqdocnotation{=} \coqdocvar{y}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros} \coqdocvar{k} \coqdocvar{x}. \coqdoctac{apply} \coqdocnotation{(}\coqdocvar{k}\coqdocnotation{.1} \coqdocvar{x}\coqdocnotation{;} \coqdocvar{k}\coqdocnotation{.2} \coqdocvar{x}\coqdocnotation{)}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Lemma} \coqdef{Ch02.Theorem2157}{Theorem2157}{\coqdoclemma{Theorem2157}} \{\coqdocvar{A} \coqdocvar{B} \coqdocvar{f}\} : \coqdocclass{IsEquiv}(@\coqref{Ch02.choice}{\coqdocdefinition{choice}} \coqdocvariable{A} \coqdocvariable{B} \coqdocvariable{f}).\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{isequiv\_adjointify} \coqref{Ch02.choice}{\coqdocdefinition{choice}} \coqref{Ch02.choice inv}{\coqdocdefinition{choice\_inv}} \coqdocvar{\_} \coqdocvar{\_}); \coqdoctac{intro} \coqdocvar{k};\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{unfold} \coqref{Ch02.choice}{\coqdocdefinition{choice}}, \coqref{Ch02.choice inv}{\coqdocdefinition{choice\_inv}}; \coqdoctac{simpl}; [| \coqdoctac{apply} \coqref{Ch02.funext'}{\coqdocdefinition{funext'}}; \coqdoctac{intro} \coqdocvar{x}];\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_sigma\_uncurried}; \coqdoctac{\ensuremath{\exists}} 1; \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Lemma} \coqdef{Ch02.contr equiv commute}{contr\_equiv\_commute}{\coqdoclemma{contr\_equiv\_commute}} \{\coqdocvar{A} \coqdocvar{B}\} : \coqdocvariable{A} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{B} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocabbreviation{Contr} \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocabbreviation{Contr} \coqdocvariable{B}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros} \coqdocvar{f} \coqdocvar{k}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{\ensuremath{\exists}} (\coqdocvar{f} (\coqdocmethod{center} \coqdocvar{A})). \coqdoctac{intro} \coqdocvar{x}. \coqdoctac{transitivity} (\coqdocvar{f} (\coqdocvar{f}\coqdocnotation{\ensuremath{^{-1}}} \coqdocvar{x})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdocdefinition{ap} \coqdocvar{f}). \coqdoctac{apply} (\coqdocmethod{contr} (\coqdocvar{f}\coqdocnotation{\ensuremath{^{-1}}} \coqdocvar{x})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocmethod{eisretr}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Lemma} \coqdef{Ch02.reduce to refl}{reduce\_to\_refl}{\coqdoclemma{reduce\_to\_refl}} \{\coqdocvar{A} \coqdocvar{B} \coqdocvar{f}\} : \coqdocabbreviation{Contr} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdockw{\ensuremath{\forall}} \coqdocvar{x}:\coqdocvariable{A}, \coqdocvariable{B} \coqdocvariable{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{f} \coqdocnotation{\ensuremath{\sim}} \coqdocvar{g}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (@\coqref{Ch02.contr equiv commute}{\coqdoclemma{contr\_equiv\_commute}} (\coqdockw{\ensuremath{\forall}} (\coqdocvar{x}:\coqdocvar{A}), \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{y} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{B} \coqdocvariable{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{f} \coqdocvariable{x} \coqdocnotation{=} \coqdocvar{y}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocconstructor{BuildEquiv} \coqdocvar{\_} \coqdocvar{\_} \coqref{Ch02.choice}{\coqdocdefinition{choice}} \coqref{Ch02.Theorem2157}{\coqdoclemma{Theorem2157}}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqref{Ch02.Lemma3116}{\coqdoclemma{Lemma3116}}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.total happly}{total\_happly}{\coqdocdefinition{total\_happly}} \{\coqdocvar{A} \coqdocvar{B} \coqdocvar{f}\} : \coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdockw{\ensuremath{\forall}} \coqdocvar{x}:\coqdocvariable{A}, \coqdocvariable{B} \coqdocvariable{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{f} \coqdocnotation{=} \coqdocvar{g}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdockw{\ensuremath{\forall}} \coqdocvar{x}:\coqdocvariable{A}, \coqdocvariable{B} \coqdocvariable{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{f} \coqdocnotation{\ensuremath{\sim}} \coqdocvar{g}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros}. \coqdoctac{destruct} \coqdocvar{X}. \coqdoctac{\ensuremath{\exists}} \coqdocvar{x}. \coqdoctac{apply} \coqdocdefinition{apD10}. \coqdoctac{apply} \coqdocvar{p}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.total happly inv}{total\_happly\_inv}{\coqdocdefinition{total\_happly\_inv}} \{\coqdocvar{A} \coqdocvar{B} \coqdocvar{f}\} : \coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdockw{\ensuremath{\forall}} \coqdocvar{x}:\coqdocvariable{A}, \coqdocvariable{B} \coqdocvariable{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{f} \coqdocnotation{\ensuremath{\sim}} \coqdocvar{g}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdockw{\ensuremath{\forall}} \coqdocvar{x}:\coqdocvariable{A}, \coqdocvariable{B} \coqdocvariable{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{f} \coqdocnotation{=} \coqdocvar{g}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros}. \coqdoctac{destruct} \coqdocvar{X}. \coqdoctac{\ensuremath{\exists}} \coqdocvar{x}. \coqdoctac{apply} \coqref{Ch02.funext'}{\coqdocdefinition{funext'}}. \coqdoctac{apply} \coqdocvar{p}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Lemma} \coqdef{Ch02.total equivalence}{total\_equivalence}{\coqdoclemma{total\_equivalence}} \{\coqdocvar{A} \coqdocvar{B} \coqdocvar{f}\} : \coqdocclass{IsEquiv}(@\coqref{Ch02.total happly}{\coqdocdefinition{total\_happly}} \coqdocvariable{A} \coqdocvariable{B} \coqdocvariable{f}).\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{isequiv\_adjointify} \coqref{Ch02.total happly}{\coqdocdefinition{total\_happly}} \coqref{Ch02.total happly inv}{\coqdocdefinition{total\_happly\_inv}} \coqdocvar{\_} \coqdocvar{\_}); \coqdoctac{intro} \coqdocvar{k}.\coqdoceol
\coqdocindent{1.00em}
- \coqdoctac{assert} (\coqdocabbreviation{Contr} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdockw{\ensuremath{\forall}} \coqdocvar{x}:\coqdocvar{A}, \coqdocvar{B} \coqdocvariable{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{f} \coqdocnotation{\ensuremath{\sim}} \coqdocvar{g}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}). \coqdoctac{apply} \coqref{Ch02.reduce to refl}{\coqdoclemma{reduce\_to\_refl}}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{destruct} \coqdocvar{X}. \coqdoctac{rewrite} \coqdocnotation{(}\coqdocvar{contr} \coqdocvar{k}\coqdocnotation{)\^{}}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{apply} \coqdocnotation{(}\coqdocvar{contr} (\coqref{Ch02.total happly}{\coqdocdefinition{total\_happly}} (\coqref{Ch02.total happly inv}{\coqdocdefinition{total\_happly\_inv}} \coqdocvar{center}))\coqdocnotation{)\^{}}.\coqdoceol
\coqdocindent{1.00em}
- \coqdoctac{assert} (\coqdocabbreviation{Contr} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdockw{\ensuremath{\forall}} \coqdocvar{x}:\coqdocvar{A}, \coqdocvar{B} \coqdocvariable{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{f} \coqdocnotation{=} \coqdocvar{g}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}). \coqdoctac{apply} \coqref{Ch02.Lemma3118}{\coqdoclemma{Lemma3118}}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{destruct} \coqdocvar{X}. \coqdoctac{rewrite} \coqdocnotation{(}\coqdocvar{contr} \coqdocvar{k}\coqdocnotation{)\^{}}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{apply} \coqdocnotation{(}\coqdocvar{contr} (\coqref{Ch02.total happly inv}{\coqdocdefinition{total\_happly\_inv}} (\coqref{Ch02.total happly}{\coqdocdefinition{total\_happly}} \coqdocvar{center}))\coqdocnotation{)\^{}}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.total}{total}{\coqdocdefinition{total}} \{\coqdocvar{A} \coqdocvar{P} \coqdocvar{Q}\} (\coqdocvar{f} : \coqdockw{\ensuremath{\forall}} (\coqdocvar{x}:\coqdocvariable{A}), \coqdocvariable{P} \coqdocvariable{x} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{Q} \coqdocvariable{x}) := \coqdockw{fun} \coqdocvar{w} \ensuremath{\Rightarrow} \coqdocnotation{(}\coqdocvariable{w}\coqdocnotation{.1}\coqdocnotation{;} \coqdocvariable{f} \coqdocvariable{w}\coqdocnotation{.1} \coqdocvariable{w}\coqdocnotation{.2}\coqdocnotation{)}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Lemma} \coqdef{Ch02.total happly is}{total\_happly\_is}{\coqdoclemma{total\_happly\_is}} \{\coqdocvar{A} \coqdocvar{B} \coqdocvar{f}\} : \coqdocnotation{(}@\coqref{Ch02.total happly}{\coqdocdefinition{total\_happly}} \coqdocvariable{A} \coqdocvariable{B} \coqdocvariable{f}\coqdocnotation{)} \coqdocnotation{=} \coqref{Ch02.total}{\coqdocdefinition{total}} (@\coqdocdefinition{apD10} \coqdocvariable{A} \coqdocvariable{B} \coqdocvariable{f}).\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{unfold} \coqref{Ch02.total happly}{\coqdocdefinition{total\_happly}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqref{Ch02.funext'}{\coqdocdefinition{funext'}}; \coqdoctac{intro}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} \coqdocvar{x}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Qed}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.fx inv}{fx\_inv}{\coqdocdefinition{fx\_inv}} \{\coqdocvar{A} \coqdocvar{P} \coqdocvar{Q}\} \{\coqdocvar{f} : \coqdockw{\ensuremath{\forall}} \coqdocvar{x}:\coqdocvariable{A}, \coqdocvariable{P} \coqdocvariable{x} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{Q} \coqdocvariable{x}\} \{\coqdocvar{k} : \coqdocclass{IsEquiv} (\coqref{Ch02.total}{\coqdocdefinition{total}} \coqdocvariable{f})\} \coqdoceol
\coqdocindent{5.50em}
(\coqdocvar{x} : \coqdocvariable{A}) (\coqdocvar{y} : \coqdocvariable{Q} \coqdocvariable{x}) : \coqdocvariable{P} \coqdocvariable{x}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} \coqdocvar{k}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} \coqdocvar{x} \coqdockw{with} \coqdocnotation{(}\coqdocvar{x}\coqdocnotation{;} \coqdocvar{y}\coqdocnotation{)}\coqdocnotation{.1}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdocdefinition{transport} \coqdocvar{\_} (\coqdocdefinition{base\_path} (\coqdocvar{eisretr} \coqdocnotation{(}\coqdocvar{x}\coqdocnotation{;} \coqdocvar{y}\coqdocnotation{)}))).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocnotation{(}\coqdocvar{equiv\_inv} \coqdocnotation{(}\coqdocvar{x}\coqdocnotation{;} \coqdocvar{y}\coqdocnotation{)}\coqdocnotation{).2}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Lemma} \coqdef{Ch02.Theorem477}{Theorem477}{\coqdoclemma{Theorem477}} (\coqdocvar{A} : \coqdockw{Type}) (\coqdocvar{P} \coqdocvar{Q} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}) (\coqdocvar{f} : \coqdockw{\ensuremath{\forall}} \coqdocvar{x}:\coqdocvariable{A}, \coqdocvariable{P} \coqdocvariable{x} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{Q} \coqdocvariable{x}) : \coqdoceol
\coqdocindent{1.00em}
\coqdocclass{IsEquiv} (\coqref{Ch02.total}{\coqdocdefinition{total}} \coqdocvariable{f}) \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{\ensuremath{\forall}} \coqdocvar{x}:\coqdocvariable{A}, \coqdocclass{IsEquiv} (\coqdocvariable{f} \coqdocvariable{x}).\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{isequiv\_adjointify} (\coqdocvar{f} \coqdocvar{x}) (\coqref{Ch02.fx inv}{\coqdocdefinition{fx\_inv}} \coqdocvar{x}) \coqdocvar{\_} \coqdocvar{\_}); \coqdoctac{unfold} \coqref{Ch02.fx inv}{\coqdocdefinition{fx\_inv}}; \coqdoctac{intro} \coqdocvar{y}.\coqdoceol
\coqdocindent{1.00em}
- \coqdoctac{destruct} \coqdocvar{X}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{rewrite} \coqdoclemma{ap\_transport}. \coqdoctac{simpl}. \coqdoctac{unfold} \coqdocdefinition{base\_path}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{apply} (\coqdocdefinition{fiber\_path} (\coqdocvar{eisretr} \coqdocnotation{(}\coqdocvar{x}\coqdocnotation{;} \coqdocvar{y}\coqdocnotation{)})).\coqdoceol
\coqdocindent{1.00em}
- \coqdoctac{destruct} \coqdocvar{X}. \coqdoctac{unfold} \coqdocdefinition{base\_path}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{change} \coqdocnotation{(}\coqdocvar{x}\coqdocnotation{;} \coqdocvar{f} \coqdocvar{x} \coqdocvar{y}\coqdocnotation{)} \coqdockw{with} ((\coqref{Ch02.total}{\coqdocdefinition{total}} \coqdocvar{f}) \coqdocnotation{(}\coqdocvar{x}\coqdocnotation{;} \coqdocvar{y}\coqdocnotation{)}).\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{rewrite} \coqdocvar{eisadj}. \coqdoctac{rewrite} \ensuremath{\leftarrow} \coqdocdefinition{ap\_compose}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{assert} (\coqdocnotation{(}\coqdocdefinition{ap} (\coqdocabbreviation{pr1} \coqdocnotation{o} \coqref{Ch02.total}{\coqdocdefinition{total}} \coqdocvar{f}) (\coqdocvar{eissect} \coqdocnotation{(}\coqdocvar{x}\coqdocnotation{;} \coqdocvar{y}\coqdocnotation{)})\coqdocnotation{)} \coqdocnotation{=} \coqdocnotation{(}\coqdocdefinition{base\_path} (\coqdocvar{eissect} \coqdocnotation{(}\coqdocvar{x}\coqdocnotation{;} \coqdocvar{y}\coqdocnotation{)})\coqdocnotation{)}).\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{unfold} \coqdocdefinition{compose}. \coqdoctac{unfold} \coqdocdefinition{base\_path}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{rewrite} \coqdocvar{X}. \coqdoctac{unfold} \coqdocdefinition{base\_path}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{transitivity} \coqdocnotation{(}\coqdocvar{x}\coqdocnotation{;} \coqdocvar{y}\coqdocnotation{)}\coqdocnotation{.2}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{apply} (\coqdocdefinition{fiber\_path} (\coqdocvar{eissect} \coqdocnotation{(}\coqdocvar{x}\coqdocnotation{;} \coqdocvar{y}\coqdocnotation{)})).\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.ex2 16}{ex2\_16}{\coqdoclemma{ex2\_16}} \{\coqdocvar{A} \coqdocvar{B}\} (\coqdocvar{f} \coqdocvar{g} : \coqdockw{\ensuremath{\forall}} (\coqdocvar{x}:\coqdocvariable{A}), \coqdocvariable{B} \coqdocvariable{x}) : \coqdocclass{IsEquiv}(@\coqdocdefinition{apD10} \coqdocvariable{A} \coqdocvariable{B} \coqdocvariable{f} \coqdocvariable{g}).\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqref{Ch02.Theorem477}{\coqdoclemma{Theorem477}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} \ensuremath{\leftarrow} \coqref{Ch02.total happly is}{\coqdoclemma{total\_happly\_is}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqref{Ch02.total equivalence}{\coqdoclemma{total\_equivalence}}.\coqdoceol
\coqdocnoindent
\coqdockw{Qed}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{End} \coqref{Ch02.Exercise2 16}{\coqdocsection{Exercise2\_16}}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
\exerdone{2.17}{105}
\begin{enumerate}
  \item Show that if $A \eqvsym A'$ and $B \eqvsym B'$, then $(A \times B)
      \eqvsym (A' \times B')$.
  \item Give two proofs of this fact, one using univalence and one not using
  it, and show that the two proofs are equal.
  \item Formulate and prove analogous results for the other type formers:
  $\Sigma$, $\to$, $\Pi$, and $+$.
\end{enumerate}


 \soln
(i)
Suppose that $g : A \eqvsym A'$ and $h : B \eqvsym B'$.  By the univalence
axiom, this means that $A = A'$ and $B = B'$.  But then $A \times B = A' \times
B'$, so again by univalence $(A \times B) \eqvsym (A' \times B')$. 
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.ex2 17 i}{ex2\_17\_i}{\coqdoclemma{ex2\_17\_i}} `\{\coqdocclass{Univalence}\}: \coqdockw{\ensuremath{\forall}} (\coqdocvar{A} \coqdocvar{A'} \coqdocvar{B} \coqdocvar{B'} : \coqdockw{Type}),\coqdoceol
\coqdocindent{1.00em}
\coqdocvariable{A} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{A'} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{B'} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocnotation{(}\coqdocvariable{A} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqdocvariable{B}\coqdocnotation{)} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocnotation{(}\coqdocvariable{A'} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqdocvariable{B'}\coqdocnotation{)}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros} \coqdocvar{A} \coqdocvar{A'} \coqdocvar{B} \coqdocvar{B'} \coqdocvar{f} \coqdocvar{g}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{equiv\_path\_universe} \coqdoctac{in} \coqdocvar{f}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{equiv\_path\_universe} \coqdoctac{in} \coqdocvar{g}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{equiv\_path\_universe}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdocdefinition{transport} (\coqdockw{fun} \coqdocvar{x}:\coqdockw{Type} \ensuremath{\Rightarrow} \coqdocvar{A} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqdocvar{B} \coqdocnotation{=} \coqdocvar{A'} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqdocvariable{x}) \coqdocvar{g}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdocdefinition{transport} (\coqdockw{fun} \coqdocvar{x}:\coqdockw{Type} \ensuremath{\Rightarrow} \coqdocvar{A} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqdocvar{B} \coqdocnotation{=} \coqdocvariable{x} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqdocvar{B}) \coqdocvar{f}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
\noindent
(ii) To prove this without univalence, we construct an explicit
equivalence.  Suppose that $f : A \to A'$ and $g : B \to B'$ are both equivalences, and define $h : A \times B \to A' \times B'$ by
\[
  h(a, b) \defeq (f(a), g(b))
\]
with the appropriate inverse
\[
  h^{-1}(a', b') \defeq (f^{-1}(a'), g^{-1}(b'))
\]
Clearly these are quasi-inverses, since
\[
  h(h^{-1}(a', b')) 
  \equiv h(f^{-1}(a'), g^{-1}(b'))
  \equiv (f(f^{-1}(a')), g(g^{-1}(b')))
  \equiv (a', b')
\]
and vice versa.
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.ex2 17 i'}{ex2\_17\_i'}{\coqdoclemma{ex2\_17\_i'}} : \coqdockw{\ensuremath{\forall}} (\coqdocvar{A} \coqdocvar{A'} \coqdocvar{B} \coqdocvar{B'} : \coqdockw{Type}),\coqdoceol
\coqdocindent{1.00em}
\coqdocvariable{A} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{A'} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{B'} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocnotation{(}\coqdocvariable{A} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqdocvariable{B}\coqdocnotation{)} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocnotation{(}\coqdocvariable{A'} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqdocvariable{B'}\coqdocnotation{)}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros} \coqdocvar{A} \coqdocvar{A'} \coqdocvar{B} \coqdocvar{B'} \coqdocvar{f} \coqdocvar{g}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_adjointify} (\coqdockw{fun} \coqdocvar{z} \ensuremath{\Rightarrow} \coqexternalref{:core scope:'(' x ',' x ',' '..' ',' x ')'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocvar{f} (\coqexternalref{fst}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocdefinition{fst}} \coqdocvariable{z})\coqexternalref{:core scope:'(' x ',' x ',' '..' ',' x ')'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{,}} \coqdocvar{g} (\coqexternalref{snd}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocdefinition{snd}} \coqdocvariable{z})\coqexternalref{:core scope:'(' x ',' x ',' '..' ',' x ')'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}})\coqdoceol
\coqdocindent{13.50em}
(\coqdockw{fun} \coqdocvar{z} \ensuremath{\Rightarrow} \coqexternalref{:core scope:'(' x ',' x ',' '..' ',' x ')'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocvar{f}\coqdocnotation{\ensuremath{^{-1}}} (\coqexternalref{fst}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocdefinition{fst}} \coqdocvariable{z})\coqexternalref{:core scope:'(' x ',' x ',' '..' ',' x ')'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{,}} \coqdocvar{g}\coqdocnotation{\ensuremath{^{-1}}} (\coqexternalref{snd}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocdefinition{snd}} \coqdocvariable{z})\coqexternalref{:core scope:'(' x ',' x ',' '..' ',' x ')'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}})\coqdoceol
\coqdocindent{13.50em}
\coqdocvar{\_} \coqdocvar{\_}); \coqdoceol
\coqdocindent{2.00em}
\coqdoctac{intro} \coqdocvar{z}; \coqdoctac{destruct} \coqdocvar{z}; \coqdoctac{apply} \coqdocdefinition{path\_prod}; \coqdoctac{simpl};\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{try} (\coqdoctac{apply} \coqdocmethod{eisretr}); \coqdoctac{try} (\coqdoctac{apply} \coqdocmethod{eissect}).\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
\noindent
To prove that the proofs are equivalent, it suffices to show that the
underlying functions are equal, by Lemma 3.5.1.  
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.equal proofs}{equal\_proofs}{\coqdoclemma{equal\_proofs}} `\{\coqdocclass{Univalence}\} : \coqref{Ch02.ex2 17 i}{\coqdoclemma{ex2\_17\_i}} \coqdocnotation{=} \coqref{Ch02.ex2 17 i'}{\coqdoclemma{ex2\_17\_i'}}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{unfold} \coqref{Ch02.ex2 17 i}{\coqdoclemma{ex2\_17\_i}}, \coqref{Ch02.ex2 17 i'}{\coqdoclemma{ex2\_17\_i'}}. \coqdoctac{simpl}. \coqdoctac{unfold} \coqdocdefinition{compose}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{A}. \coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{A'}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{B}. \coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{B'}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{f}. \coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{g}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\begin{coqdoccomment}
\coqdocindent{0.50em}
equiv\_fun\coqdocindent{0.50em}
\end{coqdoccomment}
\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{assert} (\coqdocdefinition{transport} \coqdocabbreviation{idmap}\coqdoceol
\coqdocindent{9.00em}
(\coqdocdefinition{transport} (\coqdockw{fun} \coqdocvar{x} : \coqdockw{Type} \ensuremath{\Rightarrow} \coqdocvar{A} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqdocvar{B} \coqdocnotation{=} \coqdocvar{A'} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqdocvariable{x})\coqdoceol
\coqdocindent{10.50em}
(\coqdocdefinition{path\_universe\_uncurried} \coqdocvar{g})\coqdoceol
\coqdocindent{10.50em}
(\coqdocdefinition{transport} (\coqdockw{fun} \coqdocvar{x} : \coqdockw{Type} \ensuremath{\Rightarrow} \coqdocvar{A} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqdocvar{B} \coqdocnotation{=} \coqdocvariable{x} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqdocvar{B})\coqdoceol
\coqdocindent{12.00em}
(\coqdocdefinition{path\_universe\_uncurried} \coqdocvar{f}) 1))\coqdoceol
\coqdocindent{5.00em}
\coqdocnotation{=}\coqdoceol
\coqdocindent{4.50em}
\coqdockw{fun} \coqdocvar{z} : \coqdocvar{A} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqdocvar{B} \ensuremath{\Rightarrow} \coqexternalref{:core scope:'(' x ',' x ',' '..' ',' x ')'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocvar{f} (\coqexternalref{fst}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocdefinition{fst}} \coqdocvariable{z})\coqexternalref{:core scope:'(' x ',' x ',' '..' ',' x ')'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{,}} \coqdocvar{g} (\coqexternalref{snd}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocdefinition{snd}} \coqdocvariable{z})\coqexternalref{:core scope:'(' x ',' x ',' '..' ',' x ')'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}}) \coqdockw{as} \coqdocvar{H1}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{z}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{repeat} (\coqdoctac{rewrite} \coqdoclemma{trans\_paths}; \coqdocvar{hott\_simpl}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} \coqdocdefinition{transport\_pp}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} \ensuremath{\leftarrow} \coqdocdefinition{transport\_idmap\_ap}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} \ensuremath{\leftarrow} (\coqdocdefinition{transport\_idmap\_ap} \coqdockw{Type} (\coqdockw{fun} \coqdocvar{a}:\coqdockw{Type} \ensuremath{\Rightarrow} \coqdocvariable{a} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqdocvar{B}) \coqdocvar{A} \coqdocvar{A'} (\coqdocdefinition{path\_universe\_uncurried} \coqdocvar{f}) \coqdocvar{z}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} (@\coqdocdefinition{transport\_prod} \coqdockw{Type} \coqdocabbreviation{idmap} (\coqdockw{fun} \coqdocvar{x}:\coqdockw{Type} \ensuremath{\Rightarrow} \coqdocvar{B})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} \coqdocdefinition{transport\_prod}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} \coqdocvar{z}; \coqdoctac{apply} \coqdocdefinition{path\_prod}; \coqdoctac{simpl}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{rewrite} \coqdocdefinition{transport\_const}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{assert} (\coqdocnotation{(}\coqdocdefinition{path\_universe\_uncurried} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{=} \coqdocnotation{(}\coqdocdefinition{path\_universe} (\coqdocprojection{equiv\_fun} \coqdocvar{f})\coqdocnotation{)}).\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{unfold} \coqdocdefinition{path\_universe}. \coqdoctac{destruct} \coqdocvar{f}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{rewrite} \coqdocvar{X}. \coqdoctac{apply} \coqdocdefinition{transport\_path\_universe}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{rewrite} \coqdocdefinition{transport\_const}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{assert} (\coqdocnotation{(}\coqdocdefinition{path\_universe\_uncurried} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{=} \coqdocnotation{(}\coqdocdefinition{path\_universe} (\coqdocprojection{equiv\_fun} \coqdocvar{g})\coqdocnotation{)}).\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{unfold} \coqdocdefinition{path\_universe}. \coqdoctac{destruct} \coqdocvar{g}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{rewrite} \coqdocvar{X}. \coqdoctac{apply} \coqdocdefinition{transport\_path\_universe}.\coqdoceol
\coqdocemptyline
\coqdocindent{0.50em}
\coqdoctac{unfold} \coqdocdefinition{equiv\_path}, \coqdocdefinition{equiv\_adjointify}.\coqdoceol
\coqdocemptyline
\coqdocindent{0.50em}
\begin{coqdoccomment}
\coqdocindent{0.50em}
Lemma\coqdocindent{0.50em}
3.5.1\coqdocindent{0.50em}
\end{coqdoccomment}
\coqdoceol
\coqdocindent{0.50em}
\coqdoctac{apply} \coqdocdefinition{path\_equiv}. \coqdoctac{apply} \coqdocvar{H1}.\coqdoceol
\coqdocnoindent
\coqdockw{Qed}.\coqdoceol
\coqdocemptyline
\coqdocemptyline
\end{coqdoccode}
\noindent
(iii)  The proofs of the rest of these are pretty much routine.  With
univalence, we can just convert everything to equality, rewrite, and then
convert back to equivalences.  However, since Coq's rewriting approach can be
fiddly, we sometimes have to write things out explicitly.  Most of the
conceptual work in this problem is just stating the generalizations, though,
which are as follows:
\begin{description}
\item[$\Sigma$]  If $f : A \eqvsym A'$ and for all $x:A$ we have $B(x) \eqvsym
B'(f(x))$, then $(\sm{x:A}B(x)) \eqvsym (\sm{x':A'} B'(x'))$.  Another way to
state the second assumption is that there is a fiberwise equivalence $g:
\prd{x:A} B(x) \eqvsym B'(f(x))$.

\item[$\to$] If $A \eqvsym A'$ and $B \eqvsym B'$, then $(A \to B) \eqvsym (A'
\to B')$.

\item[$\Pi$] If $f : A \eqvsym A'$ and there is a fiberwise equivalence $g :
\prd{x:A}B(x) \eqvsym B'(f(x))$, then 
\[
  \left(\prd{x:A} B(x)\right) \eqvsym \left(\prd{x':A'} B'(f(x'))\right)
\]

\item[$+$] If $A \eqvsym A'$ and $B \eqvsym B'$, then $A + B \eqvsym A' + B'$.
\end{description}
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.sigma f}{sigma\_f}{\coqdocdefinition{sigma\_f}} `\{\coqdocclass{Univalence}\} \{\coqdocvar{A} \coqdocvar{A'} : \coqdockw{Type}\} \{\coqdocvar{B} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\} \{\coqdocvar{B'} : \coqdocvariable{A'} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\} \coqdoceol
\coqdocindent{4.00em}
(\coqdocvar{f} : \coqdocvariable{A} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{A'}) (\coqdocvar{g} : \coqdockw{\ensuremath{\forall}} \coqdocvar{x} : \coqdocvariable{A}, \coqdocvariable{B} \coqdocvariable{x} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{B'} (\coqdocvariable{f} \coqdocvariable{x})) :\coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{B} \coqdocvar{x}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{x'} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{A'} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{B'} \coqdocvar{x'}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros}. \coqdoctac{\ensuremath{\exists}} (\coqdocvar{f} \coqdocvar{X}\coqdocnotation{.1}). \coqdoctac{apply} (\coqdocvar{g} \coqdocvar{X}\coqdocnotation{.1} \coqdocvar{X}\coqdocnotation{.2}).\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.sigma f inv}{sigma\_f\_inv}{\coqdocdefinition{sigma\_f\_inv}} `\{\coqdocclass{Univalence}\} \{\coqdocvar{A} \coqdocvar{A'} : \coqdockw{Type}\} \{\coqdocvar{B} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\} \{\coqdocvar{B'} : \coqdocvariable{A'} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\} \coqdoceol
\coqdocindent{2.00em}
(\coqdocvar{f} : \coqdocvariable{A} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{A'}) (\coqdocvar{g} : \coqdockw{\ensuremath{\forall}} \coqdocvar{x} : \coqdocvariable{A}, \coqdocvariable{B} \coqdocvariable{x} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{B'} (\coqdocvariable{f} \coqdocvariable{x})) (\coqdocvar{X} : \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{x'} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{A'} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{B'} \coqdocvar{x'}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}) \coqdoceol
\coqdocindent{2.00em}
:= \coqdoceol
\coqdocindent{2.00em}
\coqdocnotation{(}\coqdocvariable{f}\coqdocnotation{\ensuremath{^{-1}}} \coqdocvariable{X}\coqdocnotation{.1}\coqdocnotation{;} \coqdocnotation{(}\coqdocvariable{g} (\coqdocvariable{f}\coqdocnotation{\ensuremath{^{-1}}} \coqdocvariable{X}\coqdocnotation{.1})\coqdocnotation{)\^{}-1} (\coqdocnotation{(}\coqdocmethod{eisretr} \coqdocvariable{f} \coqdocvariable{X}\coqdocnotation{.1}\coqdocnotation{)\^{}} \coqdocnotation{\#} \coqdocvariable{X}\coqdocnotation{.2})\coqdocnotation{)}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.ex2 17 sigma}{ex2\_17\_sigma}{\coqdoclemma{ex2\_17\_sigma}} `\{\coqdocclass{Univalence}\} (\coqdocvar{A} \coqdocvar{A'} : \coqdockw{Type}) (\coqdocvar{B} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}) (\coqdocvar{B'} : \coqdocvariable{A'} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}) \coqdoceol
\coqdocindent{4.00em}
(\coqdocvar{f} : \coqdocvariable{A} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{A'}) (\coqdocvar{g} : \coqdockw{\ensuremath{\forall}} \coqdocvar{x} : \coqdocvariable{A}, \coqdocvariable{B} \coqdocvariable{x} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{B'} (\coqdocvariable{f} \coqdocvariable{x})) :\coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{B} \coqdocvar{x}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}} \coqdocnotation{\ensuremath{\eqvsym}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{x'} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{A'} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{B'} \coqdocvar{x'}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_adjointify} (\coqref{Ch02.sigma f}{\coqdocdefinition{sigma\_f}} \coqdocvar{f} \coqdocvar{g}) (\coqref{Ch02.sigma f inv}{\coqdocdefinition{sigma\_f\_inv}} \coqdocvar{f} \coqdocvar{g}) \coqdocvar{\_} \coqdocvar{\_}); \coqdoctac{intro} \coqdocvar{h}; \coqdoceol
\coqdocindent{1.00em}
\coqdoctac{unfold} \coqref{Ch02.sigma f}{\coqdocdefinition{sigma\_f}}, \coqref{Ch02.sigma f inv}{\coqdocdefinition{sigma\_f\_inv}}; \coqdoctac{simpl}; \coqdoctac{apply} \coqdocdefinition{path\_sigma\_uncurried}; \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{\ensuremath{\exists}} (\coqdocmethod{eisretr} \coqdocvar{f} \coqdocvar{h}\coqdocnotation{.1}). \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} (\coqdocmethod{eisretr} (\coqdocvar{g} (\coqdocvar{f}\coqdocnotation{\ensuremath{^{-1}}} \coqdocvar{h}\coqdocnotation{.1}))). \coqdoctac{rewrite} \coqdocdefinition{transport\_pV}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{\ensuremath{\exists}} (\coqdocmethod{eissect} \coqdocvar{f} \coqdocvar{h}\coqdocnotation{.1}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocnotation{(}\coqdoclemma{ap\_transport} (\coqdocmethod{eissect} \coqdocvar{f} \coqdocvar{h}\coqdocnotation{.1}) (\coqdockw{fun} \coqdocvar{x'} \ensuremath{\Rightarrow} \coqdocnotation{(}\coqdocvar{g} \coqdocvariable{x'}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}})\coqdoceol
\coqdocindent{12.00em}
(\coqdocdefinition{transport} \coqdocvar{B'} \coqdocnotation{(}\coqdocmethod{eisretr} \coqdocvar{f} (\coqdocvar{f} \coqdocvar{h}\coqdocnotation{.1})\coqdocnotation{)} \coqdocnotation{\^{}} (\coqdocvar{g} \coqdocvar{h}\coqdocnotation{.1} \coqdocvar{h}\coqdocnotation{.2}))\coqdocnotation{)\^{}} \coqdocnotation{@} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} \coqdoclemma{transport\_compose}, \coqdocmethod{eisadj}, \coqdocdefinition{transport\_pV}. \coqdoctac{apply} \coqdocmethod{eissect}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.ex2 17 maps}{ex2\_17\_maps}{\coqdoclemma{ex2\_17\_maps}} `\{\coqdocclass{Univalence}\} : \coqdockw{\ensuremath{\forall}} (\coqdocvar{A} \coqdocvar{A'} \coqdocvar{B} \coqdocvar{B'} : \coqdockw{Type}),\coqdoceol
\coqdocindent{1.00em}
\coqdocvariable{A} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{A'} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{B'} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocnotation{(}\coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B}\coqdocnotation{)} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocnotation{(}\coqdocvariable{A'} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B'}\coqdocnotation{)}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros} \coqdocvar{A} \coqdocvar{A'} \coqdocvar{B} \coqdocvar{B'} \coqdocvar{HA} \coqdocvar{HB}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{equiv\_path\_universe} \coqdoctac{in} \coqdocvar{HA}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{equiv\_path\_universe} \coqdoctac{in} \coqdocvar{HB}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{equiv\_path\_universe}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} \coqdocvar{HA}, \coqdocvar{HB}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.pi f}{pi\_f}{\coqdocdefinition{pi\_f}} \{\coqdocvar{A} \coqdocvar{A'} : \coqdockw{Type}\} \{\coqdocvar{B} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\} \{\coqdocvar{B'} : \coqdocvariable{A'} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\}\coqdoceol
\coqdocindent{4.00em}
(\coqdocvar{f} : \coqdocvariable{A} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{A'}) (\coqdocvar{g} : \coqdockw{\ensuremath{\forall}} \coqdocvar{x} : \coqdocvariable{A}, \coqdocvariable{B} \coqdocvariable{x} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{B'} (\coqdocvariable{f} \coqdocvariable{x})) :\coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} \coqdocvar{x}:\coqdocvariable{A}, \coqdocvariable{B} \coqdocvariable{x}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} \coqdocvar{x'}:\coqdocvariable{A'}, \coqdocvariable{B'} \coqdocvariable{x'}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdocnotation{(}\coqdocmethod{eisretr} \coqdocvar{f} \coqdocvar{x'}\coqdocnotation{)} \coqdocnotation{\#} \coqdocnotation{(}(\coqdocvar{g} (\coqdocvar{f}\coqdocnotation{\ensuremath{^{-1}}} \coqdocvar{x'})) (\coqdocvar{X} (\coqdocvar{f}\coqdocnotation{\ensuremath{^{-1}}} \coqdocvar{x'}))\coqdocnotation{)}).\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch02.pi f inv}{pi\_f\_inv}{\coqdocdefinition{pi\_f\_inv}} \{\coqdocvar{A} \coqdocvar{A'} : \coqdockw{Type}\} \{\coqdocvar{B} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\} \{\coqdocvar{B'} : \coqdocvariable{A'} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\}\coqdoceol
\coqdocindent{5.50em}
(\coqdocvar{f} : \coqdocvariable{A} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{A'}) (\coqdocvar{g} : \coqdockw{\ensuremath{\forall}} \coqdocvar{x} : \coqdocvariable{A}, \coqdocvariable{B} \coqdocvariable{x} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{B'} (\coqdocvariable{f} \coqdocvariable{x})) :\coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} \coqdocvar{x'}:\coqdocvariable{A'}, \coqdocvariable{B'} \coqdocvariable{x'}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} \coqdocvar{x}:\coqdocvariable{A}, \coqdocvariable{B} \coqdocvariable{x}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocnotation{(}\coqdocvar{g} \coqdocvar{x}\coqdocnotation{)\^{}-1}. \coqdoctac{apply} (\coqdocvar{X} (\coqdocvar{f} \coqdocvar{x})).\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.ex2 17 pi}{ex2\_17\_pi}{\coqdoclemma{ex2\_17\_pi}} \{\coqdocvar{A} \coqdocvar{A'} : \coqdockw{Type}\} \{\coqdocvar{B} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\} \{\coqdocvar{B'} : \coqdocvariable{A'} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type}\}\coqdoceol
\coqdocindent{5.50em}
(\coqdocvar{f} : \coqdocvariable{A} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{A'}) (\coqdocvar{g} : \coqdockw{\ensuremath{\forall}} \coqdocvar{x} : \coqdocvariable{A}, \coqdocvariable{B} \coqdocvariable{x} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{B'} (\coqdocvariable{f} \coqdocvariable{x})) :\coqdoceol
\coqdocindent{1.00em}
\coqdocnotation{(}\coqdockw{\ensuremath{\forall}} \coqdocvar{x}:\coqdocvariable{A}, \coqdocvariable{B} \coqdocvariable{x}\coqdocnotation{)} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocnotation{(}\coqdockw{\ensuremath{\forall}} \coqdocvar{x'}:\coqdocvariable{A'}, \coqdocvariable{B'} \coqdocvariable{x'}\coqdocnotation{)}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_adjointify} (\coqref{Ch02.pi f}{\coqdocdefinition{pi\_f}} \coqdocvar{f} \coqdocvar{g}) (\coqref{Ch02.pi f inv}{\coqdocdefinition{pi\_f\_inv}} \coqdocvar{f} \coqdocvar{g}) \coqdocvar{\_} \coqdocvar{\_}); \coqdoctac{intro} \coqdocvar{h};\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{unfold} \coqref{Ch02.pi f}{\coqdocdefinition{pi\_f}}, \coqref{Ch02.pi f inv}{\coqdocdefinition{pi\_f\_inv}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{x'}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} (\coqdocmethod{eisretr} (\coqdocvar{g} (\coqdocvar{f}\coqdocnotation{\ensuremath{^{-1}}} \coqdocvar{x'}))). \coqdoctac{induction} (\coqdocmethod{eisretr} \coqdocvar{f} \coqdocvar{x'}). \coqdoctac{reflexivity}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{x}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocnotation{(}\coqdocdefinition{ap} (\coqdocvar{g} \coqdocvar{x})\coqdocnotation{)\^{}-1}. \coqdoctac{rewrite} (\coqdocmethod{eisretr} (\coqdocvar{g} \coqdocvar{x})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} \coqdocmethod{eisadj}. \coqdoctac{rewrite} \ensuremath{\leftarrow} \coqdoclemma{transport\_compose}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{induction} (\coqdocmethod{eissect} \coqdocvar{f} \coqdocvar{x}). \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Qed}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch02.ex2 17 sum}{ex2\_17\_sum}{\coqdoclemma{ex2\_17\_sum}} `\{\coqdocclass{Univalence}\} : \coqdockw{\ensuremath{\forall}} (\coqdocvar{A} \coqdocvar{A'} \coqdocvar{B} \coqdocvar{B'} : \coqdockw{Type}), \coqdoceol
\coqdocindent{1.00em}
\coqdocvariable{A} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{A'} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{B'} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocnotation{(}\coqdocvariable{A} \coqexternalref{:type scope:x '+' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{+}} \coqdocvariable{B}\coqdocnotation{)} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocnotation{(}\coqdocvariable{A'} \coqexternalref{:type scope:x '+' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{+}} \coqdocvariable{B'}\coqdocnotation{)}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros} \coqdocvar{A} \coqdocvar{A'} \coqdocvar{B} \coqdocvar{B'} \coqdocvar{HA} \coqdocvar{HB}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{equiv\_path\_universe} \coqdoctac{in} \coqdocvar{HA}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{equiv\_path\_universe} \coqdoctac{in} \coqdocvar{HB}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{equiv\_path\_universe}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} \coqdocvar{HA}, \coqdocvar{HB}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Qed}.\coqdoceol
\end{coqdoccode}
