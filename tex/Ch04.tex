\begin{coqdoccode}
\end{coqdoccode}
\section{Equivalences}



 \exerdone{4.1}{147} 
Consider the type of ``two-sided adjoint equivalence data'' for $f : A \to B$,
\[
  \sm{g:B \to A} 
  \sm{\eta : g \circ f \sim \idfunc{A}}
  \sm{\epsilon : f \circ g \sim \idfunc{B}}
  \left(\prd{x:A} f(\eta x) = \epsilon(f x)\right)
    \times
  \left(\prd{y:B} g(\epsilon y) = \eta(g y)\right)
\]
By Lemma 4.2.2, we know that if $f$ is an equivalence, then this type is
inhabited.  Give a characterization of this type analogous to Lemma 4.1.1.
Give an example showing that this type is not generally a mere proposition.


 \soln
If $f : A \to B$ is an equivalence, then this type is equivalent to
$\prd{x:A}(\refl{x} = \refl{x})$.  The idea is that the extra half-adjoint
data pins down the path $x = x$ to $\refl{x}$, but the further data allows for
nontrivial paths $\refl{x} = \refl{x}$. To fix this one would have to
add another higher coherence condition.


To prove this, suppose that $e : \isequiv(f)$, so $(f, e) : \eqv{A}{B}$.  By
univalence, we may assume that $(f, e)$ is of the form $\idtoeqv(r)$ for some
$r : A = B$, and by path induction we can assume this is $\refl{A}$, so
$\idtoeqv(r)$ is $\idfunc{A}$.  Now our type reduces to
\[
  \sm{g:A \to A} 
  \sm{\eta : g \sim \idfunc{A}}
  \sm{\epsilon : g \sim \idfunc{A}}
  \left(\eta \sim \epsilon \right)
    \times
  \left((\lam{x}g(\epsilon x)) \sim (\lam{x}\eta(g x))\right)
\]
and by function extensionality and associativity of $\Sigma$ types this is
equivalent to 
\[
  \sm{h : \sm{g:A \to A} (g = \idfunc{A})}
  \sm{\epsilon : \fst(h) = \idfunc{A}}
  \left(\snd(h) = \epsilon \right)
    \times
  \left((\lam{x}(\fst(h))(\epsilon x)) = (\lam{x}(\snd(h))((\fst(h)) x))\right)
\]
But $\sm{g : A \to A}(g = \idfunc{A})$ is contractible with center
$(\idfunc{A}, \refl{\idfunc{A}})$, so our type is equivalent to
\[
  \sm{\epsilon : \idfunc{A} = \idfunc{A}}
  \left(\refl{\idfunc{A}} = \epsilon \right)
    \times
  \left(\epsilon = \refl{\idfunc{A}}\right)
\]
again by associativity, this is equivalent to 
\[
  \sm{h: \sm{\epsilon : \idfunc{A} = \idfunc{A}} (\epsilon =
  \refl{\idfunc{A}})}
  \left(\fst(h) = \refl{\idfunc{A}}\right)
\]
and again we can apply 3.11.9 to obtain the equivalent $\refl{\idfunc{A}} =
\refl{\idfunc{A}}$.  By function extensionality, this is equivalent to
\[
  \prd{x:A}(\refl{x} = \refl{x})
\]


This type is generally not a mere proposition.  It suffices to give an example
of some $X$ such that $\prd{x:X}(\refl{x}=\refl{x})$ isn't a mere proposition.
Consider the 2-sphere $\Sn^{2}$.  Then $\refl{\refl{\base}} : \refl{\base} =
\refl{\base}$, but we also have $\surf : \refl{\base} = \refl{\base}$.  Since
$\surf \not= \refl{\refl{\base}}$, $(\refl{\base} = \refl{\base})$ isn't a
mere proposition, hence neither is $\prd{x:\Sn^{2}}(\refl{x} = \refl{x})$,
hence neither is our type.
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch04.ex4 1}{ex4\_1}{\coqdoclemma{ex4\_1}} `\{\coqdocclass{Univalence}\} (\coqdocvar{A} \coqdocvar{B} : \coqdockw{Type}) (\coqdocvar{f} : \coqdocvariable{A} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{B}) :\coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{B} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{h} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{g} \coqdocnotation{o} \coqdocvariable{f} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{e} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{f} \coqdocnotation{o} \coqdocvar{g} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}}\coqdoceol
\coqdocindent{2.00em}
\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} \coqdocvar{x}, \coqdocdefinition{ap} \coqdocvariable{f} (\coqdocvar{h} \coqdocvariable{x}) \coqdocnotation{=} \coqdocvar{e} (\coqdocvariable{f} \coqdocvariable{x})\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}} \coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} \coqdocvar{y}, \coqdocdefinition{ap} \coqdocvar{g} (\coqdocvar{e} \coqdocvariable{y}) \coqdocnotation{=} \coqdocvar{h} (\coqdocvar{g} \coqdocvariable{y})\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}\}\}}}\coqdoceol
\coqdocindent{1.00em}
\coqdocnotation{\ensuremath{\eqvsym}}\coqdoceol
\coqdocindent{1.00em}
\coqdockw{\ensuremath{\forall}} \coqdocvar{x} : \coqdocvariable{A}, @\coqdocconstructor{idpath} \coqdocvar{\_} \coqdocvariable{x} \coqdocnotation{=} @\coqdocconstructor{idpath} \coqdocvar{\_} \coqdocvariable{x}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{generalize} \coqdoctac{dependent} \coqdocvar{f}. \coqdoctac{generalize} \coqdoctac{dependent} \coqdocvar{B}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdoclemma{equiv\_rect}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdocvar{equiv\_via} (\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvar{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{h} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{g} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{e} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{g} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}}\coqdoceol
\coqdocindent{2.00em}
\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocvar{h} \coqdocnotation{\ensuremath{\sim}} \coqdocvar{e}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}} \coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocnotation{(}\coqdockw{fun} \coqdocvar{y} \ensuremath{\Rightarrow} \coqdocdefinition{ap} \coqdocvar{g} (\coqdocvar{e} \coqdocvariable{y})\coqdocnotation{)} \coqdocnotation{\ensuremath{\sim}} \coqdocnotation{(}\coqdockw{fun} \coqdocvar{y} \ensuremath{\Rightarrow} \coqdocvar{h} (\coqdocvar{g} \coqdocvariable{y})\coqdocnotation{)}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}\}\}}}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_functor\_sigma'} \coqdocvar{\_} \coqdocvar{\_}). \coqdoctac{apply} \coqdocdefinition{equiv\_idmap}. \coqdoctac{intro} \coqdocvar{g}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_functor\_sigma'} \coqdocvar{\_} \coqdocvar{\_}). \coqdoctac{apply} \coqdocdefinition{equiv\_idmap}. \coqdoctac{intro} \coqdocvar{h}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_functor\_sigma'} \coqdocvar{\_} \coqdocvar{\_}). \coqdoctac{apply} \coqdocdefinition{equiv\_idmap}. \coqdoctac{intro} \coqdocvar{e}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_functor\_prod'} \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_functor\_forall'} \coqdocvar{\_} \coqdocvar{\_}). \coqdoctac{apply} \coqdocdefinition{equiv\_idmap}. \coqdoctac{intro} \coqdocvar{b}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_adjointify} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{intro} \coqdocvar{eq}. \coqdoctac{apply} (\coqdocnotation{(}\coqdocdefinition{ap\_idmap} \coqdocvar{\_}\coqdocnotation{)\^{}} \coqdocnotation{@} \coqdocvar{eq}).\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{intro} \coqdocvar{eq}. \coqdoctac{apply} (\coqdocnotation{(}\coqdocdefinition{ap\_idmap} \coqdocvar{\_}\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{eq}).\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{intro} \coqdocvar{eq}. \coqdocvar{hott\_simpl}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{intro} \coqdocvar{eq}. \coqdocvar{hott\_simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{equiv\_idmap}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdocvar{equiv\_via} (\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvar{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{h} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{g} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{e} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{g} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}}\coqdoceol
\coqdocindent{1.50em}
\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocvar{h} \coqdocnotation{=} \coqdocvar{e}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocnotation{(}\coqdockw{fun} \coqdocvar{y} \ensuremath{\Rightarrow} \coqdocdefinition{ap} \coqdocvar{g} (\coqdocvar{e} \coqdocvariable{y})\coqdocnotation{)} \coqdocnotation{=} \coqdocnotation{(}\coqdockw{fun} \coqdocvar{y} \ensuremath{\Rightarrow} \coqdocvar{h} (\coqdocvar{g} \coqdocvariable{y})\coqdocnotation{)}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}\}\}}}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_functor\_sigma'} \coqdocvar{\_} \coqdocvar{\_}). \coqdoctac{apply} \coqdocdefinition{equiv\_idmap}. \coqdoctac{intro} \coqdocvar{g}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_functor\_sigma'} \coqdocvar{\_} \coqdocvar{\_}). \coqdoctac{apply} \coqdocdefinition{equiv\_idmap}. \coqdoctac{intro} \coqdocvar{h}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_functor\_sigma'} \coqdocvar{\_} \coqdocvar{\_}). \coqdoctac{apply} \coqdocdefinition{equiv\_idmap}. \coqdoctac{intro} \coqdocvar{e}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_functor\_prod'} \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{equiv\_path\_forall}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{equiv\_path\_forall}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdocvar{equiv\_via} (\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{h} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvar{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{g} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{e} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{h}\coqdocnotation{.1} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}}\coqdoceol
\coqdocindent{1.50em}
\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocvar{h}\coqdocnotation{.2} \coqdocnotation{=} \coqdocvar{e}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocnotation{(}\coqdockw{fun} \coqdocvar{y} \ensuremath{\Rightarrow} \coqdocdefinition{ap} \coqdocvar{h}\coqdocnotation{.1} (\coqdocvar{e} \coqdocvariable{y})\coqdocnotation{)} \coqdocnotation{=} \coqdocnotation{(}\coqdockw{fun} \coqdocvar{y} \ensuremath{\Rightarrow} \coqdocvar{h}\coqdocnotation{.2} (\coqdocvar{h}\coqdocnotation{.1} \coqdocvariable{y})\coqdocnotation{)}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}\}}}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_sigma\_assoc} \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdocvar{transparent} \coqdoctac{assert} (\coqdocvar{HC} : (\coqdocabbreviation{Contr} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvar{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{g} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{\ensuremath{\exists}} \coqdocnotation{(}\coqdocabbreviation{idmap}\coqdocnotation{;} \coqdocnotation{(}\coqdockw{fun} \coqdocvar{x} \ensuremath{\Rightarrow} 1\coqdocnotation{))}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{h}. \coqdoctac{destruct} \coqdocvar{h} \coqdockw{as} [\coqdocvar{g} \coqdocvar{h}].\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_sigma\_uncurried}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{\ensuremath{\exists}} (\coqdocdefinition{path\_forall} (\coqdockw{fun} \coqdocvar{x} : \coqdocvar{A} \ensuremath{\Rightarrow} \coqdocvariable{x}) \coqdocvar{g} (\coqdockw{fun} \coqdocvar{x} : \coqdocvar{A} \ensuremath{\Rightarrow} \coqdocnotation{(}\coqdocvar{h} \coqdocvariable{x}\coqdocnotation{)\^{}})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{unfold} \coqdocdefinition{pointwise\_paths}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{a}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocnotation{(}\coqdocdefinition{transport\_forall\_constant} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_}\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocnotation{(}\coqdoclemma{path\_forall\_1\_beta} \coqdocvar{\_} (\coqdockw{fun} \coqdocvar{z} \ensuremath{\Rightarrow} \coqdocvariable{z} \coqdocnotation{=} \coqdocvar{a}) \coqdocvar{\_} \coqdocvar{\_}\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocnotation{(}\coqdocdefinition{transport\_paths\_l} \coqdocvar{\_} \coqdocvar{\_}\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocnotation{(}\coqdocdefinition{concat\_p1} \coqdocvar{\_}\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{inv\_V}.\coqdoceol
\coqdocindent{1.00em}
\coqdocvar{equiv\_via} (\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{e} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocnotation{(}\coqdocmethod{center} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvar{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{g} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}\coqdocnotation{).1} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}}\coqdoceol
\coqdocindent{1.50em}
\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocnotation{(}\coqdocmethod{center} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvar{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{g} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}\coqdocnotation{).2} \coqdocnotation{=} \coqdocvar{e}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}} \coqdoceol
\coqdocindent{1.50em}
\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocnotation{(}\coqdockw{fun} \coqdocvar{y} \ensuremath{\Rightarrow} \coqdocdefinition{ap} \coqdocnotation{(}\coqdocmethod{center} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvar{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{g} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}\coqdocnotation{).1} (\coqdocvar{e} \coqdocvariable{y})\coqdocnotation{)} \coqdoceol
\coqdocindent{3.00em}
\coqdocnotation{=} \coqdocnotation{(}\coqdockw{fun} \coqdocvar{y} \ensuremath{\Rightarrow} \coqdocnotation{(}\coqdocmethod{center} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvar{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{g} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}\coqdocnotation{).2} \coqdoceol
\coqdocindent{10.50em}
(\coqdocnotation{(}\coqdocmethod{center} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvar{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{g} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}\coqdocnotation{).1} \coqdocvariable{y})\coqdocnotation{)}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdoclemma{equiv\_sigma\_contr\_base} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{simpl}. \coqdoctac{clear} \coqdocvar{H}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdocvar{equiv\_via} (\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{e} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocnotation{(}\coqdockw{fun} \coqdocvar{x} : \coqdocvar{A} \ensuremath{\Rightarrow} \coqdocvariable{x}\coqdocnotation{)} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdoceol
\coqdocindent{6.50em}
\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{p} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocnotation{(}\coqdockw{fun} \coqdocvar{x} \ensuremath{\Rightarrow} 1\coqdocnotation{)} \coqdocnotation{=} \coqdocvar{e} \coqdoceol
\coqdocindent{6.50em}
\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{(}}\coqdocnotation{(}\coqdockw{fun} \coqdocvar{y} : \coqdocvar{A} \ensuremath{\Rightarrow} \coqdocdefinition{ap} \coqdocabbreviation{idmap} (\coqdocvar{e} \coqdocvariable{y})\coqdocnotation{)} \coqdocnotation{=} \coqdocnotation{(}\coqdockw{fun} \coqdocvar{y} : \coqdocvar{A} \ensuremath{\Rightarrow} 1\coqdocnotation{)}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{)\}\}}}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_functor\_sigma'} \coqdocvar{\_} \coqdocvar{\_}). \coqdoctac{apply} \coqdocdefinition{equiv\_idmap}. \coqdoctac{intro} \coqdocvar{e}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_adjointify} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_}); \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{p}. \coqdoctac{apply} \coqdocnotation{(}\coqexternalref{fst}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocdefinition{fst}} \coqdocvar{p}\coqdocnotation{;} \coqexternalref{snd}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocdefinition{snd}} \coqdocvar{p}\coqdocnotation{)}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{p}. \coqdoctac{split}. \coqdoctac{apply} \coqdocvar{p}\coqdocnotation{.1}. \coqdoctac{apply} \coqdocvar{p}\coqdocnotation{.2}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{p}. \coqdoctac{simpl}. \coqdoctac{apply} \coqdocdefinition{eta\_sigma}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{p}. \coqdoctac{simpl}. \coqdoctac{apply} \coqdocdefinition{eta\_prod}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdocvar{equiv\_via} (\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{h} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{e} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocnotation{(}\coqdockw{fun} \coqdocvar{x}:\coqdocvar{A} \ensuremath{\Rightarrow} \coqdocvariable{x}\coqdocnotation{)} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocnotation{(}\coqdockw{fun} \coqdocvar{x} \ensuremath{\Rightarrow} 1\coqdocnotation{)} \coqdocnotation{=} \coqdocvar{e}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}} \coqdoceol
\coqdocindent{10.00em}
\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocnotation{(}\coqdockw{fun} \coqdocvar{y} : \coqdocvar{A} \ensuremath{\Rightarrow} \coqdocdefinition{ap} \coqdocabbreviation{idmap} (\coqdocvar{h}\coqdocnotation{.1} \coqdocvariable{y})\coqdocnotation{)} \coqdocnotation{=} \coqdocnotation{(}\coqdockw{fun} \coqdocvar{y} : \coqdocvar{A} \ensuremath{\Rightarrow} 1\coqdocnotation{)}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_sigma\_assoc} \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdocvar{equiv\_via} (\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{h} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{e} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocnotation{(}\coqdockw{fun} \coqdocvar{x}:\coqdocvar{A} \ensuremath{\Rightarrow} \coqdocvariable{x}\coqdocnotation{)} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocnotation{(}\coqdockw{fun} \coqdocvar{x} : \coqdocvar{A} \ensuremath{\Rightarrow} 1\coqdocnotation{)} \coqdocnotation{=} \coqdocvar{e}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}} \coqdoceol
\coqdocindent{10.00em}
\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocnotation{(}\coqdockw{fun} \coqdocvar{y} : \coqdocvar{A} \ensuremath{\Rightarrow} \coqdocvar{h}\coqdocnotation{.1} \coqdocvariable{y}\coqdocnotation{)} \coqdocnotation{=} \coqdocnotation{(}\coqdockw{fun} \coqdocvar{y} : \coqdocvar{A} \ensuremath{\Rightarrow} 1\coqdocnotation{)}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_functor\_sigma'} \coqdocvar{\_} \coqdocvar{\_}). \coqdoctac{apply} \coqdocdefinition{equiv\_idmap}. \coqdoctac{intro} \coqdocvar{e}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_adjointify} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_}); \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{eq}. \coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{a}. \coqdoctac{refine} (\coqdocvar{\_} \coqdocnotation{@} \coqdocnotation{(}\coqdocdefinition{apD10} \coqdocvar{eq} \coqdocvar{a}\coqdocnotation{)}).\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{apply} \coqdocnotation{(}\coqdocdefinition{ap\_idmap} \coqdocvar{\_}\coqdocnotation{)\^{}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{eq}. \coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{a}. \coqdoctac{refine} (\coqdocnotation{(}\coqdocdefinition{ap\_idmap} \coqdocvar{\_}\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}).\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{apply} (\coqdocdefinition{apD10} \coqdocvar{eq} \coqdocvar{a}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{eq}. \coqdoctac{refine} (\coqdocvar{\_} \coqdocnotation{@} \coqdocnotation{(}\coqdocdefinition{eta\_path\_forall} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_}\coqdocnotation{)}).\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{apply} (\coqdocdefinition{ap} (\coqdocdefinition{path\_forall} \coqdocvar{\_} \coqdocvar{\_})). \coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{a}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{apply} \coqdocdefinition{moveR\_Vp}. \coqdoctac{refine} (\coqdocnotation{(}\coqdocdefinition{apD10\_path\_forall} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{a}\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}).\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{reflexivity}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{eq}. \coqdoctac{refine} (\coqdocvar{\_} \coqdocnotation{@} \coqdocnotation{(}\coqdocdefinition{eta\_path\_forall} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_}\coqdocnotation{)}).\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{apply} (\coqdocdefinition{ap} (\coqdocdefinition{path\_forall} \coqdocvar{\_} \coqdocvar{\_})). \coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{a}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{apply} \coqdocdefinition{moveR\_Mp}. \coqdoctac{refine} (\coqdocnotation{(}\coqdocdefinition{apD10\_path\_forall} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{a}\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}).\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{reflexivity}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdocvar{equiv\_via} (\coqdocnotation{(}\coqdockw{fun} \coqdocvar{y} : \coqdocvar{A} \ensuremath{\Rightarrow} \coqdocnotation{(}\coqdocmethod{center} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{e} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocnotation{(}\coqdockw{fun} \coqdocvar{x}:\coqdocvar{A} \ensuremath{\Rightarrow} \coqdocvariable{x}\coqdocnotation{)} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocnotation{(}\coqdockw{fun} \coqdocvar{x} : \coqdocvar{A} \ensuremath{\Rightarrow} 1\coqdocnotation{)} \coqdocnotation{=} \coqdocvar{e}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}\coqdocnotation{).1} \coqdocvariable{y}\coqdocnotation{)} \coqdocnotation{=} \coqdocnotation{(}\coqdockw{fun} \coqdocvar{y} : \coqdocvar{A} \ensuremath{\Rightarrow} 1\coqdocnotation{)}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdoclemma{equiv\_sigma\_contr\_base} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdocconstructor{BuildEquiv} \coqdocvar{\_} \coqdocvar{\_} \coqdocdefinition{apD10} (\coqdocaxiom{isequiv\_apD10} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_})).\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
\exerdone{4.2}{147} 
Show that for any $A, B : \UU$, the following type is equivalent to $A \eqvsym
B$.
\[
  \sm{R : A \to B \to \UU}
  \left(\prd{a:A} \iscontr \left(\sm{b:B} R(a, b)\right)\right)
  \times
  \left(\prd{b:B} \iscontr \left(\sm{a:A} R(a, b)\right)\right).
\]
Extract from this a definition of a type satisfying the three desiderata of
$\isequiv(f)$.


 \soln
Suppose that this type is inhabited; by induction we may suppose that the
inhabitant breaks down into
\begin{align*}
  R &: A \to B \to \UU \\
  f &: \prd{a:A} \iscontr\left(\sm{b:B}R(a, b)\right) \\
  g &: \prd{b:B} \iscontr\left(\sm{a:A}R(a, b)\right)
\end{align*}
We have to construct an element $e : \eqv{A}{B}$.  For the forward map, suppose
that $a : A$.  Then
\[
  f(a) : \iscontr\left(\sm{b:B}R(a, b)\right)
\]
so there is some $(b, p) : \sm{b:B}R(a,b)$, and we set $e(a) \defeq b$.  For
the inverse, suppose that $b:B$.  Then $g(b) : \iscontr(\sm{a:A}R(a, b))$, so
there is some center $(a, p) : \sm{a:A}R(a,b)$, and we set $e^{-1}(b) \defeq
a$.  To prove that these are quasi-inverses, suppose that $a : A$.  Then $f(a)
: \iscontr(\sm{b:B}R(a,b))$, so the center is $(b, p) : \sm{b:B}R(a,b)$ and
$e(a) \equiv b$.  But then $g(e(a)) : \iscontr(\sm{a:A}R(a, b))$, and the
center of this is $(a', q) : \sm{a:A}R(a,b)$, so $e^{-1}(e(a)) = a'$.  But
now we have $(a, p) : \sm{a:A}R(a, b)$, and since this type is contractible we
have $(a, q) = (a', p)$, hence $e^{-1}(e(a)) = a' = a$.  The other direction
goes just the same way.


For the other direction, suppose that $e : \eqv{A}{B}$, and consider the
relation $R \defeq \lam{a}{b}(e(a) = b) : A \to B \to \UU$.  For any $a : A$,
$\sm{b:B}(e(a) = b)$ is contractible by Lemma 3.11.8.  For any $b:B$,
$\sm{a:A}(e(a) = b)$ is equivalent to $\sm{a:A}(e^{-1}(b) = a)$, and this is
also contractible by Lemma 3.11.8.  So we have an element of the type above.


To show that these are quasi-inverses, let $e : \eqv{A}{B}$, and take it once
around the loop to get an equivalence with underlying map $e : A \to B$.  Since
an equivalence is determined by its underlying map, we're back where we
started.  For the other direction, suppose that we have an element of the type
in the problem statement, and take it once around the loop.  Since
contractibility is a mere proposition and products preserve these, it suffices
to show that the first components are equal, or that $(b' = b) = R(a, b)$ for
$b'$ the center of $\sm{b:B}R(a, b)$.  By univalence it suffices to show that
these are equivalent, and since they are mere propositions it suffices to show
that they logically imply one another.  Transport gives us the first
direction, and the other is given by the contractibility of $\sm{b:B}R(a, b)$.
So we've established an equivalence.


For $f : A \to B$, define 
\[
  \isequiv'(f) \defeq
  \left(\prd{a:A}\iscontr\left(\sm{b:B}(f(a) = b)\right)\right)
  \times
  \left(\prd{b:B}\iscontr\left(\sm{a:A}(f(a) = b)\right)\right)
\]
To show that desideratum (i) is satisfied, suppose that $p : \qinv(f)$.  Then
$\isequiv(f)$ is inhabited, so $\eqv{A}{B}$ is as well.  But then the
equivalence just established gives us an element whose second entry is an
element of $\isequiv'(f)$.  So we have an arrow $\qinv(f) \to \isequiv'(f)$.
For the other direction, suppose that we have an element $p : \isequiv'(f)$.
Then $\lam{a}{b}(f(a) = b)$ gives us an element that our equivalence takes to
$\eqv{A}{B}$, and the second element of this is of type $\isequiv(f)$.  But
then we have $\isequiv(f) \to \qinv(f)$, so our desideratum is satisfied.
Finally, $\isequiv'(f)$ is constructed out of products of mere propositions, so
it too is a mere proposition.
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch04.equiv to contr rel equiv}{equiv\_to\_contr\_rel\_equiv}{\coqdocdefinition{equiv\_to\_contr\_rel\_equiv}} (\coqdocvar{A} \coqdocvar{B} : \coqdockw{Type}) :\coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdocvariable{A} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{B}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}}\coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}}\coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{R} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{Type} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} \coqdocvar{a}, \coqdocabbreviation{Contr} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{b} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{B} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{R} \coqdocvariable{a} \coqdocvar{b}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}}\coqdoceol
\coqdocindent{11.00em}
\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} \coqdocvar{b}, \coqdocabbreviation{Contr} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{a} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{R} \coqdocvar{a} \coqdocvariable{b}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{e}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{\ensuremath{\exists}} (\coqdockw{fun} \coqdocvar{a} \coqdocvar{b} \ensuremath{\Rightarrow} (\coqdocvar{e} \coqdocvariable{a} \coqdocnotation{=} \coqdocvariable{b})). \coqdoctac{split}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{a}. \coqdoctac{apply} \coqdocinstance{contr\_basedpaths}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{b}. \coqdoctac{refine} (@\coqdocdefinition{contr\_equiv'} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{a} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{e}\coqdocnotation{\ensuremath{^{-1}}} \coqdocvar{b} \coqdocnotation{=} \coqdocvar{a}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_functor\_sigma'} \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{equiv\_idmap}. \coqdoctac{intro} \coqdocvar{a}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_adjointify} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{eq}. \coqdoctac{refine} (\coqdocvar{\_} \coqdocnotation{@} \coqdocnotation{(}\coqdocmethod{eisretr} \coqdocvar{e} \coqdocvar{b}\coqdocnotation{)}). \coqdoctac{apply} (\coqdocdefinition{ap} \coqdocvar{e}). \coqdoctac{apply} \coqdocvar{eq}\coqdocnotation{\^{}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{eq}. \coqdoctac{refine} (\coqdocvar{\_} \coqdocnotation{@} \coqdocnotation{(}\coqdocmethod{eissect} \coqdocvar{e} \coqdocvar{a}\coqdocnotation{)}). \coqdoctac{apply} (\coqdocdefinition{ap} \coqdocvar{e}\coqdocnotation{\ensuremath{^{-1}}}). \coqdoctac{apply} \coqdocvar{eq}\coqdocnotation{\^{}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{eq}. \coqdoctac{induction} \coqdocvar{eq}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{moveR\_pM}. \coqdoctac{refine} (\coqdocvar{\_} \coqdocnotation{@} \coqdocnotation{(}\coqdocdefinition{concat\_1p} \coqdocvar{\_}\coqdocnotation{)\^{}}). \coqdoctac{refine} (\coqdocnotation{(}\coqdocdefinition{ap\_V} \coqdocvar{\_} \coqdocvar{\_}\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{inverse2}. \coqdoctac{refine} (\coqdocnotation{(}\coqdocdefinition{ap\_pp} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_}\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{moveR\_pM}. \coqdoctac{refine} (\coqdocnotation{(}\coqdocdefinition{ap\_1} \coqdocvar{\_} \coqdocvar{\_} \coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}). \coqdoctac{apply} \coqdocdefinition{moveL\_pV}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocnotation{(}\coqdocdefinition{concat\_1p} \coqdocvar{\_}\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}). \coqdoctac{apply} \coqdocnotation{(}\coqdocmethod{eisadj} \coqdocvar{e} \coqdocvar{a}\coqdocnotation{)\^{}}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{eq}. \coqdoctac{induction} \coqdocvar{eq}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{moveR\_pM}. \coqdoctac{refine} (\coqdocnotation{(}\coqdocdefinition{ap\_V} \coqdocvar{\_} \coqdocvar{\_}\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}). \coqdoctac{refine} (\coqdocvar{\_} \coqdocnotation{@} \coqdocnotation{(}\coqdocdefinition{concat\_1p} \coqdocvar{\_}\coqdocnotation{)\^{}}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{inverse2}. \coqdoctac{refine} (\coqdocnotation{(}\coqdocdefinition{ap\_pp} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_}\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}). \coqdoctac{apply} \coqdocdefinition{moveR\_pM}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocnotation{(}\coqdocdefinition{ap\_1} \coqdocvar{\_} \coqdocvar{\_}\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}). \coqdoctac{apply} \coqdocdefinition{moveL\_pV}. \coqdoctac{refine} (\coqdocnotation{(}\coqdocdefinition{concat\_1p} \coqdocvar{\_}\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocnotation{(}\coqdoclemma{other\_adj} \coqdocvar{\_}\coqdocnotation{)\^{}}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch04.isequiv equiv to contr rel equiv}{isequiv\_equiv\_to\_contr\_rel\_equiv}{\coqdoclemma{isequiv\_equiv\_to\_contr\_rel\_equiv}} `\{\coqdocclass{Univalence}\} (\coqdocvar{A} \coqdocvar{B} : \coqdockw{Type}) :\coqdoceol
\coqdocindent{1.00em}
\coqdocclass{IsEquiv} (\coqref{Ch04.equiv to contr rel equiv}{\coqdocdefinition{equiv\_to\_contr\_rel\_equiv}} \coqdocvariable{A} \coqdocvariable{B}).\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{isequiv\_adjointify} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{R}. \coqdoctac{destruct} \coqdocvar{R} \coqdockw{as} [\coqdocvar{R} [\coqdocvar{f} \coqdocvar{g}]].\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_adjointify} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{a}. \coqdoctac{apply} \coqdocnotation{(}\coqdocmethod{center} \coqdocvar{\_} (\coqdocvar{f} \coqdocvar{a})\coqdocnotation{).1}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{b}. \coqdoctac{apply} \coqdocnotation{(}\coqdocmethod{center} \coqdocvar{\_} (\coqdocvar{g} \coqdocvar{b})\coqdocnotation{).1}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{b}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} (\coqdocmethod{center} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{a} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{R} \coqdocvar{a} \coqdocvar{b}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}) \coqdockw{as} [\coqdocvar{a} \coqdocvar{p}]. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} (\coqdocmethod{center} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{b0} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{B} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{R} \coqdocvar{a} \coqdocvar{b0}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}) \coqdockw{as} [\coqdocvar{b'} \coqdocvar{q}]. \coqdoctac{change} \coqdocvar{b} \coqdockw{with} \coqdocnotation{(}\coqdocvar{b}\coqdocnotation{;} \coqdocvar{p}\coqdocnotation{)}\coqdocnotation{.1}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdocdefinition{ap} \coqdocabbreviation{pr1}). \coqdoctac{apply} \coqdoclemma{allpath\_hprop}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{a}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} (\coqdocmethod{center} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{b} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{B} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{R} \coqdocvar{a} \coqdocvar{b}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}) \coqdockw{as} [\coqdocvar{b} \coqdocvar{q}]. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} (\coqdocmethod{center} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{a0} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{R} \coqdocvar{a0} \coqdocvar{b}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}) \coqdockw{as} [\coqdocvar{a'} \coqdocvar{p}].\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} \coqdocvar{a} \coqdockw{with} (@\coqdocabbreviation{pr1} \coqdocvar{\_} (\coqdockw{fun} \coqdocvar{a'} \ensuremath{\Rightarrow} \coqdocvar{R} \coqdocvariable{a'} \coqdocvar{b}) \coqdocnotation{(}\coqdocvar{a}\coqdocnotation{;} \coqdocvar{q}\coqdocnotation{)}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdocdefinition{ap} \coqdocabbreviation{pr1}). \coqdoctac{apply} \coqdoclemma{allpath\_hprop}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{R}. \coqdoctac{apply} \coqdocdefinition{path\_sigma\_hprop}. \coqdoctac{destruct} \coqdocvar{R} \coqdockw{as} [\coqdocvar{R} [\coqdocvar{f} \coqdocvar{g}]]. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{a}. \coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{b}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} (\coqdocmethod{center} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{b0} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{B} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{R} \coqdocvar{a} \coqdocvar{b0}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}) \coqdockw{as} [\coqdocvar{b'} \coqdocvar{p}]. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_universe\_uncurried}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_adjointify} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{eq}. \coqdoctac{apply} (\coqdocdefinition{transport} \coqdocvar{\_} \coqdocvar{eq}). \coqdoctac{apply} \coqdocvar{p}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{q}. \coqdoctac{change} \coqdocvar{b} \coqdockw{with} \coqdocnotation{(}\coqdocvar{b}\coqdocnotation{;} \coqdocvar{q}\coqdocnotation{)}\coqdocnotation{.1}. \coqdoctac{change} \coqdocvar{b'} \coqdockw{with} \coqdocnotation{(}\coqdocvar{b'}\coqdocnotation{;} \coqdocvar{p}\coqdocnotation{)}\coqdocnotation{.1}. \coqdoctac{apply} (\coqdocdefinition{ap} \coqdocabbreviation{pr1}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{path\_contr} \coqdocvar{\_} \coqdocvar{\_}). \coqdoctac{apply} (\coqdocvar{f} \coqdocvar{a}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{q}. \coqdoctac{refine} (\coqdocnotation{(}\coqdocdefinition{fiber\_path} (\coqdocdefinition{path\_contr} \coqdocnotation{(}\coqdocvar{b'}\coqdocnotation{;} \coqdocvar{p}\coqdocnotation{)} \coqdocnotation{(}\coqdocvar{b}\coqdocnotation{;} \coqdocvar{q}\coqdocnotation{)})\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}). \coqdoctac{reflexivity}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{eq}. \coqdoctac{induction} \coqdocvar{eq}. \coqdoctac{simpl}. \coqdoctac{refine} (\coqdocvar{\_} \coqdocnotation{@} \coqdocnotation{(}\coqdocdefinition{ap\_1} \coqdocvar{\_} \coqdocvar{\_}\coqdocnotation{)}). \coqdocvar{f\_ap}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{path\_contr} \coqdocvar{\_} \coqdocvar{\_}). \coqdoctac{refine} (\coqdocinstance{contr\_paths\_contr} \coqdocvar{\_} \coqdocvar{\_}). \coqdoctac{apply} (\coqdocvar{f} \coqdocvar{a}).\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{e}. \coqdoctac{simpl}. \coqdoctac{apply} \coqdocdefinition{path\_equiv}. \coqdoctac{simpl}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch04.qinv}{qinv}{\coqdocdefinition{qinv}} \{\coqdocvar{A} \coqdocvar{B} : \coqdockw{Type}\} (\coqdocvar{f} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B}) :=\coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{g} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{B} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocvariable{f} \coqdocnotation{o} \coqdocvar{g} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocvar{g} \coqdocnotation{o} \coqdocvariable{f} \coqdocnotation{\ensuremath{\sim}} \coqdocabbreviation{idmap}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch04.qinv isequiv}{qinv\_isequiv}{\coqdocdefinition{qinv\_isequiv}} \coqdocvar{A} \coqdocvar{B} (\coqdocvar{f} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B}) (\coqdocvar{p} : \coqref{Ch04.qinv}{\coqdocdefinition{qinv}} \coqdocvariable{f}) : \coqdocclass{IsEquiv} \coqdocvariable{f}\coqdoceol
\coqdocindent{1.00em}
:= \coqdocdefinition{isequiv\_adjointify} \coqdocvariable{f} \coqdocvariable{p}\coqdocnotation{.1} (\coqexternalref{fst}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocdefinition{fst}} \coqdocvariable{p}\coqdocnotation{.2}) (\coqexternalref{snd}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocdefinition{snd}} \coqdocvariable{p}\coqdocnotation{.2}).\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch04.isequiv qinv}{isequiv\_qinv}{\coqdocdefinition{isequiv\_qinv}} : \coqdockw{\ensuremath{\forall}} \coqdocvar{A} \coqdocvar{B} (\coqdocvar{f} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B}), \coqdocclass{IsEquiv} \coqdocvariable{f} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqref{Ch04.qinv}{\coqdocdefinition{qinv}} \coqdocvariable{f}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros} \coqdocvar{A} \coqdocvar{B} \coqdocvar{f} \coqdocvar{p}. \coqdoctac{destruct} \coqdocvar{p}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{\ensuremath{\exists}} \coqdocvar{equiv\_inv}. \coqdoctac{split}. \coqdoctac{apply} \coqdocvar{eisretr}. \coqdoctac{apply} \coqdocvar{eissect}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch04.isequiv'}{isequiv'}{\coqdocdefinition{isequiv'}} \{\coqdocvar{A} \coqdocvar{B}\} (\coqdocvar{f} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B}) :=\coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} \coqdocvar{a}, \coqdocabbreviation{Contr} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{b} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{B} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{f} \coqdocvariable{a} \coqdocnotation{=} \coqdocvar{b}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} \coqdocvar{b}, \coqdocabbreviation{Contr} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{a} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvariable{f} \coqdocvar{a} \coqdocnotation{=} \coqdocvariable{b}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}\coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch04.ex4 2 i}{ex4\_2\_i}{\coqdoclemma{ex4\_2\_i}} \coqdocvar{A} \coqdocvar{B} (\coqdocvar{f} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B}) : \coqref{Ch04.qinv}{\coqdocdefinition{qinv}} \coqdocvariable{f} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqref{Ch04.isequiv'}{\coqdocdefinition{isequiv'}} \coqdocvariable{f}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{p}. \coqdoctac{apply} \coqref{Ch04.qinv isequiv}{\coqdocdefinition{qinv\_isequiv}} \coqdoctac{in} \coqdocvar{p}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{set} (\coqdocvar{Hf} := \coqdocconstructor{BuildEquiv} \coqdocvar{A} \coqdocvar{B} \coqdocvar{f} \coqdocvar{p}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{set} (\coqdocvar{HR} := \coqref{Ch04.equiv to contr rel equiv}{\coqdocdefinition{equiv\_to\_contr\_rel\_equiv}} \coqdocvar{A} \coqdocvar{B} \coqdocvar{Hf}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{set} (\coqdocvar{R} := \coqdocabbreviation{pr1} \coqdocvar{HR}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{set} (\coqdocvar{Q} := \coqdocabbreviation{pr2} \coqdocvar{HR}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{split}. \coqdoctac{apply} (\coqexternalref{fst}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocdefinition{fst}} \coqdocvar{Q}). \coqdoctac{apply} (\coqexternalref{snd}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocdefinition{snd}} \coqdocvar{Q}).\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch04.ex4 2 ii}{ex4\_2\_ii}{\coqdoclemma{ex4\_2\_ii}} \coqdocvar{A} \coqdocvar{B} (\coqdocvar{f} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B}) : \coqref{Ch04.isequiv'}{\coqdocdefinition{isequiv'}} \coqdocvariable{f} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqref{Ch04.qinv}{\coqdocdefinition{qinv}} \coqdocvariable{f}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{p}. \coqdoctac{destruct} \coqdocvar{p} \coqdockw{as} [\coqdocvar{sect} \coqdocvar{retr}].\coqdoceol
\coqdocindent{1.00em}
\coqdocvar{transparent} \coqdoctac{assert} (\coqdocvar{g} : (\coqdocvar{B} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvar{A})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{b}. \coqdoctac{destruct} (\coqdocvar{retr} \coqdocvar{b}). \coqdoctac{apply} \coqdocvar{center}\coqdocnotation{.1}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{\ensuremath{\exists}} \coqdocvar{g}. \coqdoctac{split}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{unfold} \coqdocdefinition{compose}, \coqdocvar{g}. \coqdoctac{intro} \coqdocvar{b}. \coqdoctac{destruct} (\coqdocvar{retr} \coqdocvar{b}). \coqdoctac{apply} \coqdocvar{center}\coqdocnotation{.2}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{unfold} \coqdocdefinition{compose}, \coqdocvar{g}. \coqdoctac{intro} \coqdocvar{a}. \coqdoctac{destruct} (\coqdocvar{retr} (\coqdocvar{f} \coqdocvar{a})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} \coqdocvar{a} \coqdockw{with} \coqdocnotation{(}\coqdocvar{a}\coqdocnotation{;} 1\coqdocnotation{)}\coqdocnotation{.1}. \coqdoctac{apply} (\coqdocdefinition{ap} \coqdocabbreviation{pr1} (\coqdocvar{contr} \coqdocnotation{(}\coqdocvar{a}\coqdocnotation{;} 1\coqdocnotation{)})).\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Lemma} \coqdef{Ch04.hprop prod}{hprop\_prod}{\coqdoclemma{hprop\_prod}} : \coqdockw{\ensuremath{\forall}} \coqdocvar{A}, \coqdocabbreviation{IsHProp} \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdockw{\ensuremath{\forall}} \coqdocvar{B}, \coqdocabbreviation{IsHProp} \coqdocvariable{B} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocabbreviation{IsHProp} (\coqdocvariable{A} \coqexternalref{:type scope:x '*' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\times}}} \coqdocvariable{B}).\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros} \coqdocvar{A} \coqdocvar{HA} \coqdocvar{B} \coqdocvar{HB} \coqdocvar{z} \coqdocvar{z'}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdocdefinition{trunc\_equiv} (\coqdocdefinition{equiv\_path\_prod} \coqdocvar{z} \coqdocvar{z'})).\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch04.ex4 2 iii}{ex4\_2\_iii}{\coqdoclemma{ex4\_2\_iii}} \coqdocvar{A} \coqdocvar{B} (\coqdocvar{f} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B}) : \coqdocabbreviation{IsHProp} (\coqref{Ch04.isequiv'}{\coqdocdefinition{isequiv'}} \coqdocvariable{f}).\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{unfold} \coqref{Ch04.isequiv'}{\coqdocdefinition{isequiv'}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqref{Ch04.hprop prod}{\coqdoclemma{hprop\_prod}}; \coqdoctac{apply} \coqdoclemma{hprop\_dependent}; \coqdoctac{intro}; \coqdoctac{apply} \coqdocinstance{hprop\_contr}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
\exer{4.3}{147} 
Reformulate the proof of Lemma 4.1.1 without using univalence.


 \exer{4.4}{147} 
Suppose $f : A \to B$ and $g : B \to C$ and $b : B$.
\begin{itemize}
  \item[(i)] Show that there is a natural map $\hfib{g \circ f}{g(b)} \to
      \hfib{g}{g(b)}$ whose fiber over $(b, \refl{g(b)})$ is equivalent to
      $\hfib{f}{b}$.
  \item[(ii)] Show that $\hfib{g \circ f}{g(b)} \eqvsym \sm{w:\hfib{g}{g(b)}}
      \hfib{f}{\fst w}$.
\end{itemize}


 \soln
(i) Unfolding the $\mathsf{fib}$ notation, we are looking for a map
\[
  \left(\sm{a:A} (g(f(a)) = g(b))\right) \to
  \left(\sm{b':B} (g(b') = g(b))\right)
\]
The obvious choice is $f^{*} \defeq (a, p) \mapsto (f(a), p)$.  We then must
show that $\hfib{f^{*}}{b, \refl{g(b)}} \eqvsym \hfib{f}{b}$.  Unfolding the
notation again, we're looking for an equivalence
\[
  \left(\sm{w:\hfib{g \circ f}{g(b)}} (f^{*}(w) = (b, \refl{g(b)}))\right)
  \eqvsym
  \left(\sm{a:A} (f(a) = b)\right)
\]


\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Section} \coqdef{Ch04.Exercise4 4}{Exercise4\_4}{\coqdocsection{Exercise4\_4}}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Variables} (\coqdef{Ch04.Exercise4 4.A}{A}{\coqdocvariable{A}} \coqdef{Ch04.Exercise4 4.B}{B}{\coqdocvariable{B}} \coqdef{Ch04.Exercise4 4.C}{C}{\coqdocvariable{C}} \coqdef{Ch04.Exercise4 4.D}{D}{\coqdocvariable{D}} : \coqdockw{Type}) (\coqdef{Ch04.Exercise4 4.f}{f}{\coqdocvariable{f}} : \coqdocvar{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvar{B}) (\coqdef{Ch04.Exercise4 4.g}{g}{\coqdocvariable{g}} : \coqdocvar{B} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvar{C}) (\coqdef{Ch04.Exercise4 4.b}{b}{\coqdocvariable{b}} : \coqdocvar{B}).\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch04.f star}{f\_star}{\coqdocdefinition{f\_star}} (\coqdocvar{z} : ((\coqdocdefinition{hfiber} (\coqdocvariable{g} \coqdocnotation{o} \coqdocvariable{f}) (\coqdocvariable{g} \coqdocvariable{b})))) : (\coqdocdefinition{hfiber} \coqdocvariable{g} (\coqdocvariable{g} \coqdocvariable{b})) := \coqdoceol
\coqdocindent{1.00em}
\coqdocnotation{(}\coqdocvariable{f} \coqdocvariable{z}\coqdocnotation{.1}\coqdocnotation{;} \coqdocvariable{z}\coqdocnotation{.2}\coqdocnotation{)}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch04.ex4 4}{ex4\_4}{\coqdoclemma{ex4\_4}} : \coqdocnotation{(}\coqdocdefinition{hfiber} (\coqref{Ch04.f star}{\coqdocdefinition{f\_star}}) \coqdocnotation{(}\coqdocvariable{b}\coqdocnotation{;} 1\coqdocnotation{)}\coqdocnotation{)} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocnotation{(}\coqdocdefinition{hfiber} \coqdocvariable{f} \coqdocvariable{b}\coqdocnotation{)}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_adjointify} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\begin{coqdoccomment}
\coqdocindent{0.50em}
forward\coqdocindent{0.50em}
\end{coqdoccomment}
\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{w}. \coqdoctac{destruct} \coqdocvar{w} \coqdockw{as} [[\coqdocvar{a} \coqdocvar{q}] \coqdocvar{p}]. \coqdoctac{\ensuremath{\exists}} \coqdocvar{a}. \coqdoctac{apply} (\coqdocdefinition{ap} \coqdocabbreviation{pr1} \coqdocvar{p}).\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\begin{coqdoccomment}
\coqdocindent{0.50em}
back\coqdocindent{0.50em}
\end{coqdoccomment}
\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{w}. \coqdoctac{destruct} \coqdocvar{w} \coqdockw{as} [\coqdocvar{a} \coqdocvar{p}].\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{\ensuremath{\exists}} \coqdocnotation{(}\coqdocvar{a}\coqdocnotation{;} \coqdocdefinition{ap} \coqdocvariable{g} \coqdocvar{p}\coqdocnotation{)}. \coqdoctac{unfold} \coqref{Ch04.f star}{\coqdocdefinition{f\_star}}. \coqdoctac{simpl}. \coqdoctac{induction} \coqdocvar{p}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\begin{coqdoccomment}
\coqdocindent{0.50em}
section\coqdocindent{0.50em}
\end{coqdoccomment}
\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{w}. \coqdoctac{destruct} \coqdocvar{w} \coqdockw{as} [\coqdocvar{a} \coqdocvar{p}].\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_sigma\_uncurried}. \coqdoctac{\ensuremath{\exists}} 1. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{unfold} \coqref{Ch04.f star}{\coqdocdefinition{f\_star}}. \coqdoctac{induction} \coqdocvar{p}. \coqdoctac{reflexivity}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\begin{coqdoccomment}
\coqdocindent{0.50em}
retract\coqdocindent{0.50em}
\end{coqdoccomment}
\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{w}. \coqdoctac{destruct} \coqdocvar{w} \coqdockw{as} [[\coqdocvar{a} \coqdocvar{q}] \coqdocvar{p}].\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_sigma\_uncurried}. \coqdoctac{simpl}. \coqdoctac{unfold} \coqref{Ch04.f star}{\coqdocdefinition{f\_star}}, \coqdocdefinition{compose} \coqdoctac{in} *. \coqdoctac{simpl} \coqdoctac{in} *.\coqdoceol
\coqdocindent{1.00em}
\coqdocvar{transparent} \coqdoctac{assert} (\coqdocvar{r} : (\coqdoceol
\coqdocindent{2.00em}
\coqdocnotation{(}\coqexternalref{existT}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocabbreviation{existT}} (\coqdockw{fun} \coqdocvar{a} \ensuremath{\Rightarrow} \coqdocvariable{g} (\coqdocvariable{f} \coqdocvariable{a}) \coqdocnotation{=} \coqdocvariable{g} \coqdocvariable{b}) \coqdocvar{a} (\coqdocdefinition{ap} \coqdocvariable{g} (\coqdocdefinition{ap} \coqdocabbreviation{pr1} \coqdocvar{p}))\coqdocnotation{)} \coqdocnotation{=} \coqdocnotation{(}\coqdocvar{a}\coqdocnotation{;} \coqdocvar{q}\coqdocnotation{)}\coqdoceol
\coqdocindent{1.00em}
)).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_sigma\_uncurried}. \coqdoctac{\ensuremath{\exists}} 1. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocvar{\_} \coqdocnotation{@} \coqdocnotation{(}\coqdocdefinition{fiber\_path} \coqdocvar{p}\coqdocnotation{\^{}}\coqdocnotation{)}). \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocvar{\_} \coqdocnotation{@} \coqdocnotation{(}\coqdocdefinition{transport\_paths\_Fl} \coqdocvar{\_} \coqdocvar{\_}\coqdocnotation{)\^{}}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocvar{\_} \coqdocnotation{@} \coqdocnotation{(}\coqdocdefinition{concat\_p1} \coqdocvar{\_}\coqdocnotation{)\^{}}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocvar{\_} \coqdocnotation{@} \coqdocnotation{(}\coqdocdefinition{ap\_V} \coqdocvar{\_} \coqdocvar{\_}\coqdocnotation{)}). \coqdoctac{apply} (\coqdocdefinition{ap} (\coqdocdefinition{ap} \coqdocvariable{g})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocvar{\_} \coqdocnotation{@} \coqdocnotation{(}\coqdocdefinition{ap\_V} \coqdocvar{\_} (\coqdocvar{p}\coqdocnotation{\^{}})\coqdocnotation{)}). \coqdoctac{apply} (\coqdocdefinition{ap} (\coqdocdefinition{ap} \coqdocabbreviation{pr1})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocnotation{(}\coqdocdefinition{inv\_V} \coqdocvar{\_}\coqdocnotation{)\^{}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{\ensuremath{\exists}} \coqdocvar{r}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocnotation{(}\coqdocdefinition{transport\_paths\_Fl} \coqdocvar{r} \coqdocvar{\_}\coqdocnotation{)} \coqdocnotation{@} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdocvar{admit}.\coqdoceol
\coqdocnoindent
\coqdocvar{Admitted}.\coqdoceol
\coqdocemptyline
\coqdocemptyline
\coqdocnoindent
\coqdockw{End} \coqref{Ch04.Exercise4 4}{\coqdocsection{Exercise4\_4}}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
\exerdone{4.5}{147} 
Prove that equivalences satisfy the \textit{2-out-of-6 property}: given $f : A \to B$
and $g : B \to C$ and $h : C \to D$, if $g \circ f$ and $h \circ g$ are
equivalences, so are $f$, $g$, $h$, and $h \circ g \circ f$.  Use this to give
a higher-level proof of Theorem 2.11.1.


 \soln
Suppose that $g \circ f$ and $h \circ g$ are equivalences.



\begin{itemize}
\item  $f$ is an equivalence with quasi-inverse $(g \circ f)^{-1} \circ g$.  It's a
   retract because
   \begin{align*}
     f \circ (g \circ f)^{-1} \circ g
     &\sim
     (h \circ g)^{-1} \circ (h \circ g) \circ f \circ (g \circ f)^{-1} \circ g
     \\&\sim
     (h \circ g)^{-1} \circ h \circ g
     \\&\sim
     \idfunc{B}
   \end{align*}
   and a section because $(g \circ f)^{-1} \circ g \circ f \sim \idfunc{A}$.



\item  $g$ is an equivalence with quasi-inverse $(h \circ g)^{-1} \circ h$.  First
   we have
   \begin{align*}
     g \circ (h \circ g)^{-1} \circ h
     &\sim
     g \circ (h \circ g)^{-1} \circ h \circ g \circ f \circ (g \circ f)^{-1}
     \\&\sim
     g \circ f \circ (g \circ f)^{-1}
     \\&\sim
     \idfunc{C}
   \end{align*}
   and second $(h \circ g)^{-1} \circ h \circ g \sim \idfunc{B}$.



\item  $h$ is an equivalence with quasi-inverse $g \circ (h \circ g)^{-1}$.  First,
   $h \circ g \circ (h \circ g)^{-1} \sim \idfunc{D}$, and we have
   $g \circ (h \circ g)^{-1} \circ h \sim \idfunc{C}$ by the previous part.



\item  $h \circ g \circ f$ is an equivalence with quasi-inverse $f^{-1} \circ (h
   \circ g)^{-1}$.  Both directions are immediate:
   \begin{align*}
     h \circ g \circ f \circ f^{-1} \circ (h \circ g)^{-1} &\sim \idfunc{D} \\
     f^{-1} \circ (h \circ g)^{-1} \circ h \circ g \circ f &\sim \idfunc{A}
   \end{align*}

\end{itemize}




Now we must give a higher-level proof that if $f : A \to B$ is an equivalence,
then for all $a, a' : A$ so is $\mapfunc{f}$.  This uses the following
somewhat obvious fact, which I don't recall seeing in the text or proving yet:
if $f : A \to B$ is an equivalence and $f \sim g$, then $g$ is an equivalence.
For any $a : A$ we have $f^{-1}(g(a)) = f^{-1}(f(a)) = a$
and for any $b : B$, $g(f^{-1}(b)) = f(f^{-1}(b)) = b$, giving $\isequiv(g)$.


Consider the sequence
\[
   \left(a = a'\right) \xrightarrow{\mapfunc{f}} 
   \left(f(a) = f(a')\right) \xrightarrow{\mapfunc{f^{-1}}} 
   \left(f^{-1}(f(a)) = f^{-1}(f(a'))\right) \xrightarrow{\mapfunc{f}} 
   \left(f(f^{-1}(f(a))) = f(f^{-1}(f(a')))\right)
\]
Since $f$ is an equivalence, we have
\[
  \alpha : \prd{b:B} f(f^{-1}(b)) = b
  \qquad\qquad
  \beta : \prd{a:A} f^{-1}(f(a)) = a
\]
For all $p : a = a'$, 
$\mapfunc{f^{-1}}(\mapfunc{f}(p)) = \beta_{a} \ct p \ct \beta_{a'}^{-1}$, 
which follows from the functorality of $\mapfunc{}$ and the naturality of
homotopies (Lemmas 2.2.2 and 2.4.3).  In other words, the composition of the
first two arrows is homotopic to concatenating with $\beta$ on either side,
which is obviously an equivalence.  Similarly, the composition of the second
two arrows is homotopic to concatenating with the appropriate $\alpha$ on
either side, again an obvious equivalence.  So by the 2-out-of-6 property, the
first arrow is an equivalence, which was to be proved.
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch04.two out of six}{two\_out\_of\_six}{\coqdoclemma{two\_out\_of\_six}} \{\coqdocvar{A} \coqdocvar{B} \coqdocvar{C} \coqdocvar{D} : \coqdockw{Type}\} (\coqdocvar{f} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B}) (\coqdocvar{g} : \coqdocvariable{B} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{C}) (\coqdocvar{h} : \coqdocvariable{C} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{D}) :\coqdoceol
\coqdocindent{1.00em}
\coqdocclass{IsEquiv} (\coqdocvariable{g} \coqdocnotation{o} \coqdocvariable{f}) \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocclass{IsEquiv} (\coqdocvariable{h} \coqdocnotation{o} \coqdocvariable{g}) \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}}\coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdocclass{IsEquiv} \coqdocvariable{f} \coqexternalref{:type scope:x '/x5C' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\land}}} \coqdocclass{IsEquiv} \coqdocvariable{g} \coqexternalref{:type scope:x '/x5C' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\land}}} \coqdocclass{IsEquiv} \coqdocvariable{h} \coqexternalref{:type scope:x '/x5C' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{\ensuremath{\land}}} \coqdocclass{IsEquiv} (\coqdocvariable{h} \coqdocnotation{o} \coqdocvariable{g} \coqdocnotation{o} \coqdocvariable{f})\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros} \coqdocvar{Hgf} \coqdocvar{Hhg}. \coqdoctac{split}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\begin{coqdoccomment}
\coqdocindent{0.50em}
case\coqdocindent{0.50em}
f\coqdocindent{0.50em}
\end{coqdoccomment}
\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{isequiv\_adjointify} \coqdocvar{f} (\coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{g}) \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{b}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} (\coqdocvar{f} ((\coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{g}) \coqdocvar{b})) \coqdockw{with} ((\coqdocvar{f} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{g}) \coqdocvar{b}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{assert} ((\coqdocvar{f} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{g}) \coqdocvar{b}\coqdoceol
\coqdocindent{5.00em}
\coqdocnotation{=}\coqdoceol
\coqdocindent{5.00em}
(\coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{o} \coqdocvar{f} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{g}) \coqdocvar{b}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} ((\coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{o} \coqdocvar{f} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{g}) \coqdocvar{b})\coqdoceol
\coqdocindent{4.50em}
\coqdockw{with} (((\coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} ((\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}) ((\coqdocvar{f} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{g}) \coqdocvar{b}))))).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} (\coqdocmethod{eissect} (\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g})). \coqdoctac{reflexivity}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} \coqdocvar{X}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} ((\coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{o} \coqdocvar{f} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{g}) \coqdocvar{b})\coqdoceol
\coqdocindent{4.50em}
\coqdockw{with} (((\coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{h}) ((((\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}) (\coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} (\coqdocvar{g} \coqdocvar{b}))))))).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} (\coqdocmethod{eisretr} (\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} ((\coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{h}) (\coqdocvar{g} \coqdocvar{b})) \coqdockw{with} ((\coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)}) \coqdocvar{b}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdocmethod{eissect} (\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g})).\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{a}. \coqdoctac{apply} (\coqdocmethod{eissect} (\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f})).\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdoctac{split}.\coqdoceol
\coqdocindent{1.00em}
\begin{coqdoccomment}
\coqdocindent{0.50em}
case\coqdocindent{0.50em}
g\coqdocindent{0.50em}
\end{coqdoccomment}
\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{isequiv\_adjointify} \coqdocvar{g} (\coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{h}) \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{c}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} (\coqdocvar{g} ((\coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{h}) \coqdocvar{c})) \coqdockw{with} ((\coqdocvar{g} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{h}) \coqdocvar{c}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{assert} ((\coqdocvar{g} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{h}) \coqdocvar{c}\coqdoceol
\coqdocindent{5.00em}
\coqdocnotation{=}\coqdoceol
\coqdocindent{5.00em}
(\coqdocvar{g} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{h} \coqdocnotation{o} \coqdocvar{g} \coqdocnotation{o} \coqdocvar{f} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}}) \coqdocvar{c}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} ((\coqdocvar{g} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{h} \coqdocnotation{o} \coqdocvar{g} \coqdocnotation{o} \coqdocvar{f} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}}) \coqdocvar{c})\coqdoceol
\coqdocindent{4.50em}
\coqdockw{with} (((\coqdocvar{g} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{h}) ((\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}) (\coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocvar{c})))).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} (\coqdocmethod{eisretr} (\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f})). \coqdoctac{reflexivity}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} \coqdocvar{X}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} ((\coqdocvar{g} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{h} \coqdocnotation{o} \coqdocvar{g} \coqdocnotation{o} \coqdocvar{f} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}}) \coqdocvar{c})\coqdoceol
\coqdocindent{4.50em}
\coqdockw{with} (\coqdocvar{g} ((\coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} ((\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}) ((\coqdocvar{f} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}}) \coqdocvar{c}))))).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} (\coqdocmethod{eissect} (\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} (\coqdocvar{g} ((\coqdocvar{f} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}}) \coqdocvar{c})) \coqdockw{with} ((\coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}}) \coqdocvar{c}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdocmethod{eisretr} (\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f})).\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{b}. \coqdoctac{apply} (\coqdocmethod{eissect} (\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g})).\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdoctac{split}.\coqdoceol
\coqdocindent{1.00em}
\begin{coqdoccomment}
\coqdocindent{0.50em}
case\coqdocindent{0.50em}
h\coqdocindent{0.50em}
\end{coqdoccomment}
\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{isequiv\_adjointify} \coqdocvar{h} (\coqdocvar{g} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}}) \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{d}. \coqdoctac{apply} (\coqdocmethod{eisretr} (\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g})).\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{c}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} ((\coqdocvar{g} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}}) (\coqdocvar{h} \coqdocvar{c})) \coqdockw{with} ((\coqdocvar{g} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{h}) \coqdocvar{c}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{assert} ((\coqdocvar{g} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{h}) \coqdocvar{c}\coqdoceol
\coqdocindent{5.00em}
\coqdocnotation{=}\coqdoceol
\coqdocindent{5.00em}
(\coqdocvar{g} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{h} \coqdocnotation{o} \coqdocvar{g} \coqdocnotation{o} \coqdocvar{f} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}}) \coqdocvar{c}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} ((\coqdocvar{g} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{h} \coqdocnotation{o} \coqdocvar{g} \coqdocnotation{o} \coqdocvar{f} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}}) \coqdocvar{c})\coqdoceol
\coqdocindent{4.50em}
\coqdockw{with} (((\coqdocvar{g} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{h}) ((\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}) (\coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocvar{c})))).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} (\coqdocmethod{eisretr} (\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f})). \coqdoctac{reflexivity}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} \coqdocvar{X}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} ((\coqdocvar{g} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{h} \coqdocnotation{o} \coqdocvar{g} \coqdocnotation{o} \coqdocvar{f} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}}) \coqdocvar{c})\coqdoceol
\coqdocindent{4.50em}
\coqdockw{with} (\coqdocvar{g} (\coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} ((\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}) ((\coqdocvar{f} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}}) \coqdocvar{c})))).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} (\coqdocmethod{eissect} (\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} (\coqdocvar{g} ((\coqdocvar{f} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}}) \coqdocvar{c})) \coqdockw{with} ((\coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}}) \coqdocvar{c}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdocmethod{eisretr} (\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f})).\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\begin{coqdoccomment}
\coqdocindent{0.50em}
case\coqdocindent{0.50em}
h\coqdocindent{0.50em}
o\coqdocindent{0.50em}
g\coqdocindent{0.50em}
o\coqdocindent{0.50em}
f\coqdocindent{0.50em}
\end{coqdoccomment}
\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{isequiv\_adjointify} (\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}) (\coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{g} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}}) \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{d}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} ((\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}) ((\coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{g} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}}) \coqdocvar{d}))\coqdoceol
\coqdocindent{4.50em}
\coqdockw{with} (\coqdocvar{h} ((\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}) (\coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} ((\coqdocvar{g} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}}) \coqdocvar{d})))).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} (\coqdocmethod{eisretr} (\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdocmethod{eisretr} (\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g})).\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{a}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{change} ((\coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{g} \coqdocnotation{o} \coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}}) ((\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}) \coqdocvar{a}))\coqdoceol
\coqdocindent{4.50em}
\coqdockw{with} (((\coqdocnotation{(}\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} \coqdocnotation{o} \coqdocvar{g}) (\coqdocnotation{(}\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}\coqdocnotation{)} \coqdocnotation{\ensuremath{^{-1}}} ((\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g}) (\coqdocvar{f} \coqdocvar{a}))))).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{rewrite} (\coqdocmethod{eissect} (\coqdocvar{h} \coqdocnotation{o} \coqdocvar{g})). \coqdoctac{apply} (\coqdocmethod{eissect} (\coqdocvar{g} \coqdocnotation{o} \coqdocvar{f})).\coqdoceol
\coqdocnoindent
\coqdockw{Qed}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch04.isequiv homotopic'}{isequiv\_homotopic'}{\coqdoclemma{isequiv\_homotopic'}} : \coqdockw{\ensuremath{\forall}} (\coqdocvar{A} \coqdocvar{B} : \coqdockw{Type}) (\coqdocvar{f} \coqdocvar{g} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B}),\coqdoceol
\coqdocindent{1.00em}
\coqdocclass{IsEquiv} \coqdocvariable{f} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{f} \coqdocnotation{\ensuremath{\sim}} \coqdocvariable{g} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocclass{IsEquiv} \coqdocvariable{g}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros} \coqdocvar{A} \coqdocvar{B} \coqdocvar{f} \coqdocvar{g} \coqdocvar{p} \coqdocvar{h}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{isequiv\_adjointify} \coqdocvar{g} \coqdocvar{f}\coqdocnotation{\ensuremath{^{-1}}} \coqdocvar{\_} \coqdocvar{\_}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros} \coqdocvar{b}. \coqdoctac{apply} (\coqdocnotation{(}\coqdocvar{h} (\coqdocvar{f}\coqdocnotation{\ensuremath{^{-1}}} \coqdocvar{b})\coqdocnotation{)\^{}} \coqdocnotation{@} \coqdocnotation{(}\coqdocmethod{eisretr} \coqdocvar{f} \coqdocvar{b}\coqdocnotation{)}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros} \coqdocvar{a}. \coqdoctac{apply} (\coqdocnotation{(}\coqdocdefinition{ap} \coqdocvar{f}\coqdocnotation{\ensuremath{^{-1}}} (\coqdocvar{h} \coqdocvar{a})\coqdocnotation{)\^{}} \coqdocnotation{@} \coqdocnotation{(}\coqdocmethod{eissect} \coqdocvar{f} \coqdocvar{a}\coqdocnotation{)}).\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch04.Theorem2111'}{Theorem2111'}{\coqdoclemma{Theorem2111'}} (\coqdocvar{A} \coqdocvar{B} : \coqdockw{Type}) (\coqdocvar{a} \coqdocvar{a'} : \coqdocvariable{A}) (\coqdocvar{f} : \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B}) (\coqdocvar{H} : \coqdocclass{IsEquiv} \coqdocvariable{f}) :\coqdoceol
\coqdocindent{1.00em}
\coqdocclass{IsEquiv} (\coqdockw{fun} \coqdocvar{p} : \coqdocvariable{a} \coqdocnotation{=} \coqdocvariable{a'} \ensuremath{\Rightarrow} \coqdocdefinition{ap} \coqdocvariable{f} \coqdocvariable{p}).\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqref{Ch04.two out of six}{\coqdoclemma{two\_out\_of\_six}} (\coqdockw{fun} \coqdocvar{p} : \coqdocvar{a} \coqdocnotation{=} \coqdocvar{a'} \ensuremath{\Rightarrow} \coqdocdefinition{ap} \coqdocvar{f} \coqdocvariable{p})\coqdoceol
\coqdocindent{12.00em}
(\coqdockw{fun} \coqdocvar{p} : \coqdocnotation{(}\coqdocvar{f} \coqdocvar{a}\coqdocnotation{)} \coqdocnotation{=} \coqdocnotation{(}\coqdocvar{f} \coqdocvar{a'}\coqdocnotation{)} \ensuremath{\Rightarrow} \coqdocdefinition{ap} \coqdocvar{f}\coqdocnotation{\ensuremath{^{-1}}} \coqdocvariable{p})\coqdoceol
\coqdocindent{12.00em}
(\coqdockw{fun} \coqdocvar{p} : \coqdocnotation{(}\coqdocvar{f}\coqdocnotation{\ensuremath{^{-1}}} (\coqdocvar{f} \coqdocvar{a})\coqdocnotation{)} \coqdocnotation{=} \coqdocnotation{(}\coqdocvar{f}\coqdocnotation{\ensuremath{^{-1}}} (\coqdocvar{f} \coqdocvar{a'})\coqdocnotation{)} \ensuremath{\Rightarrow} \coqdocdefinition{ap} \coqdocvar{f} \coqdocvariable{p})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdocinstance{isequiv\_homotopic} (\coqdockw{fun} \coqdocvar{p} \ensuremath{\Rightarrow} \coqdocnotation{(}\coqdocmethod{eissect} \coqdocvar{f} \coqdocvar{a}\coqdocnotation{)} \coqdocnotation{@} \coqdocvariable{p} \coqdocnotation{@} \coqdocnotation{(}\coqdocmethod{eissect} \coqdocvar{f} \coqdocvar{a'}\coqdocnotation{)\^{}})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{isequiv\_adjointify} \coqdocvar{\_} \coqdoceol
\coqdocindent{14.50em}
(\coqdockw{fun} \coqdocvar{p} \ensuremath{\Rightarrow} \coqdocnotation{(}\coqdocmethod{eissect} \coqdocvar{f} \coqdocvar{a}\coqdocnotation{)\^{}} \coqdocnotation{@} \coqdocvariable{p} \coqdocnotation{@} \coqdocnotation{(}\coqdocmethod{eissect} \coqdocvar{f} \coqdocvar{a'}\coqdocnotation{)}) \coqdoceol
\coqdocindent{14.50em}
\coqdocvar{\_} \coqdocvar{\_});\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro}; \coqdocvar{hott\_simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{p}. \coqdoctac{induction} \coqdocvar{p}. \coqdocvar{hott\_simpl}.\coqdoceol
\coqdocemptyline
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdocinstance{isequiv\_homotopic} (\coqdockw{fun} \coqdocvar{p} \ensuremath{\Rightarrow} \coqdocnotation{(}\coqdocmethod{eisretr} \coqdocvar{f} (\coqdocvar{f} \coqdocvar{a})\coqdocnotation{)} \coqdocnotation{@} \coqdocvariable{p} \coqdocnotation{@} \coqdocnotation{(}\coqdocmethod{eisretr} \coqdocvar{f} (\coqdocvar{f} \coqdocvar{a'})\coqdocnotation{)\^{}})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{isequiv\_adjointify} \coqdocvar{\_} \coqdoceol
\coqdocindent{12.00em}
(\coqdockw{fun} \coqdocvar{p} \ensuremath{\Rightarrow} \coqdocnotation{(}\coqdocmethod{eisretr} \coqdocvar{f} (\coqdocvar{f} \coqdocvar{a})\coqdocnotation{)\^{}} \coqdocnotation{@} \coqdocvariable{p} \coqdocnotation{@} \coqdocnotation{(}\coqdocmethod{eisretr} \coqdocvar{f} (\coqdocvar{f} \coqdocvar{a'})\coqdocnotation{)}) \coqdoceol
\coqdocindent{12.00em}
\coqdocvar{\_} \coqdocvar{\_});\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro}; \coqdocvar{hott\_simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{p}. \coqdoctac{induction} \coqdocvar{p}. \coqdocvar{hott\_simpl}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
\exer{4.6}{147} 
For $A, B : \UU$, define
\[
  \mathsf{idtoqinv}(A, B) : (A = B) \to \sm{f : A \to B} \qinv(f)
\]
by path induction in the obvious way.  Let \qinv-univalence denote the
modified form of the univalence axiom which asserts that for all $A, B : \UU$
the function $\mathsf{idtoqinv}(A, B)$ has a quasi-inverse.
\begin{itemize}
  \item[(i)] Show that \qinv-univalence can be used instead of univalence in
      the proof of function extensionality in \S4.9.
  \item[(ii)] Show that \qinv-univalence can be used instead of univalence in
      the proof of Theorem 4.1.3.
  \item[(iii)] Show that \qinv-univalence is inconsistent.  Thus, the use of a
      ``good'' version of $\isequiv$ is essential in the statement of
      univalence.
\end{itemize}


 \soln
(i)  The proof of function extensionality uses univalence in the proof of
Lemma 4.9.2.  Assume that $\UU$ is $\qinv$-univalent, and that $A, B, X : \UU$
with $e : A \eqvsym B$.  From $e$ we obtain $f : A \to B$ and $p :
\ishae(f)$, and from the latter we obtain an element $q : \qinv(f)$.
$\qinv$-univalence says that we may write $(f, q) = \mathsf{idtoqinv}_{A,
B}(r)$ for some $r : A = B$.  Then by path induction, we may assume that $r
\equiv \refl{A}$, making $e = \idfunc{A}$, and the function $g \mapsto g \circ
\idfunc{A}$ is clearly an equivalence $(X \to A) \eqvsym (X \to B)$,
establishing Lemma 4.9.2.  Since the rest of the section is either an
application of Lemma 4.9.2 or doesn't use the univalence axiom, the proof of
function extensionality goes through.
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Section} \coqdef{Ch04.Exercise4 6}{Exercise4\_6}{\coqdocsection{Exercise4\_6}}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch04.idtoqinv}{idtoqinv}{\coqdocdefinition{idtoqinv}} \{\coqdocvar{A} \coqdocvar{B}\} : \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdocvariable{A} \coqdocnotation{=} \coqdocvariable{B}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{f} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{(}}\coqref{Ch04.qinv}{\coqdocdefinition{qinv}} \coqdocvar{f}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{)\}}}.\coqdoceol
\coqdocindent{1.00em}
\coqdocvar{path\_induction}. \coqdoctac{\ensuremath{\exists}} \coqdocabbreviation{idmap}. \coqdoctac{\ensuremath{\exists}} \coqdocabbreviation{idmap}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{split}; \coqdoctac{intro} \coqdocvar{a}; \coqdoctac{reflexivity}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Hypothesis} \coqdef{Ch04.Exercise4 6.qinv univalence}{qinv\_univalence}{\coqdocvariable{qinv\_univalence}} : \coqdockw{\ensuremath{\forall}} \coqdocvar{A} \coqdocvar{B}, \coqref{Ch04.qinv}{\coqdocdefinition{qinv}} (@\coqref{Ch04.idtoqinv}{\coqdocdefinition{idtoqinv}} \coqdocvariable{A} \coqdocvariable{B}).\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch04.ex4 6i}{ex4\_6i}{\coqdoclemma{ex4\_6i}} (\coqdocvar{A} \coqdocvar{B} \coqdocvar{X} : \coqdockw{Type}) (\coqdocvar{e} : \coqdocvariable{A} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocvariable{B}) : \coqdocnotation{(}\coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{A}\coqdocnotation{)} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocnotation{(}\coqdocvariable{X} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvariable{B}\coqdocnotation{)}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} \coqdocvar{e} \coqdockw{as} [\coqdocvar{f} \coqdocvar{p}].\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{assert} (\coqref{Ch04.qinv}{\coqdocdefinition{qinv}} \coqdocvar{f}) \coqdockw{as} \coqdocvar{q}. \coqdoctac{\ensuremath{\exists}} \coqdocvar{f}\coqdocnotation{\ensuremath{^{-1}}}. \coqdoctac{split}.\coqdoceol
\coqdocindent{2.00em}
\coqdoctac{apply} (\coqdocmethod{eisretr} \coqdocvar{f}). \coqdoctac{apply} (\coqdocmethod{eissect} \coqdocvar{f}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{assert} (\coqdocvar{A} \coqdocnotation{=} \coqdocvar{B}) \coqdockw{as} \coqdocvar{r}. \coqdoctac{apply} (\coqdocvariable{qinv\_univalence} \coqdocvar{A} \coqdocvar{B}). \coqdoctac{apply} \coqdocnotation{(}\coqdocvar{f}\coqdocnotation{;} \coqdocvar{q}\coqdocnotation{)}.\coqdoceol
\coqdocindent{1.00em}
\coqdocvar{path\_induction}. \coqdoctac{apply} \coqdocdefinition{equiv\_idmap}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\end{coqdoccode}
(ii) Theorem 4.1.3 provides an example of types $A$ and $B$ and a function $f:
A \to B$ such that $\qinv(f)$ is not a mere proposition, relying on the result
of Lemma 4.1.1.  Since Lemma 4.1.1 does not actually rely on univalence
(cf.~Exercise 4.3), we only need to worry about the use of univalence in the
proof of Theorem 4.1.3.  Define $X \defeq \sm{A : \UU} \brck{\bool = A}$ and
$a \defeq (\bool, \lvert \refl{\bool} \rvert) : X$.  Let $e : \bool \eqvsym
\bool$ be the non-identity equivalence from Exercise 2.13, which gives us
$\lnot : \bool \to \bool$ and $r : \qinv(\lnot)$.  Define $q \defeq
\mathsf{idtoqinv}_{\bool, \bool}^{-1}(\lnot, r)$.  Now we can run the proof as
before, applying Lemma 4.1.2.  


Here univalence is used only in establishing that $a = a$ is a set, by showing
that it's equivalent to $(\bool \eqvsym \bool)$.
\begin{coqdoccode}
\coqdocemptyline
\coqdocnoindent
\coqdockw{Lemma} \coqdef{Ch04.Lemma412}{Lemma412}{\coqdoclemma{Lemma412}} (\coqdocvar{A} : \coqdockw{Type}) (\coqdocvar{a} : \coqdocvariable{A}) (\coqdocvar{q} : \coqdocvariable{a} \coqdocnotation{=} \coqdocvariable{a}) :\coqdoceol
\coqdocindent{1.00em}
\coqdocabbreviation{IsHSet} (\coqdocvariable{a} \coqdocnotation{=} \coqdocvariable{a}) \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} \coqdocvar{x}, \coqdocabbreviation{Brck} (\coqdocvariable{a} \coqdocnotation{=} \coqdocvariable{x})\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}} \coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdockw{\ensuremath{\forall}} \coqdocvar{p} : \coqdocvariable{a} \coqdocnotation{=} \coqdocvariable{a}, \coqdocvariable{p} \coqdocnotation{@} \coqdocvariable{q} \coqdocnotation{=} \coqdocvariable{q} \coqdocnotation{@} \coqdocvariable{p}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}}\coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{f} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdockw{\ensuremath{\forall}} (\coqdocvar{x}:\coqdocvariable{A}), \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocvar{f} \coqdocvariable{a} \coqdocnotation{=} \coqdocvariable{q}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros} \coqdocvar{i} \coqdocvar{g} \coqdocvar{iii}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{assert} (\coqdockw{\ensuremath{\forall}} (\coqdocvar{x} \coqdocvar{y} : \coqdocvar{A}), \coqdocabbreviation{IsHSet} (\coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{y})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros} \coqdocvar{x} \coqdocvar{y}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{assert} (\coqdocabbreviation{Brck} (\coqdocvar{a} \coqdocnotation{=} \coqdocvar{x})) \coqdockw{as} \coqdocvar{gx}. \coqdoctac{apply} (\coqdocvar{g} \coqdocvar{x}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{assert} (\coqdocabbreviation{Brck} (\coqdocvar{a} \coqdocnotation{=} \coqdocvar{y})) \coqdockw{as} \coqdocvar{gy}. \coqdoctac{apply} (\coqdocvar{g} \coqdocvar{y}).\coqdoceol
\coqdocindent{1.00em}
\coqdocvar{strip\_truncations}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdoclemma{ex3\_1'} (\coqdocvar{a} \coqdocnotation{=} \coqdocvar{a})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} (\coqdocdefinition{equiv\_adjointify} (\coqdockw{fun} \coqdocvar{p} \ensuremath{\Rightarrow} \coqdocvar{gx}\coqdocnotation{\^{}} \coqdocnotation{@} \coqdocvariable{p} \coqdocnotation{@} \coqdocvar{gy}) (\coqdockw{fun} \coqdocvar{p} \ensuremath{\Rightarrow} \coqdocvar{gx} \coqdocnotation{@} \coqdocvariable{p} \coqdocnotation{@} \coqdocvar{gy}\coqdocnotation{\^{}}) \coqdocvar{\_} \coqdocvar{\_});\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros} \coqdocvar{p}; \coqdocvar{hott\_simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocvar{i}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{assert} (\coqdockw{\ensuremath{\forall}} \coqdocvar{x}, \coqdocabbreviation{IsHProp} (\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{r} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdockw{\ensuremath{\forall}} \coqdocvar{s} : \coqdocvar{a} \coqdocnotation{=} \coqdocvariable{x}, \coqdocvar{r} \coqdocnotation{=} \coqdocvariable{s}\coqdocnotation{\^{}} \coqdocnotation{@} \coqdocvar{q} \coqdocnotation{@} \coqdocvariable{s}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{x}. \coqdoctac{assert} (\coqdocabbreviation{Brck} (\coqdocvar{a} \coqdocnotation{=} \coqdocvar{x})) \coqdockw{as} \coqdocvar{p}. \coqdoctac{apply} (\coqdocvar{g} \coqdocvar{x}). \coqdocvar{strip\_truncations}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdoclemma{hprop\_allpath}; \coqdoctac{intros} \coqdocvar{h} \coqdocvar{h'}; \coqdoctac{destruct} \coqdocvar{h} \coqdockw{as} [\coqdocvar{r} \coqdocvar{h}], \coqdocvar{h'} \coqdockw{as} [\coqdocvar{r'} \coqdocvar{h'}].\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_sigma\_uncurried}. \coqdoctac{\ensuremath{\exists}} (\coqdocnotation{(}\coqdocvar{h} \coqdocvar{p}\coqdocnotation{)} \coqdocnotation{@} \coqdocnotation{(}\coqdocvar{h'} \coqdocvar{p}\coqdocnotation{)\^{}}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{simpl}. \coqdoctac{apply} \coqdocdefinition{path\_forall}; \coqdoctac{intro} \coqdocvar{s}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdocvar{X} \coqdocvar{x} \coqdocvar{x}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{assert} (\coqdockw{\ensuremath{\forall}} \coqdocvar{x}, \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{r} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvariable{x} \coqdocnotation{=} \coqdocvariable{x} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdockw{\ensuremath{\forall}} \coqdocvar{s} : \coqdocvar{a} \coqdocnotation{=} \coqdocvariable{x}, \coqdocvar{r} \coqdocnotation{=} \coqdocnotation{(}\coqdocvariable{s} \coqdocnotation{\^{}} \coqdocnotation{@} \coqdocvar{q}\coqdocnotation{)} \coqdocnotation{@} \coqdocvariable{s}\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intro} \coqdocvar{x}. \coqdoctac{assert} (\coqdocabbreviation{Brck} (\coqdocvar{a} \coqdocnotation{=} \coqdocvar{x})) \coqdockw{as} \coqdocvar{p}. \coqdoctac{apply} (\coqdocvar{g} \coqdocvar{x}). \coqdocvar{strip\_truncations}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{\ensuremath{\exists}} (\coqdocvar{p}\coqdocnotation{\^{}} \coqdocnotation{@} \coqdocvar{q} \coqdocnotation{@} \coqdocvar{p}). \coqdoctac{intro} \coqdocvar{s}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdoclemma{cancelR} \coqdocvar{\_} \coqdocvar{\_} \coqdocvar{s}\coqdocnotation{\^{}}). \coqdocvar{hott\_simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdoclemma{cancelL} \coqdocvar{p}). \coqdocvar{hott\_simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{transitivity} (\coqdocvar{q} \coqdocnotation{@} \coqdocnotation{(}\coqdocvar{p} \coqdocnotation{@} \coqdocvar{s}\coqdocnotation{\^{}}\coqdocnotation{)}). \coqdocvar{hott\_simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{symmetry}. \coqdoctac{apply} (\coqdocvar{iii} (\coqdocvar{p} \coqdocnotation{@} \coqdocvar{s}\coqdocnotation{\^{}})).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{\ensuremath{\exists}} (\coqdockw{fun} \coqdocvar{x} \ensuremath{\Rightarrow} \coqdocnotation{(}\coqdocvar{X1} \coqdocvariable{x}\coqdocnotation{).1}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{transitivity} (1\coqdocnotation{\^{}} \coqdocnotation{@} \coqdocvar{q} \coqdocnotation{@} 1).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdocnotation{(}\coqdocvar{X1} \coqdocvar{a}\coqdocnotation{).2} 1). \coqdocvar{hott\_simpl}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch04.Bool Bool to a a}{Bool\_Bool\_to\_a\_a}{\coqdocdefinition{Bool\_Bool\_to\_a\_a}} : \coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdocnotation{(}\coqdocinductive{Bool}:\coqdockw{Type}\coqdocnotation{)} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocnotation{(}\coqdocinductive{Bool}:\coqdockw{Type}\coqdocnotation{)}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdoceol
\coqdocindent{1.00em}
\coqdocnotation{(}\coqdocnotation{((}\coqdocinductive{Bool}:\coqdockw{Type}\coqdocnotation{);} \coqdocconstructor{min1} 1\coqdocnotation{)}:\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdockw{Type} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocabbreviation{Brck} (\coqdocnotation{(}\coqdocinductive{Bool}:\coqdockw{Type}\coqdocnotation{)} \coqdocnotation{=} \coqdocvar{A})\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}\coqdocnotation{)} \coqdoceol
\coqdocindent{1.00em}
\coqdocnotation{=}\coqdoceol
\coqdocindent{1.00em}
\coqdocnotation{(}\coqdocnotation{((}\coqdocinductive{Bool}:\coqdockw{Type}\coqdocnotation{);} \coqdocconstructor{min1} 1\coqdocnotation{)}:\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdockw{Type} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocabbreviation{Brck} (\coqdocnotation{(}\coqdocinductive{Bool}:\coqdockw{Type}\coqdocnotation{)} \coqdocnotation{=} \coqdocvar{A})\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}\coqdocnotation{)}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocdefinition{path\_sigma\_hprop}. \coqdoctac{simpl}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqdocnotation{(}\coqdocvariable{qinv\_univalence} \coqdocinductive{Bool} \coqdocinductive{Bool}\coqdocnotation{).1}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} \coqdocvar{X}. \coqdoctac{\ensuremath{\exists}} \coqdocvar{equiv\_fun}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{destruct} \coqdocvar{equiv\_isequiv}. \coqdoctac{\ensuremath{\exists}} \coqdocvar{equiv\_inv}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{split}. \coqdoctac{apply} \coqdocvar{eisretr}. \coqdoctac{apply} \coqdocvar{eissect}.\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Definition} \coqdef{Ch04.a a to Bool Bool}{a\_a\_to\_Bool\_Bool}{\coqdocdefinition{a\_a\_to\_Bool\_Bool}} : \coqdoceol
\coqdocindent{1.00em}
\coqdocnotation{(}\coqdocnotation{((}\coqdocinductive{Bool}:\coqdockw{Type}\coqdocnotation{);} \coqdocconstructor{min1} 1\coqdocnotation{)}:\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdockw{Type} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocabbreviation{Brck} (\coqdocnotation{(}\coqdocinductive{Bool}:\coqdockw{Type}\coqdocnotation{)} \coqdocnotation{=} \coqdocvar{A})\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}\coqdocnotation{)} \coqdoceol
\coqdocindent{1.00em}
\coqdocnotation{=}\coqdoceol
\coqdocindent{1.00em}
\coqdocnotation{(}\coqdocnotation{((}\coqdocinductive{Bool}:\coqdockw{Type}\coqdocnotation{);} \coqdocconstructor{min1} 1\coqdocnotation{)}:\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdockw{Type} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocabbreviation{Brck} (\coqdocnotation{(}\coqdocinductive{Bool}:\coqdockw{Type}\coqdocnotation{)} \coqdocnotation{=} \coqdocvar{A})\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}\coqdocnotation{)} \coqdoceol
\coqdocindent{1.00em}
\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{(}}\coqdocnotation{(}\coqdocinductive{Bool}:\coqdockw{Type}\coqdocnotation{)} \coqdocnotation{\ensuremath{\eqvsym}} \coqdocnotation{(}\coqdocinductive{Bool}:\coqdockw{Type}\coqdocnotation{)}\coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{)}}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{intros}. \coqdoctac{simpl}. \coqdoctac{apply} \coqdocdefinition{base\_path} \coqdoctac{in} \coqdocvar{X}. \coqdoctac{simpl} \coqdoctac{in} \coqdocvar{X}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} \coqref{Ch04.idtoqinv}{\coqdocdefinition{idtoqinv}} \coqdoctac{in} \coqdocvar{X}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdocconstructor{BuildEquiv} \coqdocinductive{Bool} \coqdocinductive{Bool} \coqdocvar{X}\coqdocnotation{.1}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{apply} (\coqdocdefinition{isequiv\_adjointify} \coqdocvar{X}\coqdocnotation{.1} \coqdocvar{X}\coqdocnotation{.2}\coqdocnotation{.1} (\coqexternalref{fst}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocdefinition{fst}} \coqdocvar{X}\coqdocnotation{.2.2}) (\coqexternalref{snd}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocdefinition{snd}} \coqdocvar{X}\coqdocnotation{.2.2})).\coqdoceol
\coqdocnoindent
\coqdockw{Defined}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{Theorem} \coqdef{Ch04.ex4 6ii}{ex4\_6ii}{\coqdoclemma{ex4\_6ii}} : \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdockw{Type} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{B} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdockw{Type} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{f} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdocvar{A} \coqexternalref{:type scope:x '->' x}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic}{\coqdocnotation{\ensuremath{\rightarrow}}} \coqdocvar{B} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocnotation{\ensuremath{\lnot}} \coqdocabbreviation{IsHProp} (\coqref{Ch04.qinv}{\coqdocdefinition{qinv}} \coqdocvar{f})\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}\}\}}}.\coqdoceol
\coqdocnoindent
\coqdockw{Proof}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{set} (\coqdocvar{X} := \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\{}}\coqdocvar{A} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{:}} \coqdockw{Type} \coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\&}} \coqdocabbreviation{Brck} (\coqdocnotation{(}\coqdocinductive{Bool}:\coqdockw{Type}\coqdocnotation{)} \coqdocnotation{=} \coqdocvar{A})\coqexternalref{:type scope:'x7B' x ':' x 'x26' x 'x7D'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Specif}{\coqdocnotation{\}}}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{refine} \coqdocnotation{(}\coqdocvar{X}\coqdocnotation{;} \coqdocnotation{(}\coqdocvar{X}\coqdocnotation{;} \coqdocvar{\_}\coqdocnotation{))}.\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{set} (\coqdocvar{a} := \coqdocnotation{((}\coqdocinductive{Bool}:\coqdockw{Type}\coqdocnotation{);} \coqdocconstructor{min1} 1\coqdocnotation{)} : \coqdocvar{X}).\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{set} (\coqdocvar{e} := \coqdoclemma{negb\_isequiv}). \coqdoctac{destruct} \coqdocvar{e} \coqdockw{as} [\coqdocvar{lnot} \coqdocvar{H}].\coqdoceol
\coqdocindent{1.00em}
\coqdoctac{set} (\coqdocvar{r} := \coqdocnotation{(}\coqdocvar{lnot}\coqdocnotation{\ensuremath{^{-1}}}\coqdocnotation{;} \coqexternalref{:core scope:'(' x ',' x ',' '..' ',' x ')'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{(}}\coqdocmethod{eisretr} \coqdocvar{lnot}\coqexternalref{:core scope:'(' x ',' x ',' '..' ',' x ')'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{,}} \coqdocmethod{eissect} \coqdocvar{lnot}\coqexternalref{:core scope:'(' x ',' x ',' '..' ',' x ')'}{http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes}{\coqdocnotation{)}}\coqdocnotation{)} : \coqref{Ch04.qinv}{\coqdocdefinition{qinv}} \coqdocvar{lnot}).\coqdoceol
\coqdocindent{1.00em}
\begin{coqdoccomment}
\coqdocindent{0.50em}
Coq\coqdocindent{0.50em}
update\coqdocindent{0.50em}
broke\coqdocindent{0.50em}
this\coqdoceol
\coqdocindent{1.00em}
set\coqdocindent{0.50em}
(q\coqdocindent{0.50em}
:=\coqdocindent{0.50em}
(path\_sigma\_hprop\coqdocindent{0.50em}
a\coqdocindent{0.50em}
a\coqdocindent{0.50em}
((qinv\_univalence\coqdocindent{0.50em}
Bool\coqdocindent{0.50em}
Bool).1\coqdocindent{0.50em}
(lnot;\coqdocindent{0.50em}
r)))).\coqdoceol
\coqdocindent{1.00em}
assert\coqdocindent{0.50em}
\{f\coqdocindent{0.50em}
:\coqdocindent{0.50em}
forall\coqdocindent{0.50em}
x,\coqdocindent{0.50em}
x\coqdocindent{0.50em}
=\coqdocindent{0.50em}
x\coqdocindent{0.50em}
\&\coqdocindent{0.50em}
(f\coqdocindent{0.50em}
a)\coqdocindent{0.50em}
=\coqdocindent{0.50em}
q\}.\coqdoceol
\coqdocindent{1.00em}
apply\coqdocindent{0.50em}
Lemma412.\coqdoceol
\coqdocindent{1.00em}
apply\coqdocindent{0.50em}
(ex3\_1'\coqdocindent{0.50em}
((Bool:Type)\coqdocindent{0.50em}
<\~{}>\coqdocindent{0.50em}
(Bool:Type))).\coqdoceol
\coqdocindent{1.00em}
refine\coqdocindent{0.50em}
(equiv\_adjointify\coqdocindent{0.50em}
Bool\_Bool\_to\_a\_a\coqdocindent{0.50em}
a\_a\_to\_Bool\_Bool\coqdocindent{0.50em}
\_\coqdocindent{0.50em}
\_);\coqdoceol
\coqdocindent{1.00em}
unfold\coqdocindent{0.50em}
Bool\_Bool\_to\_a\_a,\coqdocindent{0.50em}
a\_a\_to\_Bool\_Bool.\coqdoceol
\coqdocindent{1.00em}
intro\coqdocindent{0.50em}
p.\coqdocindent{0.50em}
simpl.\coqdoceol
\coqdocindent{1.50em}
\end{coqdoccomment}
\coqdoceol
\coqdocnoindent
\coqdocvar{Admitted}.\coqdoceol
\coqdocemptyline
\coqdocnoindent
\coqdockw{End} \coqref{Ch04.Exercise4 6}{\coqdocsection{Exercise4\_6}}.\coqdoceol
\end{coqdoccode}
